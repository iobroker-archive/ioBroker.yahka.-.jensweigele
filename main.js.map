{"version":3,"file":"main.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BG;AAEH,kBAAkB;AAClB,0BAA0B;AAC1B,uBAAuB;AACV;;AACb,wDAAgC;AAChC,KAAK,CAAC,MAAM,CAAC,uDAAuD,CAAC,CAAC;AAEtE,iEAAiE;AACjE,0FAAgD;AAChD,qGAAsD;AACtD,mBAAO,CAAC,iFAAoC,CAAC,CAAC;AAE9C,IAAI,YAAwC,CAAC;AAC7C,SAAS,YAAY,CAAC,UAAe,EAAE;IACtC,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC;IAClE,YAAY,GAAG,IAAI,SAAS,CAAC,gBAAgB,CAAC,SAAS,EAAE,KAAK,CAAC,yBAAyB,EAAE,CAAC,CAAC;IAC5F,OAAO,SAAS,CAAC;AACrB,CAAC;AAED,MAAM;AAEN,IAAI,MAAM,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;IAC7B,sCAAsC;IACtC,MAAM,CAAC,OAAO,GAAG,YAAY,CAAC;AAC/B,CAAC;KAAM,CAAC;IACP,0CAA0C;IAC1C,YAAY,EAAE,CAAC;AAChB,CAAC;;;;;;;;;;;;;;ACtDD,MAAa,WAAW;IACpB,YAAsB,OAAyB,EAAU,aAAqB;QAAxD,YAAO,GAAP,OAAO,CAAkB;QAAU,kBAAa,GAAb,aAAa,CAAQ;IAE9E,CAAC;IAEM,KAAK,CAAC,OAAe;QACxB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,aAAa,KAAK,OAAO,EAAE,CAAC,CAAC;IACxE,CAAC;IACM,IAAI,CAAC,OAAe;QACvB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,aAAa,KAAK,OAAO,EAAE,CAAC,CAAC;IACvE,CAAC;IACM,IAAI,CAAC,OAAe;QACvB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,aAAa,KAAK,OAAO,EAAE,CAAC,CAAC;IACvE,CAAC;IACM,KAAK,CAAC,OAAe;QACxB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,aAAa,KAAK,OAAO,EAAE,CAAC,CAAC;IACxE,CAAC;CACJ;AAjBD,kCAiBC;;;;;;;;;;;;;ACnBD,wCAEC;AAFD,SAAgB,cAAc,CAAI,MAAW,EAAE,QAAiB;IAC5D,OAAO,QAAQ,IAAI,MAAM,CAAC;AAC9B,CAAC;;;;;;;;;;;;;;;ACID,0EAiFC;AAvFD,yEAGoB;AAEpB,IAAI,gBAAgB,GAAG,KAAK,CAAC;AAC7B,SAAgB,+BAA+B;IAC3C,IAAI,gBAAgB,EAAE,CAAC;QACnB,OAAO;IACX,CAAC;IAED,2BAAc,CAAC,cAAc,SAAS,CAAC,IAAI,EAAE,CAAC,GAA0B,SAAS,CAAC;IAClF,2BAAc,CAAC,cAAc,YAAY,CAAC,IAAI,EAAE,CAAC,GAAuB,YAAY,CAAC;IACrF,2BAAc,CAAC,cAAc,YAAY,CAAC,IAAI,EAAE,CAAC,GAAuB,YAAY,CAAC;IACrF,2BAAc,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAwB,WAAW,CAAC;IACpF,2BAAc,CAAC,cAAc,MAAM,CAAC,IAAI,EAAE,CAAC,GAA6B,MAAM,CAAC;IAC/E,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAwB,WAAW,CAAC;IACpF,2BAAc,CAAC,cAAc,YAAY,CAAC,IAAI,EAAE,CAAC,GAAuB,YAAY,CAAC;IACrF,2BAAc,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAwB,WAAW,CAAC;IACpF,2BAAc,CAAC,cAAc,UAAU,CAAC,IAAI,EAAE,CAAC,GAAyB,UAAU,CAAC;IACnF,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,oBAAoB,CAAC,IAAI,EAAE,CAAC,GAAe,oBAAoB,CAAC;IAC7F,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,kBAAkB,CAAC,IAAI,EAAE,CAAC,GAAiB,kBAAkB,CAAC;IAC3F,2BAAc,CAAC,cAAc,eAAe,CAAC,IAAI,EAAE,CAAC,GAAoB,eAAe,CAAC;IACxF,2BAAc,CAAC,cAAc,iBAAiB,CAAC,IAAI,EAAE,CAAC,GAAkB,iBAAiB,CAAC;IAC1F,2BAAc,CAAC,cAAc,UAAU,CAAC,IAAI,EAAE,CAAC,GAAyB,UAAU,CAAC;IACnF,2BAAc,CAAC,cAAc,mBAAmB,CAAC,IAAI,EAAE,CAAC,GAAgB,mBAAmB,CAAC;IAC5F,2BAAc,CAAC,cAAc,UAAU,CAAC,IAAI,EAAE,CAAC,GAAyB,UAAU,CAAC;IACnF,2BAAc,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAwB,WAAW,CAAC;IACpF,2BAAc,CAAC,cAAc,KAAK,CAAC,IAAI,EAAE,CAAC,GAA8B,KAAK,CAAC;IAC9E,2BAAc,CAAC,cAAc,OAAO,CAAC,IAAI,EAAE,CAAC,GAA4B,OAAO,CAAC;IAChF,2BAAc,CAAC,cAAc,KAAK,CAAC,IAAI,EAAE,CAAC,GAA8B,KAAK,CAAC;IAC9E,2BAAc,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAwB,WAAW,CAAC;IACpF,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,sBAAsB,CAAC,IAAI,EAAE,CAAC,GAAa,sBAAsB,CAAC;IAC/F,2BAAc,CAAC,cAAc,YAAY,CAAC,IAAI,EAAE,CAAC,GAAuB,YAAY,CAAC;IACrF,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,eAAe,CAAC,IAAI,EAAE,CAAC,GAAoB,eAAe,CAAC;IACxF,2BAAc,CAAC,cAAc,iBAAiB,CAAC,IAAI,EAAE,CAAC,GAAkB,iBAAiB,CAAC;IAC1F,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,cAAc,CAAC,IAAI,EAAE,CAAC,GAAqB,cAAc,CAAC;IACvF,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,wBAAwB,CAAC,IAAI,EAAE,CAAC,GAAW,wBAAwB,CAAC;IACjG,2BAAc,CAAC,cAAc,UAAU,CAAC,IAAI,EAAE,CAAC,GAAyB,UAAU,CAAC;IACnF,2BAAc,CAAC,cAAc,OAAO,CAAC,IAAI,EAAE,CAAC,GAA4B,OAAO,CAAC;IAChF,2BAAc,CAAC,cAAc,uBAAuB,CAAC,IAAI,EAAE,CAAC,GAAY,uBAAuB,CAAC;IAChG,2BAAc,CAAC,cAAc,oBAAoB,CAAC,IAAI,EAAE,CAAC,GAAe,oBAAoB,CAAC;IAC7F,2BAAc,CAAC,cAAc,wBAAwB,CAAC,IAAI,EAAE,CAAC,GAAW,wBAAwB,CAAC;IACjG,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,UAAU,CAAC,IAAI,EAAE,CAAC,GAAyB,UAAU,CAAC;IACnF,2BAAc,CAAC,cAAc,cAAc,CAAC,IAAI,EAAE,CAAC,GAAqB,cAAc,CAAC;IACvF,2BAAc,CAAC,cAAc,qBAAqB,CAAC,IAAI,EAAE,CAAC,GAAc,qBAAqB,CAAC;IAC9F,2BAAc,CAAC,cAAc,kBAAkB,CAAC,IAAI,EAAE,CAAC,GAAiB,kBAAkB,CAAC;IAC3F,2BAAc,CAAC,cAAc,sBAAsB,CAAC,IAAI,EAAE,CAAC,GAAa,sBAAsB,CAAC;IAC/F,2BAAc,CAAC,cAAc,+BAA+B,CAAC,IAAI,EAAE,CAAC,GAAI,+BAA+B,CAAC;IACxG,2BAAc,CAAC,cAAc,4BAA4B,CAAC,IAAI,EAAE,CAAC,GAAO,4BAA4B,CAAC;IACrG,2BAAc,CAAC,cAAc,gCAAgC,CAAC,IAAI,EAAE,CAAC,GAAG,gCAAgC,CAAC;IACzG,2BAAc,CAAC,cAAc,gBAAgB,CAAC,IAAI,EAAE,CAAC,GAAmB,gBAAgB,CAAC;IACzF,2BAAc,CAAC,cAAc,gBAAgB,CAAC,IAAI,EAAE,CAAC,GAAmB,gBAAgB,CAAC;IACzF,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAsB,aAAa,CAAC;IACtF,2BAAc,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAwB,WAAW,CAAC;IACpF,2BAAc,CAAC,cAAc,IAAI,CAAC,IAAI,EAAE,CAAC,GAA+B,IAAI,CAAC;IAC7E,2BAAc,CAAC,cAAc,OAAO,CAAC,IAAI,EAAE,CAAC,GAA4B,OAAO,CAAC;IAChF,2BAAc,CAAC,cAAc,QAAQ,CAAC,IAAI,EAAE,CAAC,GAA2B,QAAQ,CAAC;IACjF,2BAAc,CAAC,cAAc,cAAc,CAAC,IAAI,EAAE,CAAC,GAAqB,cAAc,CAAC;IACvF,2BAAc,CAAC,cAAc,eAAe,CAAC,IAAI,EAAE,CAAC,GAAoB,eAAe,CAAC;IACxF,2BAAc,CAAC,cAAc,gBAAgB,CAAC,IAAI,EAAE,CAAC,GAAmB,gBAAgB,CAAC;IACzF,2BAAc,CAAC,cAAc,cAAc,CAAC,IAAI,EAAE,CAAC,GAAqB,cAAc,CAAC;IAEvF,oBAAO,CAAC,cAAc,kBAAkB,CAAC,IAAI,EAAE,CAAC,GAAc,kBAAkB,CAAC;IACjF,oBAAO,CAAC,cAAc,qBAAqB,CAAC,IAAI,EAAE,CAAC,GAAW,qBAAqB,CAAC;IACpF,oBAAO,CAAC,cAAc,uBAAuB,CAAC,IAAI,EAAE,CAAC,GAAS,uBAAuB,CAAC;IACtF,oBAAO,CAAC,cAAc,iBAAiB,CAAC,IAAI,EAAE,CAAC,GAAe,iBAAiB,CAAC;IAChF,oBAAO,CAAC,cAAc,qBAAqB,CAAC,IAAI,EAAE,CAAC,GAAW,qBAAqB,CAAC;IACpF,oBAAO,CAAC,cAAc,yBAAyB,CAAC,IAAI,EAAE,CAAC,GAAO,yBAAyB,CAAC;IACxF,oBAAO,CAAC,cAAc,gBAAgB,CAAC,IAAI,EAAE,CAAC,GAAgB,gBAAgB,CAAC;IAC/E,oBAAO,CAAC,cAAc,aAAa,CAAC,IAAI,EAAE,CAAC,GAAmB,aAAa,CAAC;IAC5E,oBAAO,CAAC,cAAc,qBAAqB,CAAC,IAAI,EAAE,CAAC,GAAW,qBAAqB,CAAC;IACpF,oBAAO,CAAC,cAAc,WAAW,CAAC,IAAI,EAAE,CAAC,GAAqB,WAAW,CAAC;IAC1E,oBAAO,CAAC,cAAc,mBAAmB,CAAC,IAAI,EAAE,CAAC,GAAa,mBAAmB,CAAC;IAClF,oBAAO,CAAC,cAAc,6BAA6B,CAAC,IAAI,EAAE,CAAC,GAAG,6BAA6B,CAAC;IAC5F,oBAAO,CAAC,cAAc,mBAAmB,CAAC,IAAI,EAAE,CAAC,GAAa,mBAAmB,CAAC;IAElF,gBAAgB,GAAG,IAAI,CAAC;AAC5B,CAAC;AAED,MAAa,SAAU,SAAQ,2BAAc;IACzC;QACI,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,8BAYC;AAED,MAAa,YAAa,SAAQ,2BAAc;IAC5C;QACI,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;IACN,CAAC;CACJ;AAXD,oCAWC;AAED,MAAa,YAAa,SAAQ,2BAAc;IAC5C;QACI,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;IACN,CAAC;CACJ;AAXD,oCAWC;AAED,MAAa,WAAY,SAAQ,2BAAc;IAC3C;QACI,KAAK,CACD,cAAc,EACd,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,qCAAsB;YAC1B,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,sFAAqD;SAClE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,kCAgBC;AAED,MAAa,MAAO,SAAQ,2BAAc;IACtC;QACI,KAAK,CACD,QAAQ,EACR,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,wBAYC;AAED,MAAa,aAAc,SAAQ,2BAAc;IAK7C;QACI,KAAK,CACD,gBAAgB,EAChB,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;;AAfL,sCAgBC;AAfU,qBAAO,GAAG,CAAC,CAAC;AACZ,oBAAM,GAAI,CAAC,CAAC;AACZ,qBAAO,GAAG,CAAC,CAAC;AAevB,MAAa,WAAY,SAAQ,2BAAc;IAC3C;QACI,KAAK,CACD,cAAc,EACd,sCAAsC,EACtC;YACI,MAAM,2BAAc;YACpB,KAAK,EAAG,+BAAoB;SAC/B,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,kCAYC;AAED,MAAa,YAAa,SAAQ,2BAAc;IAC5C;QACI,KAAK,CACD,eAAe,EACf,sCAAsC,EACtC;YACI,MAAM,2BAAc;YACpB,KAAK,EAAG,+BAAoB;SAC/B,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,oCAYC;AAED,MAAa,WAAY,SAAQ,2BAAc;IAY3C;QACI,KAAK,CACD,cAAc,EACd,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;;AAtBL,kCAuBC;AAtBG,6EAA6E;AAC7E,6CAA6C;AAC7C,6EAA6E;AAC7E,+EAA+E;AACxE,eAAG,GAAU,CAAC,CAAC;AACtB,iCAAiC;AAC1B,sBAAU,GAAG,CAAC,CAAC;AACf,gBAAI,GAAS,CAAC,CAAC;AACf,iBAAK,GAAQ,CAAC,CAAC,CAAC,2BAA2B;AAC3C,iBAAK,GAAQ,CAAC,CAAC,CAAC,wBAAwB;AACxC,eAAG,GAAU,CAAC,CAAC,CAAC,qCAAqC;AAchE,MAAa,UAAW,SAAQ,2BAAc;IAK1C;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;;AAfL,gCAgBC;AAfU,cAAG,GAAG,CAAC,CAAC;AACR,cAAG,GAAG,CAAC,CAAC;AACR,cAAG,GAAG,CAAC,CAAC;AAenB,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,gBAAgB,EAChB,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,sCAYC;AAED,MAAa,oBAAqB,SAAQ,2BAAc;IACpD;QACI,KAAK,CACD,wBAAwB,EACxB,sCAAsC,EACtC;YACI,MAAM,6BAAe,EAAE,aAAa;YACpC,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;IACN,CAAC;CACJ;AAXD,oDAWC;AAGD,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,YAAY,EACZ,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,sCAYC;AAED,MAAa,kBAAmB,SAAQ,2BAAc;IAClD;QACI,KAAK,CACD,kBAAkB,EAClB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,gDAYC;AAED,MAAa,eAAgB,SAAQ,2BAAc;IAC/C;QACI,KAAK,CACD,cAAc,EACd,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CAEJ;AAbD,0CAaC;AAED,MAAa,iBAAkB,SAAQ,2BAAc;IACjD;QACI,KAAK,CACD,gBAAgB,EAChB,sCAAsC,EACtC;YACI,MAAM,6BAAe,EAAE,aAAa;YACpC,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,8CAYC;AAED,MAAa,UAAW,SAAQ,2BAAc;IAC1C;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,2BAAc;YACpB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC;CACJ;AAZD,gCAYC;AAED,6BAA6B;AAC7B,MAAa,mBAAoB,SAAQ,2BAAc;IACnD;QACI,KAAK,CACD,uBAAuB,EACvB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,kDAYC;AAED,MAAa,UAAW,SAAQ,2BAAc;IAC1C;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC;CACJ;AAZD,gCAYC;AAGD,MAAa,WAAY,SAAQ,2BAAc;IAC3C;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,kCAYC;AAED,qEAAqE;AAErE,MAAa,KAAM,SAAQ,2BAAc;IACrC;QACI,KAAK,CACD,OAAO,EACP,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC;CACJ;AAhBD,sBAgBC;AAED,MAAa,OAAQ,SAAQ,2BAAc;IACvC;QACI,KAAK,CACD,MAAM,EACN,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC;CACJ;AAhBD,0BAgBC;AAED,MAAa,KAAM,SAAQ,2BAAc;IACrC;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,sBAgBC;AAED,MAAa,WAAY,SAAQ,2BAAc;IAC3C;QACI,KAAK,CACD,gBAAgB,EAChB,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,IAAI;YACd,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC;CACJ;AAhBD,kCAgBC;AAED,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,mBAAmB,EACnB,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ;QACD,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,sCAgBC;AAED,MAAa,sBAAuB,SAAQ,2BAAc;IACtD;QACI,KAAK,CACD,iBAAiB,EACjB,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,MAAM;YAChB,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,wDAgBC;AAED,MAAa,YAAa,SAAQ,2BAAc;IAC5C;QACI,KAAK,CACD,eAAe,EACf,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,qCAAsB;YAC1B,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,8BAAmB;SAChC,CACJ,CAAC;IACN,CAAC;CACJ;AAfD,oCAeC;AAED,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,iBAAiB,EACjB,sCAAsC,EACtC;YACI,MAAM,+BAAkB;YACxB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,sCAgBC;AAED,uDAAuD;AACvD,+EAA+E;AAE/E,MAAa,eAAgB,SAAQ,2BAAc;IAC/C;QACI,KAAK,CACD,mBAAmB,EACnB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,IAAI,+BAAiB,EAAE,mBAAmB;YAC1C,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAbD,0CAaC;AAED,MAAa,iBAAkB,SAAQ,2BAAc;IACjD;QACI,KAAK,CACD,qBAAqB,EACrB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,IAAI,+BAAiB,EAAE,mBAAmB;YAC1C,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;IACN,CAAC;CACJ;AAZD,8CAYC;AAED,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,qBAAqB,EACrB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,IAAI,+BAAiB,EAAE,mBAAmB;YAC1C,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAbD,sCAaC;AAED,MAAa,cAAe,SAAQ,2BAAc;IAC9C;QACI,KAAK,CACD,kBAAkB,EAClB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;IACN,CAAC;CACJ;AAXD,wCAWC;AAED,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,iBAAiB,EACjB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,IAAI,+BAAiB,EAAE,mBAAmB;YAC1C,KAAK,EAAG,sFAAqD;SAChE,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAbD,sCAaC;AAGD,wEAAwE;AAExE,MAAa,wBAAyB,SAAQ,2BAAc;IACxD;QACI,KAAK,CACD,qBAAqB,EACrB,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,MAAM;YAChB,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;IACN,CAAC;CACJ;AAfD,4DAeC;AAED,MAAa,UAAW,SAAQ,2BAAc;IAC1C;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,IAAI;YACd,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,GAAG;YACb,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,gCAgBC;AAED,mEAAmE;AAEnE,MAAa,OAAQ,SAAQ,2BAAc;IACvC;QACI,KAAK,CACD,UAAU,EACV,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,GAAG;YACb,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,0BAgBC;AAED,MAAa,uBAAwB,SAAQ,2BAAc;IAIvD;QACI,KAAK,CACD,2BAA2B,EAC3B,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;;AAdL,0DAeC;AAdU,yCAAiB,GAAK,CAAC,CAAC;AACxB,2CAAmB,GAAG,CAAC,CAAC;AAenC,MAAa,oBAAqB,SAAQ,2BAAc;IACpD;QACI,KAAK,CACD,wBAAwB,EACxB,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,oDAgBC;AAED,MAAa,wBAAyB,SAAQ,2BAAc;IACxD;QACI,KAAK,CACD,6BAA6B,EAC7B,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,4DAgBC;AAED,kEAAkE;AAElE,MAAa,aAAc,SAAQ,2BAAc;IAI7C;QACI,KAAK,CACD,gBAAgB,EAChB,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IACxC,CAAC;;AAdL,sCAeC;AAdU,8BAAgB,GAAK,CAAC,CAAC;AACvB,gCAAkB,GAAG,CAAC,CAAC;AAelC,MAAa,UAAW,SAAQ,2BAAc;IAC1C;QACI,KAAK,CACD,aAAa,EACb,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,gCAgBC;AAED,MAAa,cAAe,SAAQ,2BAAc;IAC9C;QACI,KAAK,CACD,kBAAkB,EAClB,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,wCAgBC;AAED,MAAa,qBAAsB,SAAQ,2BAAc;IAIrD;QACI,KAAK,CACD,yBAAyB,EACzB,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;;AAdL,sDAeC;AAdU,uCAAiB,GAAK,CAAC,CAAC;AACxB,yCAAmB,GAAG,CAAC,CAAC;AAenC,MAAa,kBAAmB,SAAQ,2BAAc;IAClD;QACI,KAAK,CACD,sBAAsB,EACtB,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,gDAgBC;AAED,MAAa,sBAAuB,SAAQ,2BAAc;IACtD;QACI,KAAK,CACD,2BAA2B,EAC3B,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,wDAgBC;AAED,MAAa,+BAAgC,SAAQ,2BAAc;IAI/D;QACI,KAAK,CACD,oCAAoC,EACpC,sCAAsC,EACtC;YACI,MAAM,6BAAe;YACrB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;;AAdL,0EAeC;AAdU,iDAAiB,GAAK,CAAC,CAAC;AACxB,mDAAmB,GAAG,CAAC,CAAC;AAenC,MAAa,4BAA6B,SAAQ,2BAAc;IAC5D;QACI,KAAK,CACD,iCAAiC,EACjC,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,oEAgBC;AAED,MAAa,gCAAiC,SAAQ,2BAAc;IAChE;QACI,KAAK,CACD,sCAAsC,EACtC,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,KAAK;YACf,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,4EAgBC;AAED,MAAa,gBAAiB,SAAQ,2BAAc;IAChD;QACI,KAAK,CACD,mBAAmB,EACnB,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,sFAAqD;SAClE,CACJ,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;IACrB,CAAC;CACJ;AAfD,4CAeC;AAED,MAAa,gBAAiB,SAAQ,2BAAc;IAChD;QACI,KAAK,CACD,mBAAmB,EACnB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,4CAYC;AAED,2DAA2D;AAE3D,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,iBAAiB,EACjB,sCAAsC,EACtC;YACI,MAAM,+BAAgB;YACtB,KAAK,EAAG,uDAAiC;SAC5C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAZD,sCAYC;AAED,4DAA4D;AAE5D,MAAa,aAAc,SAAQ,2BAAc;IAC7C;QACI,KAAK,CACD,gBAAgB,EAChB,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,MAAM;YAChB,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,sCAgBC;AAED,MAAa,WAAY,SAAQ,2BAAc;IAC3C;QACI,KAAK,CACD,cAAc,EACd,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,MAAM;YAChB,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,kCAgBC;AAED,MAAa,IAAK,SAAQ,2BAAc;IACpC;QACI,KAAK,CACD,MAAM,EACN,sCAAsC,EACtC;YACI,MAAM,yBAAe;YACrB,IAAI,EAAM,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,oBAgBC;AAED,MAAa,OAAQ,SAAQ,2BAAc;IACvC;QACI,KAAK,CACD,SAAS,EACT,sCAAsC,EACtC;YACI,MAAM,yBAAe;YACrB,IAAI,EAAM,IAAI;YACd,QAAQ,EAAE,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,OAAO,EAAG,KAAK;YACf,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,0BAgBC;AAED,0DAA0D;AAE1D,MAAa,QAAS,SAAQ,2BAAc;IACxC;QACI,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC;YACI,MAAM,6BAAiB;YACvB,IAAI,+BAAmB;YACvB,QAAQ,EAAE,EAAE;YACZ,QAAQ,EAAE,CAAC,EAAE;YACb,OAAO,EAAG,GAAG;YACb,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,4BAgBC;AAED,+DAA+D;AAE/D,MAAa,cAAe,SAAQ,2BAAc;IAC9C;QACI,KAAK,CACD,kBAAkB,EAClB,iBAAI,CAAC,QAAQ,CAAC,2CAA2C,CAAC;QAC1D,8DAA8D;QAC9D;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;IACN,CAAC;CACJ;AAhBD,wCAgBC;AAED,MAAa,eAAgB,SAAQ,2BAAc;IAC/C;QACI,KAAK,CACD,mBAAmB,EACnB,iBAAI,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAC3D;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,0CAgBC;AAED,MAAa,gBAAiB,SAAQ,2BAAc;IAChD;QACI,KAAK,CACD,oBAAoB,EACpB,iBAAI,CAAC,QAAQ,CAAC,6CAA6C,CAAC,EAC5D;YACI,MAAM,6BAAiB;YACvB,IAAI,EAAM,GAAG;YACb,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,KAAK;YACf,OAAO,EAAG,IAAI;YACd,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,4CAgBC;AAED,MAAa,cAAe,SAAQ,2BAAc;IAC9C;QACI,KAAK,CACD,UAAU,EACV,iBAAI,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAC1D;YACI,MAAM,6BAAiB;YACvB,IAAI,qCAAsB;YAC1B,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,GAAG;YACb,OAAO,EAAG,CAAC;YACX,KAAK,EAAK,uDAAiC;SAC9C,CACJ,CAAC;QACF,uCAAuC;IAC3C,CAAC;CACJ;AAhBD,wCAgBC;AAED,WAAW;AAEX,MAAa,kBAAmB,SAAQ,oBAAO;IAC3C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC;QAEpC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AAfD,gDAeC;AAED,MAAa,qBAAsB,SAAQ,oBAAO;IAC9C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QACF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;QAEtC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;QAC5C,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;QAC5C,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC;QAC9C,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC;QACrD,IAAI,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC;QAC9C,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,CAAC;QACnD,IAAI,CAAC,yBAAyB,CAAC,eAAe,CAAC,CAAC;QAChD,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,CAAC;QAClD,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;QACpD,4EAA4E;QAC5E,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,mBAAmB,CAAC,CAAC;QACpD,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;IAChD,CAAC;CACJ;AA5BD,sDA4BC;AAED,mFAAmF;AACnF,MAAa,uBAAwB,SAAQ,oBAAO;IAChD,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;QAEtC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,CAAC;QACnD,IAAI,CAAC,yBAAyB,CAAC,eAAe,CAAC,CAAC;QAChD,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,CAAC;QAClD,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC;QACrD,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;QACpD,4EAA4E;QAC5E,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,mBAAmB,CAAC,CAAC;QACpD,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;IAChD,CAAC;CACJ;AAvBD,0DAuBC;AAED,MAAa,iBAAkB,SAAQ,oBAAO;IAC1C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;QACnC,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;QAE5C,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;QAC5C,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AAjBD,8CAiBC;AAED,MAAa,qBAAsB,SAAQ,oBAAO;IAC9C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;QACnC,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;QAE5C,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC;QAC1C,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;QAC5C,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC;QAC7C,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AAtBD,sDAsBC;AAED,wEAAwE;AAExE,MAAa,yBAA0B,SAAQ,oBAAO;IAClD,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,wBAAwB,CAAC,CAAC;QAEjD,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AAlBD,8DAkBC;AAED,MAAa,gBAAiB,SAAQ,oBAAO;IACzC,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;QAEnC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AAlBD,4CAkBC;AAED,mEAAmE;AAEnE,MAAa,aAAc,SAAQ,oBAAO;IACtC,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;QAEhC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AAlBD,sCAkBC;AAED,MAAa,qBAAsB,SAAQ,oBAAO;IAC9C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV;QAED,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,CAAC;QAEhD,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC;QACrD,IAAI,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,CAAC;QACzD,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AApBD,sDAoBC;AAED,kEAAkE;AAElE,MAAa,WAAY,SAAQ,oBAAO;IACpC,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;QAEtC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,CAAC;QAC/C,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AApBD,kCAoBC;AAED,MAAa,mBAAoB,SAAQ,oBAAO;IAC5C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,CAAC;QAE9C,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,CAAC;QACnD,IAAI,CAAC,yBAAyB,CAAC,sBAAsB,CAAC,CAAC;QACvD,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AApBD,kDAoBC;AAED,MAAa,6BAA8B,SAAQ,oBAAO;IACtD,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,+BAA+B,CAAC,CAAC;QAExD,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,WAAW,CAAC,CAAC;QAC3D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,gBAAgB,CAAC,CAAC;QAChE,IAAI,CAAC,yBAAyB,CAAC,4BAA4B,CAAC,CAAC;QAC7D,IAAI,CAAC,yBAAyB,CAAC,gCAAgC,CAAC,CAAC;QACjE,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;IACxD,CAAC;CACJ;AApBD,sEAoBC;AAED,MAAa,mBAAoB,SAAQ,oBAAO;IAC5C,YAAY,WAAW,EAAE,OAAO;QAC5B,KAAK,CACD,WAAW,EACX,sCAAsC,EACtC,OAAO,CACV,CAAC;QAEF,2BAA2B;QAC3B,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;QACzC,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;QAEzC,2BAA2B;QAC3B,IAAI,CAAC,yBAAyB,CAAC,2BAAc,CAAC,IAAI,CAAC,CAAC;QACpD,IAAI,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC;IAClD,CAAC;CACJ;AAhBD,kDAgBC;;;;;;;;;;;;;;AC52CD,4GAAsD;AAEtD,MAAsB,uBAAwB,SAAQ,mCAAkB;IACpE,YAAY,OAAyB,EAAE,gBAAwB,EAAE;QAC7D,KAAK,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;IAClC,CAAC;IAES,MAAM,CAAC,YAAY,CAAC,KAAU;QACpC,IAAI,KAAK,KAAK,SAAS,EAAE,CAAC;YACtB,OAAO,SAAS,CAAC;QACrB,CAAC;QACD,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;YAC5B,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC;QACzB,CAAC;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,MAAM,CAAC,UAAU,CAAC,KAAU;QAClC,OAAO,CAAC,CAAC,KAAK,CAAC;IACnB,CAAC;IAES,MAAM,CAAC,oBAAoB,CAAC,UAAe,EAAE,IAAY;QAC/D,IAAI,UAAU,CAAC;QACf,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE,CAAC;YACjC,UAAU,GAAG,UAAU;QAC3B,CAAC;aAAM,CAAC;YACJ,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QACxC,CAAC;QACD,IAAI,UAAU,KAAK,SAAS,EAAE,CAAC;YAC3B,OAAO,SAAS,CAAC;QACrB,CAAC;QACD,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;CACJ;AA/BD,0DA+BC;;;;;;;;;;;;;;ACjCD,+GAAiF;AACjF,yEAA4C;AAE5C,MAAa,uDAAwD,SAAQ,yCAAuB;IAChG,SAAS,CAAC,KAAU;QAChB,IAAI,GAAG,GAAG,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC;QACrD,IAAI,MAAM,GAAG,SAAS,CAAC;QACvB,QAAQ,GAAG,EAAE,CAAC;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,aAAa,CAAC,OAAO,CAAC;gBAC9C,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,aAAa,CAAC,UAAU,CAAC;gBACjD,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,aAAa,CAAC,UAAU,CAAC;gBACjD,MAAM;YACV;gBACI,MAAM,GAAG,2BAAc,CAAC,aAAa,CAAC,OAAO,CAAC;gBAC9C,MAAM;QACd,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,4DAA4D,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,OAAO,KAAK,QAAQ,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC1J,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,UAAU,CAAC,KAAU;QACjB,IAAI,GAAG,GAAG,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC;QACrD,IAAI,MAAM,GAAG,SAAS,CAAC;QACvB,QAAQ,GAAG,EAAE,CAAC;YACV,KAAK,2BAAc,CAAC,aAAa,CAAC,OAAO;gBACrC,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV,KAAK,2BAAc,CAAC,aAAa,CAAC,UAAU;gBACxC,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV,KAAK,2BAAc,CAAC,aAAa,CAAC,UAAU;gBACxC,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV;gBACI,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;QACd,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,6DAA6D,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,OAAO,KAAK,QAAQ,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC3J,OAAO,MAAM,CAAC;IAClB,CAAC;CACJ;AA1CD,0HA0CC;AAED,MAAa,wDAAyD,SAAQ,yCAAuB;IACjG,SAAS,CAAC,KAAU;QAChB,IAAI,GAAG,GAAG,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC;QAErD,IAAI,MAAM,GAAG,SAAS,CAAC;QACvB,QAAQ,GAAG,EAAE,CAAC;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC;gBACvD,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC;gBACvD,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC;gBACvD,MAAM;YACV,KAAK,CAAC;gBACF,MAAM,GAAG,2BAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC;gBACvD,MAAM;YACV;gBACI,MAAM,GAAG,2BAAc,CAAC,yBAAyB,CAAC,GAAG,CAAC;gBACtD,MAAM;QACd,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,kEAAkE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,OAAO,KAAK,QAAQ,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAChK,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,UAAU,CAAC,KAAK;QACZ,IAAI,GAAG,GAAG,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC;QAErD,IAAI,MAAM,GAAG,SAAS,CAAC;QACvB,QAAQ,GAAG,EAAE,CAAC;YACV,KAAK,2BAAc,CAAC,yBAAyB,CAAC,GAAG;gBAC7C,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV,KAAK,2BAAc,CAAC,yBAAyB,CAAC,IAAI;gBAC9C,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV,KAAK,2BAAc,CAAC,yBAAyB,CAAC,IAAI;gBAC9C,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV,KAAK,2BAAc,CAAC,yBAAyB,CAAC,IAAI;gBAC9C,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;YACV;gBACI,MAAM,GAAG,CAAC,CAAC;gBACX,MAAM;QACd,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,mEAAmE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,OAAO,KAAK,QAAQ,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACjK,OAAO,MAAM,CAAC;IAClB,CAAC;CACJ;AAlDD,4HAkDC;;;;;;;;;;;;;;ACjGD,+GAAiF;AAEjF,MAAa,2BAA4B,SAAQ,yCAAuB;IACpE,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,QAAQ,GAAG,yCAAuB,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAChE,OAAO,IAAI,2BAA2B,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IAC9D,CAAC;IAED,YAAY,OAAyB,EAAY,QAAgB;QAC7D,KAAK,CAAC,OAAO,CAAC,CAAC;QAD8B,aAAQ,GAAR,QAAQ,CAAQ;IAEjE,CAAC;IAED,SAAS,CAAC,KAAU;QAChB,IAAI,GAAG,GAAW,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC;QAC7D,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,yCAAyC,KAAK,OAAO,QAAQ,EAAE,CAAC,CAAC;QACxF,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED,UAAU,CAAC,KAAU;QACjB,IAAI,GAAG,GAAW,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC;QAC7D,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,0CAA0C,KAAK,OAAO,QAAQ,EAAE,CAAC,CAAC;QACzF,OAAO,QAAQ,CAAC;IACpB,CAAC;CACJ;AAvBD,kEAuBC;;;;;;;;;;;;;;ACzBD,+GAAiF;AAEjF,MAAa,0BAA2B,SAAQ,yCAAuB;IAC5D,SAAS,CAAC,KAAU;QACvB,OAAO,CAAC,yCAAuB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACtD,CAAC;IAEM,UAAU,CAAC,KAAU;QACxB,OAAO,CAAC,yCAAuB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACtD,CAAC;CACJ;AARD,gEAQC;;;;;;;;;;;;;;ACCD,sDAEC;AAbD,+GAAiF;AAWjF,SAAgB,qBAAqB,CAAC,MAAW;IAC7C,OAAO,UAAU,IAAI,MAAM,CAAC;AAChC,CAAC;AAED,MAAa,uBAAwB,SAAQ,yCAAuB;IAOhE,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,EAAE,CAAC;YACrC,OAAO,SAAS,CAAC;QACrB,CAAC;QAED,OAAO,IAAI,uBAAuB,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IAC5D,CAAC;IAED,YAAY,OAAyB,EAAY,UAA8C;QAC3F,KAAK,CAAC,OAAO,EAAE,yBAAyB,CAAC,CAAC;QADG,eAAU,GAAV,UAAU,CAAoC;QAdrF,0BAAqB,GAAG,IAAI,GAAG,EAAe,CAAC;QAE/C,2BAAsB,GAAG,IAAI,GAAG,EAAe,CAAC;QAElD,iBAAY,GAAG,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAYjD,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC7B,CAAC;IAED,iBAAiB;QACb,KAAI,IAAI,MAAM,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;YACzC,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAC7D,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAE/D,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;QAC3D,CAAC;IACL,CAAC;IAED,SAAS,CAAC,KAAU;QAChB,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC1D,OAAO,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACtD,CAAC;IAED,UAAU,CAAC,KAAU;QACjB,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QAC1D,OAAO,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACvD,CAAC;CACJ;AAvCD,0DAuCC;;;;;;;;;;;;;;ACrDD,+GAA4D;AAE5D,MAAa,+BAAgC,SAAQ,yCAAuB;IACxE,SAAS,CAAC,KAAU;QAChB,OAAO,KAAK;IAChB,CAAC;IAED,UAAU,CAAC,KAAU;QACjB,OAAO,KAAK;IAChB,CAAC;CACJ;AARD,0EAQC;;;;;;;;;;;;;;ACXD,+GAAiF;AAEjF,MAAa,yBAA0B,SAAQ,yCAAuB;IAC3D,SAAS,CAAC,KAAU;QACvB,IAAI,GAAG,GAAW,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC9D,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;IAEM,UAAU,CAAC,KAAU;QACxB,IAAI,GAAG,GAAW,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC9D,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3B,CAAC;CACJ;AAVD,8DAUC;;;;;;;;;;;;;;ACZD,+GAAiF;AASjF,MAAa,yBAA0B,SAAQ,yCAAuB;IAClE,MAAM,CAAC,gBAAgB,CAAC,UAAe;QACnC,MAAM,WAAW,GAAuC,UAAU,CAAC;QACnE,OAAO,WAAW,CAAC,aAAa,CAAC,KAAK,SAAS;YAC3C,WAAW,CAAC,aAAa,CAAC,KAAK,SAAS;YACxC,WAAW,CAAC,cAAc,CAAC,KAAK,SAAS;YACzC,WAAW,CAAC,cAAc,CAAC,KAAK,SAAS,CAAC;IAClD,CAAC;IAED,YAAY,OAAyB,EAAY,UAA8C,EAAY,OAAe;QACtH,KAAK,CAAC,OAAO,CAAC,CAAC;QAD8B,eAAU,GAAV,UAAU,CAAoC;QAAY,YAAO,GAAP,OAAO,CAAQ;QAEtH,IAAI,CAAC,yBAAyB,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE,CAAC;YAC1D,IAAI,CAAC,UAAU,GAAG;gBACd,aAAa,EAAE,CAAC;gBAChB,aAAa,EAAE,CAAC;gBAChB,cAAc,EAAE,CAAC;gBACjB,cAAc,EAAE,CAAC;aACpB,CAAC;QACN,CAAC;IACL,CAAC;IAEM,SAAS,CAAC,KAAU;QACvB,IAAI,GAAG,GAAW,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAChD,IAAI,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAChD,IAAI,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,CAAC,GAAG,CAAC,UAAU,GAAG,UAAU,CAAC,GAAG,UAAU,CAAC;QAC5G,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,OAAO,kCAAkC,KAAK,OAAO,QAAQ,EAAE,CAAC,CAAC;QAChG,OAAO,QAAQ,CAAC;IACpB,CAAC;IAEM,UAAU,CAAC,KAAU;QACxB,IAAI,GAAG,GAAW,yCAAuB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC9D,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAChD,IAAI,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAChD,IAAI,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC,UAAU,GAAG,UAAU,CAAC,CAAC,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,GAAG,WAAW,CAAC;QAC5G,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,OAAO,mCAAmC,KAAK,OAAO,QAAQ,EAAE,CAAC,CAAC;QACjG,OAAO,QAAQ,CAAC;IACpB,CAAC;CACJ;AA1CD,8DA0CC;AAED,MAAa,iCAAkC,SAAQ,yBAAyB;IACrE,SAAS,CAAC,KAAU;QACvB,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAC9C,CAAC;IAEM,UAAU,CAAC,KAAU;QACxB,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IAC/C,CAAC;CACJ;AARD,8EAQC;;;;;;;;;;;;;;AC7DD,+GAAiF;AAQjF,MAAa,0BAA2B,SAAQ,yCAAuB;IACnE,MAAM,CAAC,iBAAiB,CAAC,UAAe;QACpC,MAAM,WAAW,GAAwC,UAAU,CAAC;QACpE,OAAO,WAAW,CAAC,WAAW,CAAC,KAAK,SAAS;YACzC,WAAW,CAAC,YAAY,CAAC,KAAK,SAAS,CAAC;IAChD,CAAC;IAED,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,MAA2C,CAAC;QAChD,IAAI,0BAA0B,CAAC,iBAAiB,CAAC,UAAU,CAAC,EAAE,CAAC;YAC3D,MAAM,GAAG,UAAU,CAAC;QACxB,CAAC;aAAM,CAAC;YACJ,MAAM,GAAG;gBACL,SAAS,EAAE,cAAc;gBACzB,UAAU,EAAE,cAAc;aAC7B;QACL,CAAC;QACD,OAAO,IAAI,0BAA0B,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IAC3D,CAAC;IAKD,YAAY,OAAyB,EAAY,UAA+C;QAC5F,KAAK,CAAC,OAAO,CAAC,CAAC;QAD8B,eAAU,GAAV,UAAU,CAAqC;QAE5F,IAAI,CAAC,YAAY,GAAG,IAAI,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,GAAG,IAAI,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IAC1E,CAAC;IAED,SAAS,CAAC,KAAU;QAChB,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,wCAAwC,KAAK,OAAO,QAAQ,EAAE,CAAC,CAAC;QACvF,OAAO,QAAQ,CAAC;IACpB,CAAC;IACD,UAAU,CAAC,KAAU;QACjB,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,yCAAyC,KAAK,OAAO,QAAQ,EAAE,CAAC,CAAC;QACxF,OAAO,QAAQ,CAAC;IACpB,CAAC;CACJ;AAvCD,gEAuCC;;;;;;;;;;;;;;AC7CD,qGAAqD;AAErD,MAAsB,kBAAkB;IAKpC,YAAsB,OAAyB,EAAU,gBAAwB,EAAE;QAA7D,YAAO,GAAP,OAAO,CAAkB;QAAU,kBAAa,GAAb,aAAa,CAAa;QAJ5E,yBAAoB,GAA2B,EAAE,CAAC;QAC/C,eAAU,GAAG,IAAI,GAAG,EAA0B,CAAC;QAIrD,IAAI,CAAC,GAAG,GAAG,IAAI,0BAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACjE,CAAC;IAES,sBAAsB,CAAC,SAAiB;QAC9C,IAAI,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC3B,gBAAgB,EAAE,OAAO;YACzB,sBAAsB,EAAE,SAAS;YACjC,iBAAiB,EAAE,iBAAiB;SACvC,CAAC,CAAC;IACP,CAAC;IAES,qBAAqB,CAAC,SAAiB,EAAE,OAAuB;QACtE,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,kBAAkB,CAAC,SAAiB;QAC1C,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;YACjC,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1C,CAAC;aAAM,CAAC;YACJ,OAAO,SAAS,CAAC;QACrB,CAAC;IACL,CAAC;IAEO,WAAW,CAAC,SAAiB,EAAE,OAAuB;QAC1D,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;YACjC,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAC5C,UAAU,GAAG,OAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,GAAG,OAAK,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,EAAC;QAC9C,CAAC;aAAM,CAAC;YACJ,UAAU,GAAG,IAAI,CAAC;QACtB,CAAC;QAED,IAAI,UAAU;YACV,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC5C,OAAO,UAAU,CAAC;IACtB,CAAC;IAED,iBAAiB,CAAC,SAAiB,EAAE,OAAuB,EAAE,QAA4B;QACtF,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,mCAAmC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC1F,IAAI,IAAI,CAAC,qBAAqB,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE,CAAC;YACjD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;YAChE,OAAO;QACX,CAAC;QAED,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QACvD,IAAI,CAAC,WAAW,EAAE,CAAC;YACf,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,yDAAyD,CAAC,CAAC;YAC1E,OAAO;QACX,CAAC;QAED,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IAC3C,CAAC;IAES,YAAY,CAAC,SAAiB,EAAE,QAA4B;IAEtE,CAAC;CACJ;AA/DD,gDA+DC;;;;;;;;;;;;;;AC3DY,oBAAY,GAAuD,EAAE,CAAC;AACtE,yBAAiB,GAA4D,EAAE,CAAC;AAEhF,uBAAe,GAAG;IAC3B,mBAAmB,EAAE,UAAU,OAAyB,EAAE,aAAqB,EAAE,eAAqB;QAClG,IAAI,CAAC,CAAC,aAAa,IAAI,oBAAY,CAAC;YAChC,OAAO,oBAAY,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;QAC3D,OAAO,oBAAY,CAAC,aAAa,CAAC,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;IACjE,CAAC;IACD,wBAAwB,EAAE,UAAU,OAAyB,EAAE,kBAA0B,EAAE,oBAA0B;QACjH,IAAI,CAAC,CAAC,kBAAkB,IAAI,yBAAiB,CAAC;YAC1C,OAAO,yBAAiB,CAAC,aAAa,CAAC,CAAC,OAAO,EAAE,oBAAoB,CAAC,CAAC;QAC3E,OAAO,yBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,EAAE,oBAAoB,CAAC,CAAC;IAChF,CAAC;CACJ,CAAC;;;;;;;;;;;;;ACtBF,qHAAsE;AACtE,sGAA0I;AAC1I,sGAA8D;AAC9D,6IAA4G;AAC5G,oIAA2E;AAC3E,sJAAmK;AACnK,kHAAkG;AAClG,wHAAmE;AACnE,qHAAiE;AACjE,wHAAyE;AACzE,4GAA2D;AAC3D,uIAA2I;AAC3I,kHAA+D;AAC/D,qHAAiE;AAEjE,gCAAY,CAAC,gBAAgB,CAAC,GAAG,2CAA4B,CAAC,MAAM,CAAC;AACrE,gCAAY,CAAC,qBAAqB,CAAC,GAAG,sDAAiC,CAAC,MAAM,CAAC;AAC/E,gCAAY,CAAC,wBAAwB,CAAC,GAAG,mDAAoC,CAAC,MAAM,CAAC;AACrF,gCAAY,CAAC,wBAAwB,CAAC,GAAG,mDAAoC,CAAC,MAAM,CAAC;AACrF,gCAAY,CAAC,OAAO,CAAC,GAAG,2CAA4B,CAAC,MAAM,CAAC;AAC5D,gCAAY,CAAC,kDAAkD,CAAC,GAAG,yFAA6D,CAAC,MAAM,CAAC;AACxI,gCAAY,CAAC,8BAA8B,CAAC,GAAG,oEAA0C,CAAC,MAAM,CAAC;AACjG,gCAAY,CAAC,sCAAsC,CAAC,GAAG,4EAAkD,CAAC,MAAM,CAAC;AAEjH,qCAAiB,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,wDAA+B,CAAC,OAAO,CAAC,CAAC;AACpG,qCAAiB,CAAC,0CAA0C,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,sFAAuD,CAAC,OAAO,CAAC,CAAC;AACzJ,qCAAiB,CAAC,mDAAmD,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,uFAAwD,CAAC,OAAO,CAAC,CAAC;AACnK,qCAAiB,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,4CAAyB,CAAC,OAAO,EAAE;IACvF,aAAa,EAAE,CAAC;IAChB,aAAa,EAAE,GAAG;IAClB,cAAc,EAAE,CAAC;IACjB,cAAc,EAAE,GAAG;CACtB,EAAE,UAAU,CAAC,CAAC;AACf,qCAAiB,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,oDAAiC,CAAC,OAAO,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;AACtH,qCAAiB,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,4CAAyB,CAAC,OAAO,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;AAClH,qCAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,4CAAyB,CAAC,OAAO,EAAE;IAClF,aAAa,EAAE,CAAC;IAChB,aAAa,EAAE,GAAG;IAClB,cAAc,EAAE,CAAC;IACjB,cAAc,EAAE,KAAK;CACxB,EAAE,KAAK,CAAC,CAAC;AACV,qCAAiB,CAAC,SAAS,CAAC,GAAG,gDAA2B,CAAC,MAAM,CAAC;AAClE,qCAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,8CAA0B,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AAEjG,qCAAiB,CAAC,KAAK,CAAC,GAAG,wCAAuB,CAAC,MAAM,CAAC;AAC1D,qCAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE,CAAC,IAAI,4CAAyB,CAAC,OAAO,CAAC,CAAC;AACzF,qCAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE,CAAC,IAAI,8CAA0B,CAAC,OAAO,CAAC,CAAC;;;;;;;;;;;;;;AC9C3F,4GAAsD;AAKtD,MAAsB,0BAA2B,SAAQ,mCAAkB;IAA3E;;QACc,oBAAe,GAAQ,SAAS,CAAC;QACjC,oBAAe,GAAQ,IAAI,CAAC;IA+B1C,CAAC;IA7BU,YAAY,CAAC,QAAiD;QACjE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,iDAAiD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QACzG,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IACzC,CAAC;IAEM,UAAU,CAAC,YAAiB,EAAE,QAAoB;QACrD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,8BAA8B,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAC7E,IAAI,CAAC,mBAAmB,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;IACrD,CAAC;IAES,YAAY,CAAC,SAAiB,EAAE,QAA4B;QAClE,IAAI,CAAC;YACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;YAChE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAChC,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACT,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QAC7B,CAAC;QAED,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI;YAC5B,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IACvC,CAAC;IAES,wBAAwB,CAAC,SAAiB;QAChD,OAAO;IACX,CAAC;IAES,mBAAmB,CAAC,YAAiB,EAAE,QAAoB;QACjE,gCAAgC;IACpC,CAAC;CACJ;AAjCD,gEAiCC;AAED,MAAsB,gCAAgC;IAIlD,YAAsB,OAAyB,EAAY,SAAiB,EAAY,eAAuB,CAAC;QAA1F,YAAO,GAAP,OAAO,CAAkB;QAAY,cAAS,GAAT,SAAS,CAAQ;QAAY,iBAAY,GAAZ,YAAY,CAAY;QAHtG,kBAAa,GAAmB,IAAI,CAAC;QACxC,yBAAoB,GAA2B,EAAE,CAAC;QAGrD,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;IAC3C,CAAC;IAED,sBAAsB,CAAC,SAAiB;QACpC,IAAI,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC3B,gBAAgB,EAAE,OAAO;YACzB,sBAAsB,EAAE,SAAS;YACjC,iBAAiB,EAAE,iBAAiB;SACvC,CAAC,CAAC;IACP,CAAC;IAED,cAAc,CAAC,OAAuB;QAClC,OAAO,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;IACxB,CAAC;IAED,gBAAgB,CAAC,OAAuB;QACpC,OAAO,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;IACxB,CAAC;IAED,UAAU,CAAC,YAAY,EAAE,QAAQ;QAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,8BAA8B,IAAI,CAAC,SAAS,MAAM,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QACzG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC5D,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACzC,IAAI,YAAY,GAAG,KAAK,KAAK,YAAY,CAAC;YAC1C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC;YAC/H,IAAI,YAAY,EAAE,CAAC;gBACf,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,EAAE;oBACxE,IAAI,KAAK;wBACL,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,IAAI,CAAC,SAAS,SAAS,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,KAAK,EAAE,CAAC,CAAC;oBACvH,QAAQ,EAAE,CAAC;gBACf,CAAC,CAAC,CAAC;YACP,CAAC;iBAAM,CAAC;gBACJ,QAAQ,EAAE,CAAC;YACf,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,YAAY,CAAC,QAAQ;QACjB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,gCAAgC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC5D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,6BAA6B,IAAI,CAAC,SAAS,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACnG,IAAI,KAAK;gBACL,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,mBAAmB,KAAK,EAAE,CAAC,CAAC;YAEvD,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YACzC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iBAAiB,CAAC,SAAiB,EAAE,OAAuB,EAAE,QAA4B;QACtF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,mCAAmC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACvG,IAAI,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;QAC9C,IAAI,QAAQ,IAAI,IAAI;YAChB,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;;YAEzC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;IAChF,CAAC;IAED,eAAe,CAAC,QAA4B,EAAE,YAAiB;QAC3D,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC;YACrB,IAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;;YAEtD,QAAQ,CAAC,YAAY,CAAC,CAAC;IAC/B,CAAC;IAED,wBAAwB,CAAC,QAA4B,EAAE,YAAiB;QACpE,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC;IACtG,CAAC;IAED,yBAAyB;QACrB,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,mBAAmB,CAAC,QAA4B,EAAE,YAAiB;QAC/D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,kCAAkC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAC3G,QAAQ,CAAC,YAAY,CAAC,CAAC;IAC3B,CAAC;CACJ;AArFD,4EAqFC;;;;;;;;;;;;;;AC3HD,MAAa,4BAA4B;IACrC,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,OAAO,IAAI,4BAA4B,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IACjE,CAAC;IAED,YAAoB,OAAyB,EAAU,UAAe;QAAlD,YAAO,GAAP,OAAO,CAAkB;QAAU,eAAU,GAAV,UAAU,CAAK;IAEtE,CAAC;IAED,UAAU,CAAC,OAAY,EAAE,QAAoB;QACzC,QAAQ,EAAE,CAAC;IACf,CAAC;IAED,YAAY,CAAC,QAAiD;QAC1D,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IACpC,CAAC;CACJ;AAhBD,oEAgBC;;;;;;;;;;;;;;AClBD,mGAAqG;AAErG,MAAa,6DAA8D,SAAQ,8CAAgC;IAK/G,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,CAAgB,CAAC;QAErB,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE,CAAC;YACjC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACrB,CAAC;aAAM,IAAI,UAAU,YAAY,KAAK,EAAE,CAAC;YACrC,CAAC,GAAG,UAAU,CAAC;QACnB,CAAC;aAAM,CAAC;YACJ,CAAC,GAAG,EAAE,CAAC;QACX,CAAC;QAED,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAChB,OAAO,SAAS,CAAC;QACrB,CAAC;QAED,IAAI,SAAS,GAAW,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAI,eAAuB,CAAC;QAC5B,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAChB,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3B,CAAC;aAAM,CAAC;YACJ,IAAI,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrC,SAAS,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;YAC5C,eAAe,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1C,CAAC;QAED,OAAO,IAAI,6DAA6D,CAAC,OAAO,EAAE,SAAS,EAAE,eAAe,CAAC,CAAC;IAClH,CAAC;IAED,YAAsB,OAAyB,EAAY,SAAiB,EAAY,WAAmB;QACvG,KAAK,CAAC,OAAO,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;QADX,YAAO,GAAP,OAAO,CAAkB;QAAY,cAAS,GAAT,SAAS,CAAQ;QAAY,gBAAW,GAAX,WAAW,CAAQ;QAhCjG,qBAAgB,GAAY,KAAK,CAAC;QAClC,0BAAqB,GAAQ,SAAS,CAAC;QACvC,kBAAa,GAAmB,IAAI,CAAC;QAgC3C,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,CAAC;QACzC,OAAO,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACpD,IAAI,OAAO,EAAE,CAAC;gBACV,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC,CAAC;YAClD,CAAC;iBAAM,CAAC;gBACJ,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;YACtC,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iBAAiB,CAAC,SAAiB,EAAE,OAAuB,EAAE,QAA4B;QACtF,IAAI,CAAC,OAAO,EAAE,CAAC;YACX,OAAO;QACX,CAAC;QAED,IAAI,SAAS,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,sCAAsC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAC1G,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC,CAAC;YAC9C,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;QAC5C,CAAC;aAAM,IAAI,SAAS,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACrC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,qCAAqC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACzG,IAAI,OAAO,CAAC,GAAG,EAAE,CAAC;gBACd,IAAI,CAAC,qBAAqB,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;gBAC1C,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;YAC5C,CAAC;QACL,CAAC;IACL,CAAC;IAED,wBAAwB,CAAC,QAA4B;QACjD,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC,CAAC;IACxF,CAAC;IAED,yBAAyB;QACrB,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,mBAAmB,CAAC,QAA4B;QAC5C,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,mDAAmD;YAC7E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,sCAAsC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;YAC7H,QAAQ,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACzC,CAAC;aAAM,CAAC;YACJ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,6DAA6D,CAAC,CAAC;QAC5G,CAAC;IACL,CAAC;CACJ;AAjFD,sIAiFC;;;;;;;;;;;;;;AC1ED,oEAKC;AAdD,mGAA+F;AAC/F,kGAAuD;AAQvD,SAAgB,4BAA4B,CAAC,KAAU;IACnD,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;QACrE,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,OAAO,gCAAc,EAAoD,KAAK,EAAE,YAAY,CAAC;AACjG,CAAC;AAED,MAAa,4CAA6C,SAAQ,wCAA0B;IAGxF,MAAM,CAAC,eAAe,CAAC,UAAe;QAClC,IAAI,CAAC,4BAA4B,CAAC,UAAU,CAAC,EAAE,CAAC;YAC5C,OAAO,SAAS;QACpB,CAAC;QACD,OAAO,UAAU,CAAC;IACtB,CAAC;IAED,YAAY,OAAyB,EAAE,YAAoB,EAAY,UAA6D;QAChI,KAAK,CAAC,OAAO,EAAE,GAAG,YAAY,IAAI,UAAU,CAAC,UAAU,GAAG,CAAC,CAAC;QADO,eAAU,GAAV,UAAU,CAAmD;QAT1H,gBAAW,GAAmB,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;QAWlH,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACvD,CAAC;IAES,YAAY,CAAC,SAAiB,EAAE,QAA4B;QAClE,qCAAqC;QACrC,IAAI,SAAS,KAAK,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;YAC3C,MAAM,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;YACtD,IAAI,UAAU,CAAC,UAAU,CAAC,GAAU,CAAC,GAAG,CAAC,EAAE,CAAC;gBACxC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAClC,CAAC;QACL,CAAC;QACD,KAAK,CAAC,YAAY,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IAC5C,CAAC;CACJ;AAzBD,oGAyBC;AAED,MAAa,0CAA2C,SAAQ,4CAA4C;IACxG,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,MAAM,GAAG,0CAA0C,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QACpF,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACvB,OAAO,SAAS;QACpB,CAAC;QACD,OAAO,IAAI,0CAA0C,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IAC3E,CAAC;IAED,YAAsB,OAAyB,EAAY,UAA6D;QACpH,KAAK,CAAC,OAAO,EAAE,qBAAqB,EAAE,UAAU,CAAC,CAAC;QADhC,YAAO,GAAP,OAAO,CAAkB;QAAY,eAAU,GAAV,UAAU,CAAmD;IAExH,CAAC;IAES,wBAAwB,CAAC,SAAiB;QAChD,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAC9D,OAAO,OAAO,CAAC,UAAU,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAU,CAAC,GAAG,CAAC,CAAC,CAAC;IACxD,CAAC;IAES,mBAAmB,CAAC,YAAiB,EAAE,QAAoB;QACjE,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,YAAY,EAAE,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC;IAC5E,CAAC;IAES,oBAAoB,CAAC,YAAiB,EAAE,QAAoB;;QAElE,MAAM,aAAa,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;QAC5C,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;QAE7C,MAAM,UAAU,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,CAAC,CAAC,UAAI,CAAC,WAAW,0CAAE,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,oBAAoB,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,oBAAoB,IAAI,GAAG,CAAC;QAC1K,MAAM,WAAW,GAAG,CAAC,CAAC;QACtB,MAAM,QAAQ,GAAG,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC;QAE1D,IAAI,aAAa,IAAI,IAAI,CAAC,UAAU,CAAC,sBAAsB,EAAE,CAAC;YAC1D,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,0CAA0C,IAAI,CAAC,SAAS,CAAC,UAAI,CAAC,WAAW,0CAAE,GAAG,CAAC,EAAE,CAAC,CAAC;QACtG,CAAC;QAED,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,8BAA8B,SAAS,MAAM,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACxF,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACvD,IAAI,KAAK,GAAG,UAAU,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAU,CAAC,CAAC;YAC5C,IAAI,aAAa,IAAI,KAAK,GAAG,CAAC,EAAE,CAAC;gBAC7B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,kEAAkE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBAC1G,QAAQ,EAAE,CAAC;gBACX,OAAO;YACX,CAAC;YAED,IAAI,YAAY,GAAG,KAAK,KAAK,QAAQ,CAAC;YACtC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC;YACnH,IAAI,YAAY,EAAE,CAAC;gBACf,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,QAAe,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,EAAE;oBACtE,IAAI,KAAK,EAAE,CAAC;wBACR,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,SAAS,SAAS,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,KAAK,EAAE,CAAC,CAAC;wBAClG,QAAQ,EAAE,CAAC;oBACf,CAAC;oBACD,QAAQ,EAAE,CAAC;gBACf,CAAC,CAAC,CAAC;YACP,CAAC;iBAAM,CAAC;gBACJ,QAAQ,EAAE,CAAC;YACf,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AA3DD,gGA2DC;AAED,MAAa,kDAAmD,SAAQ,4CAA4C;IAChH,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,MAAM,GAAG,0CAA0C,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QACpF,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACvB,OAAO,SAAS;QACpB,CAAC;QACD,OAAO,IAAI,kDAAkD,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACnF,CAAC;IAED,YAAsB,OAAyB,EAAY,UAA6D;QACpH,KAAK,CAAC,OAAO,EAAE,6BAA6B,EAAE,UAAU,CAAC,CAAC;QADxC,YAAO,GAAP,OAAO,CAAkB;QAAY,eAAU,GAAV,UAAU,CAAmD;IAExH,CAAC;IAES,wBAAwB,CAAC,SAAiB;;QAChD,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAC9D,OAAO,QAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,KAAI,CAAC,CAAC,CAAC,CAAC,UAAI,CAAC,WAAW,0CAAE,GAAG,CAAC,CAAC,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;IACpE,CAAC;IAES,mBAAmB,CAAC,YAAiB,EAAE,QAAoB;QACjE,MAAM,QAAQ,GAAG,YAAY,CAAC;QAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;QAG7C,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,8BAA8B,SAAS,MAAM,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACxF,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACvD,IAAI,KAAK,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;YACzB,IAAI,YAAY,GAAG,KAAK,KAAK,QAAQ,CAAC;YACtC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC;YACnH,IAAI,YAAY,EAAE,CAAC;gBACf,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,EAAE;oBAC/D,IAAI,KAAK,EAAE,CAAC;wBACR,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,SAAS,SAAS,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,KAAK,EAAE,CAAC,CAAC;wBAClG,QAAQ,EAAE,CAAC;oBACf,CAAC;oBACD,QAAQ,EAAE,CAAC;gBACf,CAAC,CAAC,CAAC;YACP,CAAC;iBAAM,CAAC;gBACJ,QAAQ,EAAE,CAAC;YACf,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAzCD,gHAyCC;;;;;;;;;;;;;;ACzID,sDAMC;AAdD,mGAA2E;AAQ3E,SAAgB,qBAAqB,CAAC,KAAU;IAC5C,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;QACrE,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,IAAI,QAAQ,GAAqD,WAAW,CAAC;IAC7E,OAAO,CAAC,QAAQ,IAAI,KAAK,CAAC,CAAC;AAC/B,CAAC;AAED,MAAa,iCAAkC,SAAQ,wCAA0B;IAE7E,MAAM,CAAC,eAAe,CAAC,UAAe;QAClC,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;YAC5B,OAAO,UAAU,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACpD,CAAC;aAAM,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE,CAAC;YACxC,OAAO,CAAC,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC,CAAC;QACvC,CAAC;aAAM,CAAC;YACJ,OAAO,SAAS;QACpB,CAAC;IACL,CAAC;IAED,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,UAAU,GAAG,iCAAiC,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QAC/E,IAAI,UAAU,KAAK,SAAS,EAAE,CAAC;YAC3B,OAAO,SAAS;QACpB,CAAC;QACD,OAAO,IAAI,iCAAiC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IACtE,CAAC;IAED,YAAsB,OAAyB,EAAY,eAA6D;QACpH,KAAK,CAAC,OAAO,EAAE,kCAAkC,CAAC,CAAC;QADjC,YAAO,GAAP,OAAO,CAAkB;QAAY,oBAAe,GAAf,eAAe,CAA8C;QAEpH,KAAK,IAAI,KAAK,IAAI,eAAe,EAAE,CAAC;YAChC,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACjD,CAAC;IACL,CAAC;IAES,wBAAwB,CAAC,SAAiB;QAChD,IAAI,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,WAAC,iBAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,0CAAE,GAAG,IAAC,CAAC;QAC9F,OAAO,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;IAC1D,CAAC;IAEO,yBAAyB,CAAC,KAAiD,EAAE,QAAa;QAC9F,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YACzB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;QAC7B,CAAC;QAED,OAAO,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACzC,IAAI,SAAS,GAAG,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,SAAS,CAAC;YACpD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,8BAA8B,SAAS,MAAM,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YACxF,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,EAAE;gBAC/D,IAAI,KAAK,EAAE,CAAC;oBACR,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,SAAS,SAAS,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,KAAK,EAAE,CAAC,CAAC;oBAClG,MAAM,CAAC,KAAK,CAAC,CAAC;gBAClB,CAAC;gBACD,OAAO,EAAE,CAAC;YACd,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAES,mBAAmB,CAAC,YAAiB,EAAE,QAAoB;QACjE,IAAI,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;QAC/E,IAAI,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;YACzD,IAAI,oBAAoB,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;YAC/C,OAAO,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;QACvE,CAAC,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAChC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,2CAA2C,CAAC,CAAC;YAC5D,QAAQ,EAAE,CAAC;QACf,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE;YACX,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,2CAA2C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAC/E,QAAQ,EAAE,CAAC;QACf,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAhED,8EAgEC;;;;;;;;;;;;;;AChFD,mGAAiF;AAEjF,MAAa,4BAA6B,SAAQ,8CAAgC;IAC9E,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,OAAO,UAAU,KAAK,QAAQ;YAC9B,OAAO,SAAS,CAAC;QACrB,MAAM,SAAS,GAAW,UAAU,CAAC;QAErC,OAAO,IAAI,4BAA4B,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IAChE,CAAC;CACJ;AARD,oEAQC;AAED,MAAa,oCAAqC,SAAQ,8CAAgC;IACtF,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,OAAO,UAAU,KAAK,QAAQ;YAC9B,OAAO,SAAS,CAAC;QACrB,MAAM,SAAS,GAAW,UAAU,CAAC;QAErC,OAAO,IAAI,oCAAoC,CAAC,OAAO,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;IAC7E,CAAC;CACJ;AARD,oFAQC;AAED,MAAa,oCAAqC,SAAQ,8CAAgC;IAGtF,MAAM,CAAC,MAAM,CAAC,OAAyB,EAAE,UAAe;QACpD,IAAI,OAAO,UAAU,KAAK,QAAQ;YAC9B,OAAO,SAAS,CAAC;QACrB,MAAM,SAAS,GAAW,UAAU,CAAC;QAErC,OAAO,IAAI,oCAAoC,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IACxE,CAAC;IAED,cAAc,CAAC,OAAuB;QAClC,IAAI,OAAO,EAAE,CAAC;YACV,IAAI,OAAO,CAAC,GAAG,EAAE,CAAC;gBACd,IAAI,CAAC,qBAAqB,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;gBAC1C,OAAO,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;YACxB,CAAC;iBAAM,CAAC;gBACJ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,iCAAiC,IAAI,CAAC,SAAS,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;gBAC1H,OAAO,IAAI,CAAC,qBAAqB,CAAC;YACtC,CAAC;QACL,CAAC;aAAM,CAAC;YACJ,OAAO,IAAI,CAAC;QAChB,CAAC;IACL,CAAC;IAED,gBAAgB,CAAC,OAAuB;QACpC,IAAI,OAAO,EAAE,CAAC;YACV,IAAI,OAAO,CAAC,GAAG,EAAE,CAAC;gBACd,IAAI,CAAC,qBAAqB,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;gBAC1C,OAAO,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC;YACxB,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,uCAAuC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;YACjF,OAAO,SAAS,CAAC;QACrB,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AApCD,oFAoCC;;;;;;;;;;;;;;AC0ED,0BASC;AAED,8BAOC;AAtJD,6CAA6C;AAC7C,wDAAgC;AAChC,+DAAmC;AAEnC,iHAA0E;AAC1E,yEAGoB;AACpB,iHAAkE;AAElE,MAAM,KAAK,GAAG,mBAAO,CAAC,wCAAiB,CAAC,CAAC;AAEzC,2DAA+B,GAAE,CAAC;AAIlC,MAAa,cAAc;IAGvB,YAAoB,MAAmC,EAAE,cAA4C,EAAU,OAAgB;QAA3G,WAAM,GAAN,MAAM,CAA6B;QAAwD,YAAO,GAAP,OAAO,CAAS;QAC3H,IAAI,CAAC,kBAAkB,GAAG,IAAI,+CAAuB,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;QAC/E,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAEM,IAAI;QACP,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACvC,MAAM,gBAAgB,GAAwB;YAC1C,GAAG,EAAE;;gBACD,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,4CAAwB,CAAC,mCAAqB,CAAC;gBACjG,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,kCAAqB,CAAC,CAAC,UAAU,CAAC;gBAC9E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,IAAI,CAAC,MAAM,CAAC,IAAI,OAAO,UAAI,CAAC,MAAM,CAAC,SAAS,mCAAI,SAAS,UAAU,UAAU,EAAE,CAAC,CAAC;gBACxH,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC;oBACtB,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;oBAC9B,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI;oBACtB,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO;oBAC5B,QAAQ,EAAE,CAAC;oBACX,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;oBACrE,UAAU;iBACb,CAAC,CAAC;YACP,CAAC;SACJ,CAAC;QAEF,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACtB,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACrC,IAAI,MAAM,CAAC,OAAO,KAAK,KAAK,EAAE,CAAC;oBAC3B,SAAS;gBACb,CAAC;gBACD,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAE5C,IAAI,MAAM,CAAC,kBAAkB,EAAE,CAAC;oBAC5B,gBAAgB,CAAC,IAAI,CAAC,GAAG,EAAE;;wBACvB,IAAI,UAAU,GAAG,MAAM,CAAC,mBAAmB,CAAC,CAAC,4CAAwB,CAAC,mCAAqB,CAAC;wBAC5F,UAAU,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC,kCAAqB,CAAC,CAAC,UAAU,CAAC;wBACzE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,MAAM,CAAC,IAAI,OAAO,YAAM,CAAC,SAAS,mCAAI,SAAS,UAAU,UAAU,EAAE,CAAC,CAAC;wBAC9G,SAAS,CAAC,OAAO,CAAC;4BACd,QAAQ,EAAE,MAAM,CAAC,QAAQ;4BACzB,IAAI,EAAE,MAAM,CAAC,IAAI;4BACjB,OAAO,EAAE,MAAM,CAAC,OAAO;4BACvB,QAAQ,EAAE,MAAM,CAAC,QAAQ;4BACzB,UAAU;4BACV,IAAI,EAAE,MAAM,CAAC,SAAS;yBACzB,CAAC,CAAC;oBACP,CAAC,CAAC,CAAC;gBACP,CAAC;qBAAM,CAAC;oBACJ,IAAI,CAAC;wBACD,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;oBACrD,CAAC;oBAAC,OAAO,CAAC,EAAE,CAAC;wBACT,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBACrB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,oBAAoB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;oBACpE,CAAC;gBACL,CAAC;YACL,CAAC;QACL,CAAC;QAED,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACzC,CAAC;IAEO,WAAW;QACf,IAAI,SAAS,GAAG,IAAI,mBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,iBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QAE/E,IAAI,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,oBAAO,CAAC,oBAAoB,CAAC,CAAC;QACrE,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,IAAI,gBAAgB,CAAC,CAAC;QACzG,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,gBAAgB,CAAC,CAAC;QAC3F,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,gBAAgB,CAAC,CAAC;QACnG,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,EAAE,EAAE,CAAC;YACpE,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACzF,CAAC;aAAM,CAAC;YACJ,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,gBAAgB,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QAClF,CAAC;QAED,yCAAyC;QACzC,SAAS,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE;YAC1C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,wBAAwB,MAAM,EAAE,CAAC,CAAC;YACrD,QAAQ,EAAE,CAAC,CAAC,UAAU;QAC1B,CAAC,CAAC,CAAC;QACH,OAAO,SAAS,CAAC;IACrB,CAAC;IAEO,YAAY,CAAC,MAAmC;QACpD,IAAI,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC;QAC1B,IAAI,QAAQ,GAAG,iBAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,OAAO,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,QAAQ,CAAC,EAAE,CAAC;YAC1E,OAAO,GAAG,GAAG,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,EAAE,CAAC;YAClC,QAAQ,GAAG,iBAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,OAAO,EAAE,CAAC,CAAC;QAChE,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,OAAO,eAAe,QAAQ,EAAE,CAAC,CAAC;QAC9D,IAAI,SAAS,GAAG,IAAI,sBAAS,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAEjD,IAAI,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,oBAAO,CAAC,oBAAoB,CAAC,CAAC;QACrE,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,YAAY,EAAE,MAAM,CAAC,YAAY,IAAI,gBAAgB,CAAC,CAAC;QACpG,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,IAAI,gBAAgB,CAAC,CAAC;QACtF,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,YAAY,EAAE,MAAM,CAAC,MAAM,IAAI,gBAAgB,CAAC,CAAC;QAC9F,IAAI,MAAM,CAAC,QAAQ,KAAK,SAAS,IAAI,MAAM,CAAC,QAAQ,KAAK,EAAE,EAAE,CAAC;YAC1D,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,gBAAgB,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;QACpF,CAAC;QAED,SAAS,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE;YAC1C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,IAAI,mBAAmB,CAAC,CAAC;YACvD,QAAQ,EAAE,CAAC,CAAC,UAAU;QAC1B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,SAAS,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC;QACxF,OAAO,SAAS,CAAC;IACrB,CAAC;CACJ;AA9GD,wCA8GC;AAED,IAAI,SAAS,GAAY,KAAK,CAAC;AAC/B,IAAI,iBAAiB,GAAG,KAAK,CAAC,GAAG,CAAC;AAElC,SAAgB,OAAO,CAAC,WAAmB,EAAE,iBAA2B;IACpE,IAAI,SAAS,EAAE,CAAC;QACZ,OAAO;IACX,CAAC;IAED,uBAAU,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC;IAC7C,KAAK,CAAC,GAAG,GAAG;QACR,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;IAC1D,CAAC,CAAC;AACN,CAAC;AAED,SAAgB,SAAS;IACrB,IAAI,CAAC,SAAS,EAAE,CAAC;QACb,OAAO;IACX,CAAC;IACD,KAAK,CAAC,OAAO,EAAE,CAAC;IAChB,KAAK,CAAC,GAAG,GAAG,iBAAiB,CAAC;IAC9B,SAAS,GAAG,KAAK,CAAC;AACtB,CAAC;;;;;;;;;;;;;;ACtJD,6CAA6C;AAC7C,iGAAyD;AACzD,yEAwBoB;AAGpB,iHAAkE;AAsBlE,MAAa,gBAAgB;IAMzB,YAAoB,SAAsC,EAAE,cAA4C,EAAU,OAAgB;QAA9G,cAAS,GAAT,SAAS,CAA6B;QAAwD,YAAO,GAAP,OAAO,CAAS;QAH1H,oBAAe,GAAyC,EAAE,CAAC;QAC3D,oBAAe,GAAmC,EAAE,CAAC;QAGzD,IAAI,CAAC,kBAAkB,GAAG,IAAI,+CAAuB,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;QAC/E,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,IAAI;QACA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;YAC1B,OAAO;QACX,CAAC;QACD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAEO,uBAAuB;QAC3B,MAAM,gBAAgB,GAAG,EAAE,CAAC;QAC5B,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAEvE,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,GAAG,EAAE,CAAC;YACjC,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;gBAC1C,IAAI,MAAM,GAAG,EAAE,EAAE,CAAC;oBACd,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC1C,CAAC;YACL,CAAC;YAED,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;gBAC1C,IAAI,MAAM,GAAG,EAAE,EAAE,CAAC;oBACd,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC1C,CAAC;YACL,CAAC;QACL,CAAC;QAED,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,GAAG,EAAE,CAAC;YACjC,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;YAC9C,CAAC;YAED,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;YAC9C,CAAC;QACL,CAAC;QAED,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,GAAG,EAAE,CAAC;YACjC,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;YAC9C,CAAC;YAED,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;YAC9C,CAAC;QACL,CAAC;QAED,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,EAAE,CAAC;YAClC,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;YAC/C,CAAC;YAED,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,GAAG,EAAE,CAAC;gBAClC,gBAAgB,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC,CAAC;YAC/C,CAAC;QACL,CAAC;QAED,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI,EAAE,CAAC;YAClC,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,IAAI,EAAE,CAAC;gBACnC,gBAAgB,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;YAChD,CAAC;QACL,CAAC;QAED,MAAM,OAAO,GAA2B;YACpC,KAAK,EAAE,KAAK,EAAE,8BAA8B;YAC5C,mBAAmB,EAAE,KAAK,EAAE,wDAAwD;YACpF,IAAI,EAAE,IAAI,EAAE,mDAAmD;YAC/D,qBAAqB,EAAE,kDAA0C;YACjE,KAAK,EAAE;gBACH,WAAW,EAAE,gBAAgB;gBAC7B,KAAK,EAAE;oBACH,QAAQ,EAAE,kFAA0D;oBACpE,MAAM,EAAE,oFAA4D;iBACvE;aACJ;YACD,KAAK,EAAE;gBACH,aAAa,EAAE,KAAK;gBACpB,MAAM,EAAE;oBACJ;wBACI,IAAI,iDAAiC;wBACrC,UAAU,0CAAiC;qBAC9C;iBACJ;aACJ;SACJ,CAAC;QACF,OAAO,OAAO,CAAC;IACnB,CAAC;IAEO,kBAAkB;QACtB,IAAI,QAAQ,GAAG,iBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC/E,IAAI,SAAS,GAAG,IAAI,sBAAS,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QAE7D,IAAI,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,oBAAO,CAAC,oBAAoB,CAAC,CAAC;QACrE,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,YAAY,IAAI,gBAAgB,CAAC,CAAC;QAC5G,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,gBAAgB,CAAC,CAAC;QAC9F,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,gBAAgB,CAAC,CAAC;QACtG,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,KAAK,EAAE,EAAE,CAAC;YAC1E,WAAW,CAAC,iBAAiB,CAAC,2BAAc,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QAC5F,CAAC;QAED,SAAS,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE;YAC1C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;YACtC,QAAQ,EAAE,CAAC,CAAC,UAAU;QAC1B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;IAC5B,CAAC;IAEM,sBAAsB;QACzB,IAAI,CAAC,gBAAgB,GAAG,IAAI,6BAAgB,CAAC;YACzC,iBAAiB,EAAE,CAAC,EAAE,+DAA+D;YACrF,QAAQ,EAAE,IAAI;YACd,gBAAgB,EAAE,IAAI,CAAC,uBAAuB,EAAE;SACnD,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC3D,CAAC;IAEM,wBAAwB;QAC3B,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAC/E,CAAC;IAEO,aAAa;;QACjB,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC,4CAAwB,CAAC,mCAAqB,CAAC;QACpG,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,kCAAqB,CAAC,CAAC,UAAU,CAAC;QACjF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,UAAI,CAAC,SAAS,CAAC,SAAS,mCAAI,SAAS,UAAU,UAAU,EAAE,CAAC,CAAC;QAC9H,IAAI,CAAC,MAAM,CAAC,OAAO,CACf;YACI,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ;YACjC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI;YACzB,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO;YAC/B,QAAQ,4BAAmB;YAC3B,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;YAC3E,UAAU;SACb,EACD,KAAK,CACR,CAAC;IACN,CAAC;IAEM,qBAAqB,CAAC,OAAwB,EAAE,QAAiC;QACpF,IAAI,MAAM,GAAG;YACT,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;YAC7B,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,MAAM,EAAE,OAAO,CAAC,MAAM;SACzB,CAAC;QACF,IAAI,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CACpE,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE;YACjC,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;QACxB,CAAC,CAAC,CACL,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,wBAAwB,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACtE,IAAI,MAAM,GAAG,8BAAK,EAAC,QAAQ,EAAE,aAAa,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;QAElE,IAAI,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAElC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,WAAW,EAAU,IAAI,CAAC,CAAC,CAAC,CAAC;QAC3F,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,EAAC,UAAU,EAAE,EAAE,CAAC,QAAQ,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,CAAC;IACzE,CAAC;IAEM,aAAa,CAAC,OAA6B,EAAE,QAA+B;QAC/E,IAAI,WAAW,GAAyB,EAAE,CAAC;QAE3C,MAAM,SAAS,GAAsB,OAAO,CAAC,SAAS,CAAC;QAEvD,WAAW,CAAC,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC;QAC5C,IAAI,QAAQ,GAAmC,EAAE,CAAC;QAElD,IAAI,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;QAC9B,IAAI,SAAS,EAAE,CAAC;YACZ,MAAM,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC;YAClC,MAAM,gBAAgB,GAAG,SAAS,CAAC,eAAe,CAAC,CAAC,qFAAqF;YACzI,MAAM,YAAY,GAAG,SAAS,CAAC,QAAQ,CAAC;YACxC,MAAM,aAAa,GAAG,SAAS,CAAC,SAAS,CAAC;YAE1C,MAAM,SAAS,GAAG,6BAAgB,CAAC,6BAA6B,EAAE,CAAC;YAEnE,QAAQ,CAAC,KAAK,GAAG;gBACb,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,SAAS;gBACf,QAAQ,EAAE,YAAY;gBACtB,SAAS,EAAE,aAAa;aAC3B,CAAC;YAEF,WAAW,CAAC,SAAS,GAAG,UAAU,CAAC;YACnC,WAAW,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC,CAAC;YACrE,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC;YAClC,WAAW,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACpD,CAAC;QAED,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;QAChC,IAAI,SAAS,EAAE,CAAC;YACZ,MAAM,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC;YAClC,MAAM,gBAAgB,GAAG,SAAS,CAAC,eAAe,CAAC,CAAC,qFAAqF;YACzI,MAAM,YAAY,GAAG,SAAS,CAAC,QAAQ,CAAC;YACxC,MAAM,aAAa,GAAG,SAAS,CAAC,SAAS,CAAC;YAC1C,MAAM,SAAS,GAAG,6BAAgB,CAAC,6BAA6B,EAAE,CAAC;YAEnE,QAAQ,CAAC,KAAK,GAAG;gBACb,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,SAAS;gBACf,QAAQ,EAAE,YAAY;gBACtB,SAAS,EAAE,aAAa;aAC3B,CAAC;YAEF,WAAW,CAAC,SAAS,GAAG,UAAU,CAAC;YACnC,WAAW,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC,CAAC;YACrE,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC;YAClC,WAAW,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACpD,CAAC;QAED,qCAAqC;QACrC,0CAA0C;QAC1C,8BAA8B;QAC9B,KAAK;QAEL,uCAAuC;QACvC,+BAA+B;QAC/B,WAAW;QACX,+BAA+B;QAC/B,IAAI;QAEJ,6CAA6C;QAC7C,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,WAAW,CAAC;QAE9C,QAAQ,CAAC,SAAS,EAAE,QAAiC,CAAC,CAAC;IAC3D,CAAC;IAEM,mBAAmB,CAAC,OAAyB,EAAE,QAA+B;;QACjF,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;QACpC,QAAQ,OAAO,CAAC,IAAI,EAAE,CAAC;YACnB,2CAA6B,CAAC,CAAC,CAAC;gBAC5B,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACpD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,oBAAoB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBAChF,IAAI,WAAW,EAAE,CAAC;oBACd,IAAI,KAAK,GAAG,IAAI,CAAC;oBACjB,IAAI,MAAM,GAAG,GAAG,CAAC;oBACjB,IAAI,GAAG,GAAG,EAAE,CAAC;oBACb,IAAI,OAAO,GAAG,GAAG,CAAC;oBAClB,IAAI,KAAK,GAAG,UAAI,CAAC,SAAS,CAAC,KAAK,mCAAI,SAAS,CAAC;oBAC9C,MAAM,GAAG,GAAG,mBAAO,CAAC,KAAK,0CAAE,GAAG,mCAAI,IAAI,CAAC;oBACvC,IAAI,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;oBAC9B,IAAI,SAAS,EAAE,CAAC;wBACZ,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;wBACxB,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;wBAE1B,IAAI,WAAW,GAAG,SAAS,CAAC,GAAG,CAAC;wBAChC,IAAI,WAAW,GAAG,GAAG,EAAE,CAAC;4BACpB,GAAG,GAAG,WAAW,CAAC;wBACtB,CAAC;wBAED,OAAO,GAAG,SAAS,CAAC,YAAY,CAAC;oBACrC,CAAC;oBAED,IAAI,MAAM,GAAG;wBACT,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;wBAC7B,KAAK;wBACL,GAAG;wBACH,KAAK;wBACL,MAAM;wBACN,OAAO;wBACP,WAAW,EAAE,aAAO,CAAC,KAAK,CAAC,EAAE,mCAAI,EAAE;wBACnC,QAAQ,EAAE,iBAAW,CAAC,SAAS,0CAAE,QAAQ,CAAC,QAAQ,CAAC;wBACnD,aAAa,EAAE,WAAW,CAAC,OAAO;wBAClC,eAAe,EAAE,WAAW,CAAC,SAAS;wBACtC,eAAe,EAAE,WAAW,CAAC,SAAS;wBACtC,GAAG;qBACN,CAAC;oBAEF,IAAI,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAE5H,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,IAAI,OAAO,CAAC,KAAK,IAAI,IAAI,EAAE,CAAC;wBACtD,IAAI,MAAM,GAAG;4BACT,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;4BAC7B,OAAO,EAAE,aAAO,CAAC,KAAK,CAAC,YAAY,mCAAI,EAAE;4BACzC,UAAU,EAAE,aAAO,CAAC,KAAK,CAAC,WAAW,mCAAI,EAAE;4BAC3C,OAAO,EAAE,aAAO,CAAC,KAAK,CAAC,OAAO,mCAAI,CAAC;4BACnC,WAAW,EAAE,aAAO,CAAC,KAAK,CAAC,EAAE,mCAAI,GAAG;4BACpC,aAAa,EAAE,WAAW,CAAC,OAAO;4BAClC,eAAe,EAAE,WAAW,CAAC,SAAS;4BACtC,eAAe,EAAE,WAAW,CAAC,SAAS;4BACtC,QAAQ,EAAE,iBAAW,CAAC,SAAS,0CAAE,QAAQ,CAAC,QAAQ,CAAC;yBACtD,CAAC;wBAEF,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvJ,CAAC;oBAED,uEAAuE;oBACvE,IAAI,MAAM,GAAG,8BAAK,EAAC,QAAQ,EAAE,aAAa,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;oBAElE,IAAI,OAAO,GAAG,KAAK,CAAC;oBACpB,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,EAAC,kBAAkB,EAAE,EAAE;wBAC5C,IAAI,CAAC,OAAO,EAAE,CAAC;4BACX,OAAO,GAAG,IAAI,CAAC;4BACf,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,8BAA8B,CAAC,CAAC;4BACnD,QAAQ,EAAE,CAAC,CAAC,gDAAgD;wBAChE,CAAC;wBACD,wDAAwD;oBAC5D,CAAC,CAAC,CAAC;oBACH,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE;wBACzB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,yCAAyC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;wBAC7E,QAAQ,CAAC,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC,CAAC;oBAC3D,CAAC,CAAC,CAAC;oBACH,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE;wBAC/B,MAAM,OAAO,GAAG,oCAAoC,IAAI,gBAAgB,MAAM,EAAE,CAAC;wBAEjF,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,GAAG,EAAE,CAAC;4BAC/B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,0BAA0B,CAAC,CAAC;wBAC7D,CAAC;6BAAM,CAAC;4BACJ,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,UAAU,CAAC,CAAC;4BAEzC,IAAI,CAAC,OAAO,EAAE,CAAC;gCACX,QAAQ,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;4BACjC,CAAC;iCAAM,CAAC;gCACJ,IAAI,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC;4BAC/D,CAAC;wBACL,CAAC;oBACL,CAAC,CAAC,CAAC;oBAEH,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG;wBAC9B,cAAc,EAAE,CAAC;wBACjB,OAAO,EAAE,MAAM;qBAClB,CAAC;oBACF,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;oBAEvC,MAAM;gBACV,CAAC;YACL,CAAC;YACG,iCAAiC;YAErC;gBACI,QAAQ,EAAE,CAAC;gBACX,MAAM;YAEV;gBACI,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;gBAC9B,QAAQ,EAAE,CAAC;gBACX,MAAM;QACd,CAAC;IACL,CAAC;IAEO,aAAa,CAAC,SAAiB;QACnC,MAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QACvD,IAAI,CAAC;YACD,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC3C,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACT,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;YACpE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC;QAED,OAAO,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QAEvC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;IACrD,CAAC;CACJ;AAhXD,4CAgXC;;;;;;;;;;;;;;ACjaD,yEAAsG;AAUtG,MAAa,uBAAuB;IAChC,YAAoB,cAA4C,EAAU,OAAgB;QAAtE,mBAAc,GAAd,cAAc,CAA8B;QAAU,YAAO,GAAP,OAAO,CAAS;IAE1F,CAAC;IAEM,YAAY,CAAC,SAAoB,EAAE,cAA8C,EAAE,oBAA6B;QACnH,IAAI,cAAc,IAAI,IAAI,EAAE,CAAC;YACzB,OAAO;QACX,CAAC;QAED,IAAI,aAAa,GAAG,oBAAoB,KAAK,SAAS,IAAI,oBAAoB,KAAK,IAAI,IAAI,oBAAoB,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QAE9H,IAAI,qBAAqB,GAAG,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,CACrE;YACI,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,IAAI;YACb,oBAAoB,EAAE,IAAI;YAC1B,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,gBAAgB;YAC/B,eAAe,EAAE,oBAAoB;SACxC,EACD,CAAC,KAAU,EAAE,EAAE,GAAE,CAAC,CACrB;YACD,CAAC,CAAC,IAAI,CAAC;QAEX,KAAK,MAAM,OAAO,IAAI,cAAc,EAAE,CAAC;YACnC,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,EAAE,qBAAqB,CAAC,CAAC;QAChE,CAAC;QAED,KAAK,MAAM,OAAO,IAAI,cAAc,EAAE,CAAC;YACnC,IAAI,CAAC,qBAAqB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QACnD,CAAC;IACL,CAAC;IAEO,WAAW,CAAC,SAAoB,EAAE,aAA2C,EAAE,mBAA0C;QAC7H,IAAI,aAAa,CAAC,OAAO,KAAK,KAAK,EAAE,CAAC;YAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,WAAW,aAAa,aAAa,CAAC,IAAI,cAAc,CAAC,CAAC;YAC3F,OAAO;QACX,CAAC;QAED,IAAI,OAAO,GAAG,aAAa,CAAC,IAAI,CAAC;QAEjC,QAAQ,aAAa,CAAC,IAAI,EAAE,CAAC;YACzB,KAAK,aAAa,CAAC;YACnB,KAAK,gBAAgB,CAAC,CAAC,CAAC;gBACpB,OAAO,GAAG,SAAS,CAAC;gBACpB,MAAM;YACV,CAAC;YACD,KAAK,gCAAgC,CAAC,CAAC,CAAC;gBACpC,OAAO,GAAG,2BAA2B,CAAC;gBACtC,MAAM;YACV,CAAC;YACD,KAAK,OAAO,CAAC,CAAC,CAAC;gBACX,OAAO,GAAG,YAAY,CAAC;gBACvB,MAAM;YACV,CAAC;YACD,KAAK,MAAM,CAAC,CAAC,CAAC;gBACV,OAAO,GAAG,OAAO,CAAC;gBAClB,MAAM;YACV,CAAC;YACD,KAAK,8BAA8B,CAAC,CAAC,CAAC;gBAClC,OAAO,GAAG,QAAQ,CAAC;gBACnB,MAAM;YACV,CAAC;YACD,KAAK,qBAAqB,CAAC;YAC3B,KAAK,eAAe,CAAC;YACrB,KAAK,eAAe,CAAC;YACrB,KAAK,iBAAiB,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,aAAa,CAAC,IAAI,gHAAgH,CAAC,CAAC;gBAClK,OAAO;YACX,CAAC;QACL,CAAC;QAED,aAAa,CAAC,IAAI,GAAG,OAAO,CAAC;QAE7B,IAAI,CAAC,CAAC,aAAa,CAAC,IAAI,IAAI,oBAAO,CAAC,EAAE,CAAC;YACnC,MAAM,KAAK,CAAC,IAAI,SAAS,CAAC,WAAW,2BAA2B,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC;QAC1F,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,WAAW,oBAAoB,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC;QAEtF,IAAI,KAAK,GAAG,KAAK,CAAC;QAClB,IAAI,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC,oBAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;QACnE,IAAI,UAAU,KAAK,SAAS,EAAE,CAAC;YAC3B,MAAM,eAAe,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YACrE,IAAI,eAAe,IAAI,aAAa,CAAC,OAAO;gBACxC,UAAU,GAAG,SAAS,CAAC;QAC/B,CAAC;QAED,IAAI,UAAU,KAAK,SAAS,EAAE,CAAC;YAC3B,UAAU,GAAG,IAAI,oBAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,aAAa,CAAC,IAAI,EAAE,aAAa,CAAC,OAAO,CAAC,CAAC;YACxF,KAAK,GAAG,IAAI,CAAC;QACjB,CAAC;QAED,IAAI,aAAa,CAAC,QAAQ,IAAI,IAAI,EAAE,CAAC;YACjC,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACxD,CAAC;QAED,IAAI,aAAa,CAAC,SAAS,IAAI,IAAI,EAAE,CAAC;YAClC,UAAU,CAAC,iBAAiB,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAC1D,CAAC;QAED,KAAK,IAAI,aAAa,IAAI,aAAa,CAAC,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,aAAa,EAAE,mBAAmB,CAAC,CAAC;QAC5E,CAAC;QAED,IAAI,KAAK,EAAE,CAAC;YACR,SAAS,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACrC,CAAC;IACL,CAAC;IAEO,qBAAqB,CAAC,SAAoB,EAAE,aAA2C;QAC3F,IAAI,aAAa,CAAC,OAAO,IAAI,KAAK,EAAE,CAAC;YACjC,OAAM;QACV,CAAC;QACD,IAAI,aAAa,CAAC,MAAM,IAAI,IAAI,EAAE,CAAC;YAC/B,OAAO;QACX,CAAC;QACD,IAAI,aAAa,CAAC,MAAM,IAAI,EAAE,EAAE,CAAC;YAC7B,OAAO;QACX,CAAC;QAED,MAAM,eAAe,GAAG,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACjE,MAAM,aAAa,GAAG,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACjE,IAAI,eAAe,IAAI,IAAI,IAAI,aAAa,IAAI,IAAI,EAAE,CAAC;YACnD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,IAAI,sCAAsC,aAAa,CAAC,MAAM,QAAQ,aAAa,CAAC,IAAI,qDAAqD,CAAC,CAAC;YACpL,OAAO;QACX,CAAC;QACD,aAAa,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,IAAI,2BAA2B,eAAe,CAAC,WAAW,OAAO,aAAa,CAAC,WAAW,EAAE,CAAC,CAAC;IACvI,CAAC;IAEO,kBAAkB,CAAC,UAAmB,EAAE,oBAAyD,EAAE,mBAA0C;QACjJ,MAAM,OAAO,GAAG,IAAI,UAAU,CAAC,WAAW,IAAI,oBAAoB,CAAC,IAAI,GAAG,CAAC;QAC3E,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC;YAChC,OAAO;QACX,CAAC;QAED,IAAI,iBAAiB,GAAG,UAAU,CAAC,iBAAiB,CAAC,2BAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAuB,CAAC;QACtH,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACrB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,4BAA4B,oBAAoB,CAAC,IAAI,EAAE,CAAC,CAAC;YACrF,OAAO;QACX,CAAC;QAED,IAAI,oBAAoB,CAAC,UAAU,KAAK,SAAS;YAC7C,iBAAiB,CAAC,QAAQ,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;QAEhE,iBAAiB,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,oBAAoB,EAAE,CAAC,YAAiB,EAAE,EAAE;YACtG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,wCAAwC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YACrG,IAAI,OAAO,GAA0B,iBAAiB,CAAC,OAAO,CAAC;YAC/D,IAAI,CAAC,OAAO,EAAE,CAAC;gBACX,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,cAAc,CAAC,CAAC;gBAC7C,OAAO;YACX,CAAC;YAED,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,oCAAoC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,oBAAoB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC7I,IAAI,CAAC;gBACD,iBAAiB,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACjD,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACT,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,8BAA8B,OAAO,eAAe,CAAC,EAAE,CAAC,CAAC;YAC1F,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;YAC7E,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,kDAAkD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,oBAAoB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACtJ,IAAI,CAAC;gBACD,iBAAiB,CAAC,QAAQ,CAAC,OAAO,EAAE,iBAAiB,CAAC,OAAO,CAAC,CAAC;YACnE,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACT,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,8BAA8B,OAAO,eAAe,CAAC,EAAE,CAAC,CAAC;YAC1F,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,iBAAiB,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,OAAY,EAAE,QAAmC,EAAE,OAAY,EAAE,EAAE;YAC5F,IAAI,iBAAiB,GAAG,GAAG,EAAE;gBACzB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,8BAA8B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBACvF,IAAI,OAAO,GAA0B,iBAAiB,CAAC,OAAO,CAAC;gBAC/D,IAAI,CAAC,OAAO,EAAE,CAAC;oBACX,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,cAAc,CAAC,CAAC;oBAC7C,QAAQ,EAAE,CAAC;oBACX,OAAO;gBACX,CAAC;gBAED,IAAI,OAAO,KAAK,OAAO,EAAE,CAAC;oBACtB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,iDAAiD,CAAC,CAAC;oBAChF,QAAQ,EAAE,CAAC;oBACX,OAAO;gBACX,CAAC;gBAED,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBACrD,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,EAAE;oBACnC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,wCAAwC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBACjG,QAAQ,EAAE,CAAC;gBACf,CAAC,CAAC,CAAC;YACP,CAAC;YAED,IAAI,mBAAmB,KAAK,IAAI,IAAI,mBAAmB,KAAK,SAAS,EAAE,CAAC;gBACpE,iBAAiB,EAAE,CAAC;gBAEpB,OAAO;YACX,CAAC;YAED,mBAAmB,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,KAAU,EAAE,YAAiB,EAAE,EAAE;gBACrE,IAAI,CAAC,YAAY,EAAE,CAAC;oBAChB,QAAQ,sDAAyC,CAAC;oBAClD,OAAO;gBACX,CAAC;gBAED,iBAAiB,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,iBAAiB,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,EAAE;YACvC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,kBAAkB,CAAC,CAAC;YACjD,MAAM,iBAAiB,GAAG,GAAG,EAAE;gBAC3B,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;oBAC7E,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,mCAAmC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,oBAAoB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBACvI,IAAI,CAAC;wBACD,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;oBAC/B,CAAC;oBAAC,OAAO,CAAC,EAAE,CAAC;wBACT,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,8BAA8B,OAAO,eAAe,CAAC,EAAE,CAAC,CAAC;oBAC1F,CAAC;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC;YAEF,IAAI,mBAAmB,KAAK,IAAI,IAAI,mBAAmB,KAAK,SAAS,EAAE,CAAC;gBACpE,iBAAiB,EAAE,CAAC;gBAEpB,OAAO;YACX,CAAC;YAED,mBAAmB,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,KAAU,EAAE,YAAiB,EAAE,EAAE;gBACrE,IAAI,CAAC,YAAY,EAAE,CAAC;oBAChB,UAAU,sDAAyC,CAAC;oBACpD,OAAO;gBACX,CAAC;gBACD,iBAAiB,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,oBAAoB,CAAC,OAA8B,EAAE,QAAkF;QAC3I,IAAI,CAAC,OAAO,EAAE,CAAC;YACX,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACnC,OAAO;QACX,CAAC;QAED,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE;YAClD,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACpD,kDAAkD;YAClD,IAAI,CAAC,OAAO,KAAK,SAAS,CAAC,IAAI,CAAC,OAAO,KAAK,EAAE,CAAC,EAAE,CAAC;gBAC9C,IAAI,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC;oBACnB,OAAO,GAAG,QAAQ,CAAC;gBACvB,CAAC;YACL,CAAC;YACD,QAAQ,CAAC,aAAa,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACP,CAAC;CACJ;AAnQD,0DAmQC;;;;;;;;;;;;;;AC/QD,6CAA6C;AAC7C,sEAAiC;AACjC,oHAA4D;AAE5D,qIAAsE;AAEtE,8GAA4E;AAa5E,SAAS,uBAAuB,CAAC,KAAa;IAC1C,OAAO,KAAK,CAAC,sBAAsB,CAAC,KAAK,SAAS;QAC9C,KAAK,CAAC,sBAAsB,CAAC,YAAY,KAAK,CAAC;AACvD,CAAC;AAQD,SAAS,4BAA4B,CAAC,MAA2C;IAC7E,IAAI,CAAC,MAAM;QACP,OAAO,KAAK,CAAC;IACjB,IAAI,QAAQ,GAAgC,MAAM,CAAC;IACnD,OAAO,CAAC,QAAQ,CAAC,aAAa,KAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,KAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,KAAK,SAAS,CAAC,CAAC;AAC7I,CAAC;AAED,MAAa,gBAAgB;IAMzB,YAAoB,OAAyB,EAAU,OAAO;QAA1C,YAAO,GAAP,OAAO,CAAkB;QAAU,YAAO,GAAP,OAAO;QAL9D,oBAAe,GAAsC,IAAI,GAAG,EAAgC,CAAC;QAC7F,qBAAgB,GAAsC,IAAI,GAAG,EAAgC,CAAC;QAC9F,YAAO,GAA6C,EAAE,CAAC;QACvD,sBAAiB,GAAY,KAAK,CAAC;QAG/B,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAClD,OAAO,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACvD,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACrD,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvD,CAAC;IAEO,YAAY;QAChB,kCAAO,EAAC,oBAAI,EAAC,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,UAAU,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAExH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;QACxD,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QACjC,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;IACrC,CAAC;IAEO,oBAAoB,CAAC,MAAW;QACpC,IAAI,YAAY,GAAgC,MAAM,CAAC,MAAM,CAAC;QAC9D,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC;YAC/B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;YACnD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,kBAAkB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;YAEtF,YAAY,CAAC,KAAK,GAAG,SAAS,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtD,YAAY,CAAC,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC;YACvC,YAAY,CAAC,MAAM,GAAG,YAAY,CAAC,KAAK,CAAC;YACzC,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;gBACzB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAChF,CAAC;YACD,YAAY,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACtC,YAAY,CAAC,OAAO,GAAG,YAAY,CAAC;YACpC,YAAY,CAAC,IAAI,GAAG,CAAC,CAAC;YACtB,YAAY,CAAC,cAAc,GAAG,KAAK,CAAC;YACpC,MAAM,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,kBAAkB,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE,SAAS,CAAC,CAAC;QACpI,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,YAAY,CAAC,cAAc,IAAI,IAAI,CAAC;QAE7D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,qCAAc,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;IACjF,CAAC;IAEO,mBAAmB,CAAC,MAAW;QACnC,IAAI,WAAW,GAAuC,MAAM,CAAC,OAAO,CAAC;QACrE,IAAI,WAAW,KAAK,SAAS;YACzB,OAAO;QAEX,KAAK,IAAI,YAAY,IAAI,WAAW,EAAE,CAAC;YACnC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;YAC1C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,yCAAgB,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QAClF,CAAC;IACL,CAAC;IAEO,iBAAiB,CAAC,OAAO;QAC7B,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;YAC1C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,sBAAsB,OAAO,EAAE,CAAC,CAAC;QAC5D,CAAC;IACL,CAAC;IAEO,WAAW,CAAC,EAAU,EAAE,KAAqB;QACjD,mDAAmD;QACnD,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,WAAW,EAAE,CAAC;YACf,6DAA6D;YAC7D,OAAO;QACX,CAAC;QACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,0BAA0B,EAAE,GAAG,CAAC,CAAC;QAExD,gCAAgC;QAChC,yBAAyB,CAAC,KAAK,CAAC,CAAC;QAEjC,KAAK,IAAI,MAAM,IAAI,WAAW;YAC1B,MAAM,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;IAEO,aAAa,CAAC,GAAQ;QAC1B,IAAI,OAAO,GAAG,KAAK,QAAQ,KAAI,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,OAAO,GAAE,CAAC;YAC1C,IAAI,GAAG,CAAC,OAAO,KAAK,MAAM,EAAE,CAAC;gBACzB,wCAAwC;gBACxC,IAAI,GAAG,CAAC,QAAQ,EAAE,CAAC;oBACf,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,EAAE,kBAAkB,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACjF,CAAC;YACL,CAAC;QACL,CAAC;IACL,CAAC;IAEO,YAAY,CAAC,QAAQ;QACzB,IAAI,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACzC,oCAAS,GAAE,CAAC;YACZ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAC5C,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;QACb,CAAC;QACD,QAAQ,EAAE,CAAC;IACf,CAAC;IAEO,8BAA8B,CAAC,SAAiC,EAAE,YAAgC;QACtG,IAAI,SAAS,CAAC,oBAAoB,CAAC,MAAM,IAAI,CAAC;YAC1C,OAAO;QAEX,KAAK,IAAI,mBAAmB,IAAI,SAAS,CAAC,oBAAoB,EAAE,CAAC;YAC7D,IAAI,iBAAiB,GAAG,CAAC,OAAY,EAAE,EAAE,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;YAEvG,IAAI,mBAAmB,CAAC,gBAAgB,KAAK,OAAO,EAAE,CAAC;gBACnD,IAAI,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,CAAC;gBACzF,IAAI,CAAC,aAAa,EAAE,CAAC;oBACjB,aAAa,GAAG,CAAC,iBAAiB,CAAC,CAAC;oBACpC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,mBAAmB,CAAC,sBAAsB,EAAE,aAAa,CAAC,CAAC;gBACxF,CAAC;;oBACG,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBAE1C,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,CAAC;gBAChF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,4BAA4B,mBAAmB,CAAC,gBAAgB,IAAI,mBAAmB,CAAC,sBAAsB,EAAE,CAAC,CAAC;gBACzI,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,mBAAmB,CAAC,sBAAsB,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;oBAClF,yBAAyB,CAAC,KAAK,CAAC,CAAC;oBACjC,iBAAiB,CAAC,KAAK,CAAC;gBAC5B,CAAC,CAAC,CAAC;YACP,CAAC;iBAAM,CAAC;gBACJ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,8BAA8B,mBAAmB,CAAC,gBAAgB,EAAE,CAAC,CAAC;YAChG,CAAC;QACL,CAAC;IACL,CAAC;IAEM,aAAa,CAAC,oBAAyD,EAAE,YAAgC;QAC5G,IAAI,4BAA4B,CAAC,oBAAoB,CAAC,EAAE,CAAC;YACrD,IAAI,SAAS,GAAG,mCAAe,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC,aAAa,EAAE,oBAAoB,CAAC,eAAe,CAAC,CAAC;YAC5I,IAAI,SAAS,KAAK,SAAS,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,oBAAoB,CAAC,IAAI,sCAAsC,oBAAoB,CAAC,aAAa,iBAAiB,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;gBACrM,OAAO,SAAS,CAAC;YACrB,CAAC;YAED,IAAI,QAAQ,GAAG,mCAAe,CAAC,wBAAwB,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC,kBAAkB,EAAE,oBAAoB,CAAC,oBAAoB,CAAC,CAAC;YAC1J,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;gBACzB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,oBAAoB,CAAC,IAAI,2CAA2C,oBAAoB,CAAC,kBAAkB,iBAAiB,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;gBACpN,OAAO,SAAS,CAAC;YACrB,CAAC;YAED,IAAI,uBAAuB,CAAC,SAAS,CAAC,EAAE,CAAC;gBACrC,IAAI,CAAC,8BAA8B,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;YACjE,CAAC;YAED,OAAO;gBACH,UAAU,EAAE,QAAQ;gBACpB,KAAK,EAAE,SAAS;aACnB,CAAC;QACN,CAAC;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AA3JD,4CA2JC;AAED,SAAS,yBAAyB,CAAC,KAAqB;IACpD,IAAI,CAAC,MAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,KAAI,IAAI,CAAC,EAAE,CAAC;QACvB,IAAI,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACjC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC;YACnB,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC;QACzB,CAAC;IACL,CAAC;AACL,CAAC;;;;;;;;;;;ACzMD;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA;;;;;UEJA;UACA;UACA;UACA","sources":["webpack:///./main.ts","webpack:///./shared/yahka.logger.ts","webpack:///./shared/yahka.utils.ts","webpack:///./yahka.community.types.ts","webpack:///./yahka.functions/conversion.base.ts","webpack:///./yahka.functions/conversion.homekit.homematic.ts","webpack:///./yahka.functions/conversion.inverse.ts","webpack:///./yahka.functions/conversion.invert.ts","webpack:///./yahka.functions/conversion.map.ts","webpack:///./yahka.functions/conversion.passthrough.ts","webpack:///./yahka.functions/conversion.round.ts","webpack:///./yahka.functions/conversion.scale.ts","webpack:///./yahka.functions/conversion.script.ts","webpack:///./yahka.functions/functions.base.ts","webpack:///./yahka.functions/functions.factory.ts","webpack:///./yahka.functions/functions.import.ts","webpack:///./yahka.functions/iofunc.base.ts","webpack:///./yahka.functions/iofunc.const.ts","webpack:///./yahka.functions/iofunc.homematic.covering.ts","webpack:///./yahka.functions/iofunc.homematic.dimmer.ts","webpack:///./yahka.functions/iofunc.multi-state.ts","webpack:///./yahka.functions/iofunc.state.ts","webpack:///./yahka.homekit-bridge.ts","webpack:///./yahka.homekit-ipcamera.ts","webpack:///./yahka.homekit-service.ts","webpack:///./yahka.ioBroker-adapter.ts","webpack:///external commonjs \"@iobroker/adapter-core\"","webpack:///external commonjs \"debug\"","webpack:///external commonjs \"hap-nodejs\"","webpack:///external node-commonjs \"node:child_process\"","webpack:///external node-commonjs \"node:path\"","webpack:///external node-commonjs \"node:util\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/node module decorator","webpack:///webpack/before-startup","webpack:///webpack/startup","webpack:///webpack/after-startup"],"sourcesContent":["/**\r\n *\r\n * iobroker.yahka adapter\r\n *\r\n *\r\n *  file io-package.json comments:\r\n *\r\n *  {\r\n *      \"common\": {\r\n *          \"name\":         \"iobroker.yahka\",                  // name has to be set and has to be equal to adapters folder name and main file name excluding extension\r\n *          \"version\":      \"0.0.0\",                    // use \"Semantic Versioning\"! see http://semver.org/\r\n *          \"title\":        \"Node.js iobroker.yahka Adapter\",  // Adapter title shown in User Interfaces\r\n *          \"authors\":  [                               // Array of authord\r\n *              \"name <mail@iobroker.yahka.com>\"\r\n *          ]\r\n *          \"desc\":         \"iobroker.yahka adapter\",          // Adapter description shown in User Interfaces. Can be a language object {de:\"...\",ru:\"...\"} or a string\r\n *          \"platform\":     \"Javascript/Node.js\",       // possible values \"javascript\", \"javascript/Node.js\" - more coming\r\n *          \"mode\":         \"daemon\",                   // possible values \"daemon\", \"schedule\", \"subscribe\"\r\n *          \"schedule\":     \"0 0 * * *\"                 // cron-style schedule. Only needed if mode=schedule\r\n *          \"loglevel\":     \"info\"                      // Adapters Log Level\r\n *      },\r\n *      \"native\": {                                     // the native object is available via adapter.config in your adapters code - use it for configuration\r\n *          \"test1\": true,\r\n *          \"test2\": 42\r\n *      }\r\n *  }\r\n *\r\n */\r\n\r\n/* jshint -W097 */\r\n/* jshint strict: false */\r\n/* jslint node: true */\r\n'use strict';\r\nimport debug = require('debug');\r\ndebug.enable('EventedHTTPServer,HAPServer,Accessory,AccessoryLoader');\r\n\r\n// you have to require the utils module and call adapter function\r\nimport * as utils from '@iobroker/adapter-core';\r\nimport * as hkAdapter from './yahka.ioBroker-adapter';\r\nrequire('./yahka.functions/functions.import');\r\n\r\nlet yahkaAdapter: hkAdapter.TIOBrokerAdapter;\r\nfunction startAdapter(options: any = {}) {\r\n\tconst ioAdapter = utils.Adapter({name: 'yahka', systemConfig: true});\r\n    yahkaAdapter = new hkAdapter.TIOBrokerAdapter(ioAdapter, utils.getAbsoluteDefaultDataDir());\r\n    return ioAdapter;\r\n}\r\n\r\n// ...\r\n\r\nif (module && module.parent) {\r\n\t// Export startAdapter in compact mode\r\n\tmodule.exports = startAdapter;\r\n} else {\r\n\t// Otherwise start the adapter immediately\r\n\tstartAdapter();\r\n}\r\n\r\n\r\n\r\n","import { ILogger } from '../yahka.interfaces';\r\n\r\nexport class YahkaLogger implements ILogger {\r\n    constructor(protected adapter: ioBroker.Adapter, private logIdentifier: string) {\r\n\r\n    }\r\n\r\n    public debug(message: string) {\r\n        return this.adapter.log.debug(`[${this.logIdentifier}] ${message}`);\r\n    }\r\n    public info(message: string) {\r\n        return this.adapter.log.info(`[${this.logIdentifier}] ${message}`);\r\n    }\r\n    public warn(message: string) {\r\n        return this.adapter.log.warn(`[${this.logIdentifier}] ${message}`);\r\n    }\r\n    public error(message: string) {\r\n        return this.adapter.log.error(`[${this.logIdentifier}] ${message}`);\r\n    }\r\n}\r\n","export function propertyExists<T>(object: any, property: keyof T) {\r\n    return property in object;\r\n}\r\n","import {\r\n    Characteristic, Formats,\r\n    Units, Perms, Service, uuid,\r\n} from 'hap-nodejs';\r\n\r\nlet hapTypesImported = false;\r\nexport function importHAPCommunityTypesAndFixes() {\r\n    if (hapTypesImported) {\r\n        return;\r\n    }\r\n\r\n    Characteristic[`Community: ${Timestamp.name}`]                        = Timestamp;\r\n    Characteristic[`Community: ${AudioDataURL.name}`]                     = AudioDataURL;\r\n    Characteristic[`Community: ${VideoDataURL.name}`]                     = VideoDataURL;\r\n    Characteristic[`Community: ${AudioVolume.name}`]                      = AudioVolume;\r\n    Characteristic[`Community: ${Muting.name}`]                           = Muting;\r\n    Characteristic[`Community: ${PlaybackState.name}`]                    = PlaybackState;\r\n    Characteristic[`Community: ${SkipForward.name}`]                      = SkipForward;\r\n    Characteristic[`Community: ${SkipBackward.name}`]                     = SkipBackward;\r\n    Characteristic[`Community: ${ShuffleMode.name}`]                      = ShuffleMode;\r\n    Characteristic[`Community: ${RepeatMode.name}`]                       = RepeatMode;\r\n    Characteristic[`Community: ${PlaybackSpeed.name}`]                    = PlaybackSpeed;\r\n    Characteristic[`Community: ${MediaCurrentPosition.name}`]             = MediaCurrentPosition;\r\n    Characteristic[`Community: ${MediaItemName.name}`]                    = MediaItemName;\r\n    Characteristic[`Community: ${MediaItemAlbumName.name}`]               = MediaItemAlbumName;\r\n    Characteristic[`Community: ${MediaItemArtist.name}`]                  = MediaItemArtist;\r\n    Characteristic[`Community: ${MediaItemDuration.name}`]                = MediaItemDuration;\r\n    Characteristic[`Community: ${StillImage.name}`]                       = StillImage;\r\n    Characteristic[`Community: ${MediaTypeIdentifier.name}`]              = MediaTypeIdentifier;\r\n    Characteristic[`Community: ${MediaWidth.name}`]                       = MediaWidth;\r\n    Characteristic[`Community: ${MediaHeight.name}`]                      = MediaHeight;\r\n    Characteristic[`Community: ${Volts.name}`]                            = Volts;\r\n    Characteristic[`Community: ${Amperes.name}`]                          = Amperes;\r\n    Characteristic[`Community: ${Watts.name}`]                            = Watts;\r\n    Characteristic[`Community: ${VoltAmperes.name}`]                      = VoltAmperes;\r\n    Characteristic[`Community: ${KilowattHours.name}`]                    = KilowattHours;\r\n    Characteristic[`Community: ${KilowattVoltAmpereHour.name}`]           = KilowattVoltAmpereHour;\r\n    Characteristic[`Community: ${BatteryLevel.name}`]                     = BatteryLevel;\r\n    Characteristic[`Community: ${EveAirQuality.name}`]                    = EveAirQuality;\r\n    Characteristic[`Community: ${EveOpenDuration.name}`]                  = EveOpenDuration;\r\n    Characteristic[`Community: ${EveClosedDuration.name}`]                = EveClosedDuration;\r\n    Characteristic[`Community: ${EveLastAction.name}`]                    = EveLastAction;\r\n    Characteristic[`Community: ${EveTimesOpened.name}`]                   = EveTimesOpened;\r\n    Characteristic[`Community: ${EveResetTotal.name}`]                    = EveResetTotal;\r\n    Characteristic[`Community: ${AtmosphericPressureLevel.name}`]         = AtmosphericPressureLevel;\r\n    Characteristic[`Community: ${NoiseLevel.name}`]                       = NoiseLevel;\r\n    Characteristic[`Community: ${AirFlow.name}`]                          = AirFlow;\r\n    Characteristic[`Community: ${NitrogenDioxideDetected.name}`]          = NitrogenDioxideDetected;\r\n    Characteristic[`Community: ${NitrogenDioxideLevel.name}`]             = NitrogenDioxideLevel;\r\n    Characteristic[`Community: ${NitrogenDioxidePeakLevel.name}`]         = NitrogenDioxidePeakLevel;\r\n    Characteristic[`Community: ${OzoneDetected.name}`]                    = OzoneDetected;\r\n    Characteristic[`Community: ${OzoneLevel.name}`]                       = OzoneLevel;\r\n    Characteristic[`Community: ${OzonePeakLevel.name}`]                   = OzonePeakLevel;\r\n    Characteristic[`Community: ${SodiumDioxideDetected.name}`]            = SodiumDioxideDetected;\r\n    Characteristic[`Community: ${SodiumDioxideLevel.name}`]               = SodiumDioxideLevel;\r\n    Characteristic[`Community: ${SodiumDioxidePeakLevel.name}`]           = SodiumDioxidePeakLevel;\r\n    Characteristic[`Community: ${VolatileOrganicCompoundDetected.name}`]  = VolatileOrganicCompoundDetected;\r\n    Characteristic[`Community: ${VolatileOrganicCompoundLevel.name}`]     = VolatileOrganicCompoundLevel;\r\n    Characteristic[`Community: ${VolatileOrganicCompoundPeakLevel.name}`] = VolatileOrganicCompoundPeakLevel;\r\n    Characteristic[`Community: ${NotificationCode.name}`]                 = NotificationCode;\r\n    Characteristic[`Community: ${NotificationText.name}`]                 = NotificationText;\r\n    Characteristic[`Community: ${LastEventTime.name}`]                    = LastEventTime;\r\n    Characteristic[`Community: ${DownloadSpeed.name}`]                    = DownloadSpeed;\r\n    Characteristic[`Community: ${UploadSpeed.name}`]                      = UploadSpeed;\r\n    Characteristic[`Community: ${Ping.name}`]                             = Ping;\r\n    Characteristic[`Community: ${Latency.name}`]                          = Latency;\r\n    Characteristic[`Community: ${DewPoint.name}`]                         = DewPoint;\r\n    Characteristic[`Community: ${InputVoltageAC.name}`]                   = InputVoltageAC;\r\n    Characteristic[`Community: ${OutputVoltageAC.name}`]                  = OutputVoltageAC;\r\n    Characteristic[`Community: ${BatteryVoltageDC.name}`]                 = BatteryVoltageDC;\r\n    Characteristic[`Community: ${UPSLoadPercent.name}`]                   = UPSLoadPercent;\r\n\r\n    Service[`Community: ${AudioDeviceService.name}`]            = AudioDeviceService;\r\n    Service[`Community: ${PlaybackDeviceService.name}`]         = PlaybackDeviceService;\r\n    Service[`Community: ${MediaInformationService.name}`]       = MediaInformationService;\r\n    Service[`Community: ${StillImageService.name}`]             = StillImageService;\r\n    Service[`Community: ${SecurityCameraService.name}`]         = SecurityCameraService;\r\n    Service[`Community: ${AtmosphericPressureSensor.name}`]     = AtmosphericPressureSensor;\r\n    Service[`Community: ${NoiseLevelSensor.name}`]              = NoiseLevelSensor;\r\n    Service[`Community: ${AirFlowSensor.name}`]                 = AirFlowSensor;\r\n    Service[`Community: ${NitrogenDioxideSensor.name}`]         = NitrogenDioxideSensor;\r\n    Service[`Community: ${OzoneSensor.name}`]                   = OzoneSensor;\r\n    Service[`Community: ${SodiumDioxideSensor.name}`]           = SodiumDioxideSensor;\r\n    Service[`Community: ${VolatileOrganicCompoundSensor.name}`] = VolatileOrganicCompoundSensor;\r\n    Service[`Community: ${NotificationService.name}`]           = NotificationService;\r\n\r\n    hapTypesImported = true;\r\n}\r\n\r\nexport class Timestamp extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Timestamp',\r\n            'FF000001-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class AudioDataURL extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Audio URL',\r\n            'FF000002-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n    }\r\n}\r\n\r\nexport class VideoDataURL extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Video URL',\r\n            'FF000003-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n    }\r\n}\r\n\r\nexport class AudioVolume extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Audio Volume',\r\n            '00001001-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format  : Formats.UINT8,\r\n                unit    : Units.PERCENTAGE,\r\n                maxValue: 100,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class Muting extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Muting',\r\n            '00001002-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class PlaybackState extends Characteristic {\r\n    static PLAYING = 0;\r\n    static PAUSED  = 1;\r\n    static STOPPED = 2;\r\n\r\n    constructor() {\r\n        super(\r\n            'Playback State',\r\n            '00002001-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class SkipForward extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Skip Forward',\r\n            '00002002-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.BOOL,\r\n                perms : [Perms.PAIRED_WRITE],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class SkipBackward extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Skip Backward',\r\n            '00002003-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.BOOL,\r\n                perms : [Perms.PAIRED_WRITE],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class ShuffleMode extends Characteristic {\r\n    //NOTE: If GROUP or SET is not supported, accessories should coerce to ALBUM.\r\n    // If ALBUM is not supported, coerce to ITEM.\r\n    // In general, it is recommended for apps to only assume OFF, ITEM, and ALBUM\r\n    // are supported unless it is known that the accessory supports other settings.\r\n    static OFF        = 0;\r\n    //NOTE: INDIVIDUAL is deprecated.\r\n    static INDIVIDUAL = 1;\r\n    static ITEM       = 1;\r\n    static GROUP      = 2; // e.g., iTunes \"Groupings\"\r\n    static ALBUM      = 3; // e.g., album or season\r\n    static SET        = 4; // e.g., T.V. Series or album box set\r\n    constructor() {\r\n        super(\r\n            'Shuffle Mode',\r\n            '00002004-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY]\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class RepeatMode extends Characteristic {\r\n    static OFF = 0;\r\n    static ONE = 1;\r\n    static ALL = 2;\r\n\r\n    constructor() {\r\n        super(\r\n            'Repeat Mode',\r\n            '00002005-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class PlaybackSpeed extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Playback Speed',\r\n            '00002006-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.FLOAT,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class MediaCurrentPosition extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Current Position',\r\n            '00002007-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.FLOAT, // In seconds\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY],\r\n            },\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport class MediaItemName extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Name',\r\n            '00003001-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class MediaItemAlbumName extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Album Name',\r\n            '00003002-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class MediaItemArtist extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Artist',\r\n            '00003003-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY],\r\n            },\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n\r\n}\r\n\r\nexport class MediaItemDuration extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Duration',\r\n            '00003005-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.FLOAT, // In seconds\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class StillImage extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Still Image',\r\n            '00004001-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.DATA,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// Also known as MIME type...\r\nexport class MediaTypeIdentifier extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Type Identifier',\r\n            '00004002-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class MediaWidth extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Width',\r\n            '00004003-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.UINT32,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n\r\nexport class MediaHeight extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Media Width',\r\n            '00004004-0000-1000-8000-135D67EC4377',\r\n            {\r\n                format: Formats.UINT32,\r\n                perms : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// courtesy of https://gist.github.com/gomfunkel/b1a046d729757120907c\r\n\r\nexport class Volts extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Volts',\r\n            'E863F10A-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT16,\r\n                unit    : 'V',\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class Amperes extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Amps',\r\n            'E863F126-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT16,\r\n                unit    : \"A\",\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class Watts extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Consumption',\r\n            'E863F10D-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT16,\r\n                unit    : 'W',\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class VoltAmperes extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Apparent Power',\r\n            'E863F110-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT16,\r\n                unit    : 'VA',\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class KilowattHours extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Total Consumption',\r\n            'E863F10C-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT32,\r\n                unit    : \"kWh\",\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        )\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class KilowattVoltAmpereHour extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Apparent Energy',\r\n            'E863F127-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT32,\r\n                unit    : \"kVAh\",\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class BatteryLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Battery Level',\r\n            'E863F11B-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT16,\r\n                unit    : Units.PERCENTAGE,\r\n                maxValue: 100,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ]\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport class EveAirQuality extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Eve Air Quality',\r\n            'E863F10B-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format  : Formats.UINT16,\r\n                unit    : \"ppm\",\r\n                maxValue: 5000,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY],\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/ebaauw/homebridge-lib\r\n// i should probably submit a PR for everything here that isn't in that repo...\r\n\r\nexport class EveOpenDuration extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Eve Open Duration',\r\n            'E863F118-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format: Formats.UINT32,\r\n                unit  : Units.SECONDS, // since last reset\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY, Perms.PAIRED_WRITE]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class EveClosedDuration extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Eve Closed Duration',\r\n            'E863F119-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format: Formats.UINT32,\r\n                unit  : Units.SECONDS, // since last reset\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY, Perms.PAIRED_WRITE]\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport class EveLastAction extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Eve Last Activation',\r\n            'E863F11A-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format: Formats.UINT32,\r\n                unit  : Units.SECONDS, // since last reset\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class EveTimesOpened extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Eve Times Opened',\r\n            'E863F129-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format: Formats.UINT32,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport class EveResetTotal extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Eve Reset Total',\r\n            'E863F112-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format: Formats.UINT32,\r\n                unit  : Units.SECONDS, // since 2001/01/01\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY, Perms.PAIRED_WRITE]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n\r\n// courtesy of https://github.com/robi-van-kinobi/homebridge-cubesensors\r\n\r\nexport class AtmosphericPressureLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Barometric Pressure',\r\n            '28FDA6BC-9C2A-4DEA-AAFD-B49DB6D155AB',\r\n            {\r\n                format  : Formats.UINT8,\r\n                unit    : \"mbar\",\r\n                minValue: 800,\r\n                maxValue: 1200,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport class NoiseLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Noise Level',\r\n            '2CD7B6FD-419A-4740-8995-E3BFE43735AB',\r\n            {\r\n                format  : Formats.UINT8,\r\n                unit    : \"dB\",\r\n                minValue: 0,\r\n                maxValue: 200,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/homespun/homebridge-platform-snmp\r\n\r\nexport class AirFlow extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Air Flow',\r\n            '49C8AE5A-A3A5-41AB-BF1F-12D5654F9F41',\r\n            {\r\n                format  : Formats.UINT8,\r\n                unit    : \"m/s\",\r\n                minValue: 0,\r\n                maxValue: 135,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class NitrogenDioxideDetected extends Characteristic {\r\n    static NO2_LEVELS_NORMAL   = 0;\r\n    static NO2_LEVELS_ABNORMAL = 1;\r\n\r\n    constructor() {\r\n        super(\r\n            'Nitrogen Dioxide Detected',\r\n            'D737B40A-3AF0-4316-950F-76090B98C5CF',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class NitrogenDioxideLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Nitrogen Dioxide Level',\r\n            'B762A2AF-D9D0-4A79-814A-E9EBAB0ED290',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppm\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class NitrogenDioxidePeakLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Nitrogen Dioxide Peak Level',\r\n            'B6594847-7B88-496C-A1A0-B7860F3D7601',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppm\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/homespun/homebridge-platform-aqe\r\n\r\nexport class OzoneDetected extends Characteristic {\r\n    static O3_LEVELS_NORMAL   = 0;\r\n    static O3_LEVELS_ABNORMAL = 1;\r\n\r\n    constructor() {\r\n        super(\r\n            'Ozone Detected',\r\n            '0168FA60-5CF4-4314-AA45-0F84E389A093',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class OzoneLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Ozone Level',\r\n            '03C17FD9-672E-42F5-8DD4-30C6822C739A',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppb\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class OzonePeakLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Ozone Peak Level',\r\n            '550EE1FF-FC66-4BB6-A1C1-4B0A07109AE3',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppb\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class SodiumDioxideDetected extends Characteristic {\r\n    static SO2_LEVELS_NORMAL   = 0;\r\n    static SO2_LEVELS_ABNORMAL = 1;\r\n\r\n    constructor() {\r\n        super(\r\n            'Sodium Dioxide Detected',\r\n            '4D237DAB-1CB6-4D52-B446-4667F58F7D28',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class SodiumDioxideLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Sodium Dioxide Level',\r\n            '66C4D315-FBEF-470E-9434-B047679F1141',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppb\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class SodiumDioxidePeakLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Sodium Dioxide Peak Level',\r\n            '4CD6F648-2F92-43D8-86DF-0E8DE75E033B',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppb\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class VolatileOrganicCompoundDetected extends Characteristic {\r\n    static VOC_LEVELS_NORMAL   = 0;\r\n    static VOC_LEVELS_ABNORMAL = 1;\r\n\r\n    constructor() {\r\n        super(\r\n            'Volatile Organic Compound Detected',\r\n            '65DBC0F5-C40B-4E04-ADED-DC70031B0B82',\r\n            {\r\n                format: Formats.UINT8,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class VolatileOrganicCompoundLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Volatile Organic Compound Level',\r\n            '35C4C797-193D-4998-879F-A08514E87897',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppb\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class VolatileOrganicCompoundPeakLevel extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Volatile Organic Compound Peak Level',\r\n            'A62CB784-1916-4BDF-B840-BDB9F8A264E9',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"ppb\",\r\n                minValue: 0,\r\n                maxValue: 1500,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class NotificationCode extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Notification Code',\r\n            '381C47A3-CB06-4177-8E3D-A1B4C22EB031',\r\n            {\r\n                format  : Formats.UINT8,\r\n                maxValue: 255,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.PAIRED_WRITE, Perms.NOTIFY]\r\n            }\r\n        );\r\n        this.value = 255;\r\n    }\r\n}\r\n\r\nexport class NotificationText extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Notification Text',\r\n            'e244ca80-813e-423a-86bd-02f293b857a0',\r\n            {\r\n                format: Formats.STRING,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// used by Elgato Eve, number of seconds since the epoch...\r\n\r\nexport class LastEventTime extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Last Event Time',\r\n            'E863F11A-079E-48FF-8F27-9C2605A29F52',\r\n            {\r\n                format: Formats.UINT32,\r\n                perms : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/SeydX/homebridge-broadband\r\n\r\nexport class DownloadSpeed extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Download Speed',\r\n            'DA70DA1F-DA72-4DB3-81C2-99F158A15A9A',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : 'Mbps',\r\n                maxValue: 1024,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class UploadSpeed extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Upload Speed',\r\n            'AB74289E-D516-4A12-B2AE-1B32A74C035F',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : 'Mbps',\r\n                maxValue: 1024,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class Ping extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Ping',\r\n            'CC65A09A-E052-410C-981D-C11BDE2C3F60',\r\n            {\r\n                format  : Formats.INT,\r\n                unit    : 'ms',\r\n                maxValue: 999,\r\n                minValue: 0,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class Latency extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Latency',\r\n            '60EC80F9-F799-4E8E-B613-098E7EBCBB0B',\r\n            {\r\n                format  : Formats.INT,\r\n                unit    : 'ms',\r\n                maxValue: 999,\r\n                minValue: 0,\r\n                minStep : 0.001,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// https://github.com/naofireblade/homebridge-weather-plus\r\n\r\nexport class DewPoint extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Dew Point',\r\n            '095c46e2-278e-4e3c-b9e7-364622a0f501',\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : Units.CELSIUS,\r\n                maxValue: 50,\r\n                minValue: -50,\r\n                minStep : 0.1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/ToddGreenfield/homebridge-nut\r\n\r\nexport class InputVoltageAC extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Input Voltage AC',\r\n            uuid.generate('CommunityTypes:usagedevice:InputVoltageAC'),\r\n            // UUID.generate('CommunityTypes:usagedevice:InputVoltageAC'),\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"V\",\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            },\r\n        );\r\n    }\r\n}\r\n\r\nexport class OutputVoltageAC extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Output Voltage AC',\r\n            uuid.generate('CommunityTypes:usagedevice:OutputVoltageAC'),\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"V\",\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class BatteryVoltageDC extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'Battery Voltage DC',\r\n            uuid.generate('CommunityTypes:usagedevice:BatteryVoltageDC'),\r\n            {\r\n                format  : Formats.FLOAT,\r\n                unit    : \"V\",\r\n                minValue: 0,\r\n                maxValue: 65535,\r\n                minStep : 0.01,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\nexport class UPSLoadPercent extends Characteristic {\r\n    constructor() {\r\n        super(\r\n            'UPS Load',\r\n            uuid.generate('CommunityTypes:usagedevice:UPSLoadPercent'),\r\n            {\r\n                format  : Formats.UINT8,\r\n                unit    : Units.PERCENTAGE,\r\n                minValue: 0,\r\n                maxValue: 100,\r\n                minStep : 1,\r\n                perms   : [Perms.PAIRED_READ, Perms.NOTIFY]\r\n            }\r\n        );\r\n        // this.value = this.getDefaultValue();\r\n    }\r\n}\r\n\r\n// Services\r\n\r\nexport class AudioDeviceService extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '00000001-0000-1000-8000-135D67EC4377',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(AudioVolume);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Muting);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class PlaybackDeviceService extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '00000002-0000-1000-8000-135D67EC4377',\r\n            subtype\r\n        );\r\n        // Required Characteristics\r\n        this.addCharacteristic(PlaybackState);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(SkipForward);\r\n        this.addOptionalCharacteristic(SkipBackward);\r\n        this.addOptionalCharacteristic(ShuffleMode);\r\n        this.addOptionalCharacteristic(RepeatMode);\r\n        this.addOptionalCharacteristic(PlaybackSpeed);\r\n        this.addOptionalCharacteristic(MediaCurrentPosition);\r\n        this.addOptionalCharacteristic(MediaItemName);\r\n        this.addOptionalCharacteristic(MediaItemAlbumName);\r\n        this.addOptionalCharacteristic(MediaItemArtist);\r\n        this.addOptionalCharacteristic(MediaItemDuration);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n        // Artwork characteristics...would be better reported in a separate service?\r\n        this.addOptionalCharacteristic(StillImage);\r\n        this.addOptionalCharacteristic(MediaTypeIdentifier);\r\n        this.addOptionalCharacteristic(MediaWidth);\r\n        this.addOptionalCharacteristic(MediaHeight);\r\n    }\r\n}\r\n\r\n// A media information service that has no playback controls, for e.g. DAB radio...\r\nexport class MediaInformationService extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '00000003-0000-1000-8000-135D67EC4377',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(MediaItemName);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(MediaItemAlbumName);\r\n        this.addOptionalCharacteristic(MediaItemArtist);\r\n        this.addOptionalCharacteristic(MediaItemDuration);\r\n        this.addOptionalCharacteristic(MediaCurrentPosition);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n        // Artwork characteristics...would be better reported in a separate service?\r\n        this.addOptionalCharacteristic(StillImage);\r\n        this.addOptionalCharacteristic(MediaTypeIdentifier);\r\n        this.addOptionalCharacteristic(MediaWidth);\r\n        this.addOptionalCharacteristic(MediaHeight);\r\n    }\r\n}\r\n\r\nexport class StillImageService extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '00000004-0000-1000-8000-135D67EC4377',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(StillImage);\r\n        this.addCharacteristic(MediaTypeIdentifier);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(MediaWidth);\r\n        this.addOptionalCharacteristic(MediaHeight);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class SecurityCameraService extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '00000005-0000-1000-8000-135D67EC4377',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(StillImage);\r\n        this.addCharacteristic(MediaTypeIdentifier);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Timestamp);\r\n        this.addOptionalCharacteristic(MediaWidth);\r\n        this.addOptionalCharacteristic(MediaHeight);\r\n        this.addOptionalCharacteristic(VideoDataURL);\r\n        this.addOptionalCharacteristic(AudioDataURL);\r\n        this.addOptionalCharacteristic(Characteristic.MotionDetected);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/robi-van-kinobi/homebridge-cubesensors\r\n\r\nexport class AtmosphericPressureSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            'B77831FD-D66A-46A4-B66D-FD7EE8DFE3CE',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(AtmosphericPressureLevel);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class NoiseLevelSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '28FDA6BC-9C2A-4DEA-AAFD-B49DB6D155AB',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(NoiseLevel);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/homespun/homebridge-platform-snmp\r\n\r\nexport class AirFlowSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            'AF5C192E-420F-4A13-AB67-B8F3968A4935',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(AirFlow);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class NitrogenDioxideSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '9F6B797D-D43B-4C88-9AA0-57018AB8A91E',\r\n            subtype\r\n        )\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(NitrogenDioxideDetected);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(NitrogenDioxideLevel);\r\n        this.addOptionalCharacteristic(NitrogenDioxidePeakLevel);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\n// courtesy of https://github.com/homespun/homebridge-platform-aqe\r\n\r\nexport class OzoneSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            'B91C2BD6-D071-4F49-A23B-20721AC6CCEB',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(OzoneDetected);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(OzoneLevel);\r\n        this.addOptionalCharacteristic(OzonePeakLevel);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class SodiumDioxideSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            'FE7CFB1F-12D0-405D-86FD-7E268D65C453',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(SodiumDioxideDetected);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(SodiumDioxideLevel);\r\n        this.addOptionalCharacteristic(SodiumDioxidePeakLevel);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class VolatileOrganicCompoundSensor extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '776E34BC-1660-46EC-A33D-2DFE5B958699',\r\n            subtype\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(VolatileOrganicCompoundDetected);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.StatusActive);\r\n        this.addOptionalCharacteristic(Characteristic.StatusFault);\r\n        this.addOptionalCharacteristic(Characteristic.StatusLowBattery);\r\n        this.addOptionalCharacteristic(VolatileOrganicCompoundLevel);\r\n        this.addOptionalCharacteristic(VolatileOrganicCompoundPeakLevel);\r\n        this.addOptionalCharacteristic(Characteristic.StatusTampered);\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n    }\r\n}\r\n\r\nexport class NotificationService extends Service {\r\n    constructor(displayName, subtype) {\r\n        super(\r\n            displayName,\r\n            '074D8CE9-5B4B-48D5-9990-D98850C2F3FE',\r\n            subtype,\r\n        );\r\n\r\n        // Required Characteristics\r\n        this.addCharacteristic(NotificationCode);\r\n        this.addCharacteristic(NotificationText);\r\n\r\n        // Optional Characteristics\r\n        this.addOptionalCharacteristic(Characteristic.Name);\r\n        this.addOptionalCharacteristic(LastEventTime);\r\n    }\r\n}\r\n","import { TYahkaFunctionBase } from './functions.base';\r\nexport { IConversionFunction } from '../yahka.interfaces';\r\nexport abstract class TIOBrokerConversionBase extends TYahkaFunctionBase {\r\n    constructor(adapter: ioBroker.Adapter, logIdentifier: string = '') {\r\n        super(adapter, logIdentifier);\r\n    }\r\n\r\n    protected static castToNumber(value: any): number {\r\n        if (value === undefined) {\r\n            return undefined;\r\n        }\r\n        if (typeof value !== 'number') {\r\n            return Number(value);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    protected static castToBool(value: any): boolean {\r\n        return !!value;\r\n    }\r\n\r\n    protected static parameterValueByName(parameters: any, name: string): any {\r\n        let paramArray;\r\n        if (typeof parameters === 'object') {\r\n            paramArray = parameters\r\n        } else {\r\n            paramArray = JSON.parse(parameters);\r\n        }\r\n        if (paramArray === undefined) {\r\n            return undefined;\r\n        }\r\n        return paramArray[name];\r\n    }\r\n}\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\nimport { Characteristic } from 'hap-nodejs';\r\n\r\nexport class TIoBrokerConversion_HomematicDirection_To_PositionState extends TIOBrokerConversionBase implements IConversionFunction {\r\n    toHomeKit(value: any) {\r\n        let num = TIOBrokerConversionBase.castToNumber(value)\r\n        let result = undefined;\r\n        switch (num) {\r\n            case 0:\r\n                result = Characteristic.PositionState.STOPPED;\r\n                break;\r\n            case 1:\r\n                result = Characteristic.PositionState.INCREASING;\r\n                break;\r\n            case 2:\r\n                result = Characteristic.PositionState.DECREASING;\r\n                break;\r\n            default:\r\n                result = Characteristic.PositionState.STOPPED;\r\n                break;\r\n        }\r\n        this.adapter.log.debug(`HomematicDirectionToHomekitPositionState.toHomeKit, from ${JSON.stringify(value)}[${typeof value}] to ${JSON.stringify(result)}`);\r\n        return result;\r\n    }\r\n\r\n    toIOBroker(value: any) {\r\n        let num = TIOBrokerConversionBase.castToNumber(value)\r\n        let result = undefined;\r\n        switch (num) {\r\n            case Characteristic.PositionState.STOPPED:\r\n                result = 0;\r\n                break;\r\n            case Characteristic.PositionState.INCREASING:\r\n                result = 1;\r\n                break;\r\n            case Characteristic.PositionState.DECREASING:\r\n                result = 2;\r\n                break;\r\n            default:\r\n                result = 0;\r\n                break;\r\n        }\r\n        this.adapter.log.debug(`HomematicDirectionToHomekitPositionState.toIOBroker, from ${JSON.stringify(value)}[${typeof value}] to ${JSON.stringify(result)}`);\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class TIoBrokerConversion_HomematicControlMode_To_CoolingState extends TIOBrokerConversionBase implements IConversionFunction {\r\n    toHomeKit(value: any) {\r\n        let num = TIOBrokerConversionBase.castToNumber(value)\r\n\r\n        let result = undefined;\r\n        switch (num) {\r\n            case 0:\r\n                result = Characteristic.TargetHeatingCoolingState.AUTO;\r\n                break;\r\n            case 1:\r\n                result = Characteristic.TargetHeatingCoolingState.HEAT;\r\n                break;\r\n            case 2:\r\n                result = Characteristic.TargetHeatingCoolingState.HEAT;\r\n                break;\r\n            case 3:\r\n                result = Characteristic.TargetHeatingCoolingState.HEAT;\r\n                break;\r\n            default:\r\n                result = Characteristic.TargetHeatingCoolingState.OFF;\r\n                break;\r\n        }\r\n        this.adapter.log.debug(`HomematicDirectionToHomekitHeatingCoolingState.toHomeKit, from ${JSON.stringify(value)}[${typeof value}] to ${JSON.stringify(result)}`);\r\n        return result;\r\n    }\r\n\r\n    toIOBroker(value) {\r\n        let num = TIOBrokerConversionBase.castToNumber(value)\r\n\r\n        let result = undefined;\r\n        switch (num) {\r\n            case Characteristic.TargetHeatingCoolingState.OFF:\r\n                result = 0;\r\n                break;\r\n            case Characteristic.TargetHeatingCoolingState.HEAT:\r\n                result = 1;\r\n                break;\r\n            case Characteristic.TargetHeatingCoolingState.COOL:\r\n                result = 0;\r\n                break;\r\n            case Characteristic.TargetHeatingCoolingState.AUTO:\r\n                result = 0;\r\n                break;\r\n            default:\r\n                result = 0;\r\n                break;\r\n        }\r\n        this.adapter.log.debug(`HomematicDirectionToHomekitHeatingCoolingState.toIOBroker, from ${JSON.stringify(value)}[${typeof value}] to ${JSON.stringify(result)}`);\r\n        return result;\r\n    }\r\n}\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\n\r\nexport class TIoBrokerConversion_Inverse extends TIOBrokerConversionBase implements IConversionFunction {\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IConversionFunction {\r\n        let maxValue = TIOBrokerConversionBase.castToNumber(parameters);\r\n        return new TIoBrokerConversion_Inverse(adapter, maxValue);\r\n    }\r\n\r\n    constructor(adapter: ioBroker.Adapter, protected maxValue: number) {\r\n        super(adapter);\r\n    }\r\n\r\n    toHomeKit(value: any) {\r\n        let num: number = TIOBrokerConversionBase.castToNumber(value)\r\n        let newValue = this.maxValue - num;\r\n        this.adapter.log.debug(`inverse: converting value to homekit: ${value} to ${newValue}`);\r\n        return newValue;\r\n    }\r\n\r\n    toIOBroker(value: any) {\r\n        let num: number = TIOBrokerConversionBase.castToNumber(value)\r\n        let newValue = this.maxValue - num;\r\n        this.adapter.log.debug(`inverse: converting value to ioBroker: ${value} to ${newValue}`);\r\n        return newValue;\r\n    }\r\n}\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\n\r\nexport class TIoBrokerConversion_Invert extends TIOBrokerConversionBase implements IConversionFunction {\r\n    public toHomeKit(value: any): boolean {\r\n        return !TIOBrokerConversionBase.castToBool(value);\r\n    }\r\n\r\n    public toIOBroker(value: any): boolean {\r\n        return !TIOBrokerConversionBase.castToBool(value);\r\n    }\r\n}\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\n\r\nexport interface IIoBrokerConversion_MapEntry {\r\n    left: any;\r\n    right: any;\r\n}\r\n\r\nexport interface IIoBrokerConversion_Map_Parameters {\r\n    mappings: IIoBrokerConversion_MapEntry[];\r\n}\r\n\r\nexport function isMultiStateParameter(params: any): params is IIoBrokerConversion_Map_Parameters {\r\n    return 'mappings' in params;\r\n}\r\n\r\nexport class TIoBrokerConversion_Map extends TIOBrokerConversionBase implements IConversionFunction {\r\n    protected mappingArrayToHomeKit = new Map<string, any>();\r\n\r\n    protected mappingArrayToIOBroker = new Map<string, any>();\r\n\r\n    private jsonReplacer = (key, value) => String(value);\r\n\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IConversionFunction {\r\n        if (!isMultiStateParameter(parameters)) {\r\n            return undefined;\r\n        }\r\n\r\n        return new TIoBrokerConversion_Map(adapter, parameters);\r\n    }\r\n\r\n    constructor(adapter: ioBroker.Adapter, protected parameters: IIoBrokerConversion_Map_Parameters) {\r\n        super(adapter, 'TIoBrokerConversion_Map');\r\n        this.buildMappingArray();\r\n    }\r\n\r\n    buildMappingArray() {\r\n        for(let mapDef of this.parameters.mappings) {\r\n            let leftStr = JSON.stringify(mapDef.left, this.jsonReplacer);\r\n            let rightStr = JSON.stringify(mapDef.right, this.jsonReplacer);\r\n\r\n            this.mappingArrayToHomeKit.set(leftStr, mapDef.right);\r\n            this.mappingArrayToIOBroker.set(rightStr, mapDef.left);\r\n        }\r\n    }\r\n\r\n    toHomeKit(value: any) {\r\n        let ioValueStr = JSON.stringify(value, this.jsonReplacer);\r\n        return this.mappingArrayToHomeKit.get(ioValueStr);\r\n    }\r\n\r\n    toIOBroker(value: any) {\r\n        let hkValueStr = JSON.stringify(value, this.jsonReplacer);\r\n        return this.mappingArrayToIOBroker.get(hkValueStr);\r\n    }\r\n}\r\n","import { IConversionFunction } from '../yahka.interfaces';\r\nimport { TIOBrokerConversionBase } from './conversion.base';\r\n\r\nexport class TIoBrokerConversion_Passthrough extends TIOBrokerConversionBase implements IConversionFunction {\r\n    toHomeKit(value: any) {\r\n        return value\r\n    }\r\n\r\n    toIOBroker(value: any) {\r\n        return value\r\n    }\r\n}\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\n\r\nexport class TIoBrokerConversion_Round extends TIOBrokerConversionBase implements IConversionFunction {\r\n    public toHomeKit(value: any): number {\r\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\r\n        return Math.round(num);\r\n    }\r\n\r\n    public toIOBroker(value: any): number {\r\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\r\n        return Math.round(num);\r\n    }\r\n}\r\n\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\n\r\nexport interface IIoBrokerConversionScaleParameters {\r\n    'homekit.min': number;\r\n    'homekit.max': number;\r\n    'iobroker.min': number;\r\n    'iobroker.max': number;\r\n}\r\n\r\nexport class TIoBrokerConversion_Scale extends TIOBrokerConversionBase implements IConversionFunction {\r\n    static isScaleParameter(parameters: any): parameters is IIoBrokerConversionScaleParameters {\r\n        const castedParam = <IIoBrokerConversionScaleParameters>parameters;\r\n        return castedParam['homekit.min'] !== undefined &&\r\n            castedParam['homekit.max'] !== undefined &&\r\n            castedParam['iobroker.min'] !== undefined &&\r\n            castedParam['iobroker.max'] !== undefined;\r\n    }\r\n\r\n    constructor(adapter: ioBroker.Adapter, protected parameters: IIoBrokerConversionScaleParameters, protected logName: string) {\r\n        super(adapter);\r\n        if (!TIoBrokerConversion_Scale.isScaleParameter(parameters)) {\r\n            this.parameters = {\r\n                'homekit.min': 0,\r\n                'homekit.max': 1,\r\n                'iobroker.min': 0,\r\n                'iobroker.max': 1\r\n            };\r\n        }\r\n    }\r\n\r\n    public toHomeKit(value: any): number {\r\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\r\n        let homeKitMax = this.parameters['homekit.max'];\r\n        let ioBrokerMax = this.parameters['iobroker.max'];\r\n        let homeKitMin = this.parameters['homekit.min'];\r\n        let ioBrokerMin = this.parameters['iobroker.min'];\r\n        let newValue = ((num - ioBrokerMin) / (ioBrokerMax - ioBrokerMin)) * (homeKitMax - homeKitMin) + homeKitMin;\r\n        this.adapter.log.debug(`${this.logName}: converting value to homekit: ${value} to ${newValue}`);\r\n        return newValue;\r\n    }\r\n\r\n    public toIOBroker(value: any): number {\r\n        let num: number = TIOBrokerConversionBase.castToNumber(value);\r\n        let homeKitMax = this.parameters['homekit.max'];\r\n        let ioBrokerMax = this.parameters['iobroker.max'];\r\n        let homeKitMin = this.parameters['homekit.min'];\r\n        let ioBrokerMin = this.parameters['iobroker.min'];\r\n        let newValue = ((num - homeKitMin) / (homeKitMax - homeKitMin)) * (ioBrokerMax - ioBrokerMin) + ioBrokerMin;\r\n        this.adapter.log.debug(`${this.logName}: converting value to ioBroker: ${value} to ${newValue}`);\r\n        return newValue;\r\n    }\r\n}\r\n\r\nexport class TIoBrokerConversion_Scale_Rounded extends TIoBrokerConversion_Scale {\r\n    public toHomeKit(value: any): number {\r\n        return Math.round(super.toHomeKit(value));\r\n    }\r\n\r\n    public toIOBroker(value: any): number {\r\n        return Math.round(super.toIOBroker(value));\r\n    }\r\n}\r\n","import { TIOBrokerConversionBase, IConversionFunction } from './conversion.base';\r\n\r\n\r\nexport interface IIoBrokerConversionScriptParameters {\r\n    toHomeKit: string;\r\n    toIOBroker: string;\r\n}\r\n\r\nexport class TIoBrokerConversion_Script extends TIOBrokerConversionBase implements IConversionFunction {\r\n    static isScriptParameter(parameters: any): parameters is IIoBrokerConversionScriptParameters {\r\n        const castedParam = <IIoBrokerConversionScriptParameters>parameters;\r\n        return castedParam['toHomeKit'] !== undefined &&\r\n            castedParam['toIOBroker'] !== undefined;\r\n    }\r\n\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IConversionFunction {\r\n        let params: IIoBrokerConversionScriptParameters;\r\n        if (TIoBrokerConversion_Script.isScriptParameter(parameters)) {\r\n            params = parameters;\r\n        } else {\r\n            params = {\r\n                toHomeKit: 'return value',\r\n                toIOBroker: 'return value'\r\n            }\r\n        }\r\n        return new TIoBrokerConversion_Script(adapter, params);\r\n    }\r\n\r\n    private toHKFunction: Function;\r\n    private toIOFunction: Function;\r\n\r\n    constructor(adapter: ioBroker.Adapter, protected parameters: IIoBrokerConversionScriptParameters) {\r\n        super(adapter);\r\n        this.toHKFunction = new Function('value', this.parameters.toHomeKit);\r\n        this.toIOFunction = new Function('value', this.parameters.toIOBroker);\r\n    }\r\n\r\n    toHomeKit(value: any) {\r\n        let newValue = this.toHKFunction(value);\r\n        this.adapter.log.debug(`script: converting value to homekit: ${value} to ${newValue}`);\r\n        return newValue;\r\n    }\r\n    toIOBroker(value: any) {\r\n        let newValue = this.toIOFunction(value);\r\n        this.adapter.log.debug(`script: converting value to ioBroker: ${value} to ${newValue}`);\r\n        return newValue;\r\n    }\r\n}","import { IInOutChangeNotify, ILogger } from '../yahka.interfaces';\r\nimport { ISubscriptionRequester, ISubscriptionRequest } from '../yahka.ioBroker-adapter';\r\nimport { YahkaLogger } from '../shared/yahka.logger';\r\n\r\nexport abstract class TYahkaFunctionBase implements ISubscriptionRequester {\r\n    public subscriptionRequests: ISubscriptionRequest[] = [];\r\n    protected stateCache = new Map<string, ioBroker.State>();\r\n    protected log: ILogger;\r\n\r\n    constructor(protected adapter: ioBroker.Adapter, private logIdentifier: string = '') {\r\n        this.log = new YahkaLogger(this.adapter, this.logIdentifier);\r\n    }\r\n\r\n    protected addSubscriptionRequest(stateName: string) {\r\n        let subscriptionEvent = this.subscriptionEvent.bind(this, stateName);\r\n        this.subscriptionRequests.push({\r\n            subscriptionType: 'state',\r\n            subscriptionIdentifier: stateName,\r\n            subscriptionEvent: subscriptionEvent\r\n        });\r\n    }\r\n\r\n    protected shouldStateBeFiltered(stateName: string, ioState: ioBroker.State): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected readValueFromCache(stateName: string): ioBroker.State {\r\n        if (this.stateCache.has(stateName)) {\r\n            return this.stateCache.get(stateName);\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    private updateCache(stateName: string, ioState: ioBroker.State): boolean {\r\n        let needUpdate = false;\r\n        if (this.stateCache.has(stateName)) {\r\n            let curVal = this.stateCache.get(stateName);\r\n            needUpdate = curVal?.val !== ioState?.val;\r\n        } else {\r\n            needUpdate = true;\r\n        }\r\n\r\n        if (needUpdate)\r\n            this.stateCache.set(stateName, ioState);\r\n        return needUpdate;\r\n    }\r\n\r\n    subscriptionEvent(stateName: string, ioState: ioBroker.State, callback: IInOutChangeNotify) {\r\n        this.log.debug(`change event from ioBroker via [${stateName}]${JSON.stringify(ioState)}`);\r\n        if (this.shouldStateBeFiltered(stateName, ioState)) {\r\n            this.log.debug('state was filtered - notification is canceled');\r\n            return;\r\n        }\r\n\r\n        let cacheChange = this.updateCache(stateName, ioState);\r\n        if (!cacheChange) {\r\n            this.log.debug('state value already in cache - notification is canceled');\r\n            return;\r\n        }\r\n\r\n        this.cacheChanged(stateName, callback);\r\n    }\r\n\r\n    protected cacheChanged(stateName: string, callback: IInOutChangeNotify) {\r\n\r\n    }\r\n}\r\n\r\n","import { IInOutFunction } from './iofunc.base';\r\nimport { IConversionFunction } from './conversion.base';\r\ninterface IObjectDictionary<T> {\r\n    [name: string]: T;\r\n}\r\n\r\ntype FactoryFunction<T> = (adapter: ioBroker.Adapter, parameters: any) => T;\r\n\r\nexport const inOutFactory: IObjectDictionary<FactoryFunction<IInOutFunction>> = {};\r\nexport const conversionFactory: IObjectDictionary<FactoryFunction<IConversionFunction>> = {};\r\n\r\nexport const functionFactory = {\r\n    createInOutFunction: function (adapter: ioBroker.Adapter, inOutFunction: string, inOutParameters?: any): IInOutFunction {\r\n        if (!(inOutFunction in inOutFactory))\r\n            return inOutFactory['const'](adapter, inOutParameters);\r\n        return inOutFactory[inOutFunction](adapter, inOutParameters);\r\n    },\r\n    createConversionFunction: function (adapter: ioBroker.Adapter, conversionFunction: string, conversionParameters?: any): IConversionFunction {\r\n        if (!(conversionFunction in conversionFactory))\r\n            return conversionFactory['passthrough'](adapter, conversionParameters);\r\n        return conversionFactory[conversionFunction](adapter, conversionParameters);\r\n    }\r\n};\r\n","import { inOutFactory, conversionFactory } from './functions.factory';\r\nimport { TIoBrokerInOutFunction_State, TIoBrokerInOutFunction_StateDeferred, TIoBrokerInOutFunction_State_OnlyACK } from './iofunc.state';\r\nimport { TIoBrokerInOutFunction_Const } from './iofunc.const';\r\nimport { TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition } from './iofunc.homematic.covering';\r\nimport { TIoBrokerConversion_Passthrough } from './conversion.passthrough';\r\nimport { TIoBrokerConversion_HomematicControlMode_To_CoolingState, TIoBrokerConversion_HomematicDirection_To_PositionState } from './conversion.homekit.homematic';\r\nimport { TIoBrokerConversion_Scale, TIoBrokerConversion_Scale_Rounded } from './conversion.scale';\r\nimport { TIoBrokerConversion_Inverse } from './conversion.inverse';\r\nimport { TIoBrokerConversion_Script } from './conversion.script';\r\nimport { TIoBrokerInOutFunction_MultiState } from './iofunc.multi-state';\r\nimport { TIoBrokerConversion_Map } from './conversion.map';\r\nimport { TIoBrokerInOutFunction_Homematic_Dimmer_On, TIoBrokerInOutFunction_Homematic_Dimmer_Brightness } from './iofunc.homematic.dimmer';\r\nimport { TIoBrokerConversion_Round } from './conversion.round';\r\nimport { TIoBrokerConversion_Invert } from './conversion.invert';\r\n\r\ninOutFactory['ioBroker.State'] = TIoBrokerInOutFunction_State.create;\r\ninOutFactory['ioBroker.MultiState'] = TIoBrokerInOutFunction_MultiState.create;\r\ninOutFactory['ioBroker.State.Defered'] = TIoBrokerInOutFunction_StateDeferred.create;\r\ninOutFactory['ioBroker.State.OnlyACK'] = TIoBrokerInOutFunction_State_OnlyACK.create;\r\ninOutFactory['const'] = TIoBrokerInOutFunction_Const.create;\r\ninOutFactory['ioBroker.homematic.WindowCovering.TargetPosition'] = TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition.create;\r\ninOutFactory['ioBroker.homematic.Dimmer.On'] = TIoBrokerInOutFunction_Homematic_Dimmer_On.create;\r\ninOutFactory['ioBroker.homematic.Dimmer.Brightness'] = TIoBrokerInOutFunction_Homematic_Dimmer_Brightness.create;\r\n\r\nconversionFactory['passthrough'] = (adapter, param) => new TIoBrokerConversion_Passthrough(adapter);\r\nconversionFactory['HomematicDirectionToHomekitPositionState'] = (adapter, param) => new TIoBrokerConversion_HomematicDirection_To_PositionState(adapter);\r\nconversionFactory['HomematicControlModeToHomekitHeathingCoolingState'] = (adapter, param) => new TIoBrokerConversion_HomematicControlMode_To_CoolingState(adapter);\r\nconversionFactory['level255'] = (adapter, param) => new TIoBrokerConversion_Scale(adapter, {\r\n    'homekit.min': 0,\r\n    'homekit.max': 100,\r\n    'iobroker.min': 0,\r\n    'iobroker.max': 255\r\n}, 'level255');\r\nconversionFactory['scaleInt'] = (adapter, param) => new TIoBrokerConversion_Scale_Rounded(adapter, param, 'scaleInt');\r\nconversionFactory['scaleFloat'] = (adapter, param) => new TIoBrokerConversion_Scale(adapter, param, 'scaleFloat');\r\nconversionFactory['hue'] = (adapter, param) => new TIoBrokerConversion_Scale(adapter, {\r\n    'homekit.min': 0,\r\n    'homekit.max': 360,\r\n    'iobroker.min': 0,\r\n    'iobroker.max': 65535\r\n}, 'hue');\r\nconversionFactory['inverse'] = TIoBrokerConversion_Inverse.create;\r\nconversionFactory['script'] = (adapter, param) => new TIoBrokerConversion_Script(adapter, param);\r\n\r\nconversionFactory['map'] = TIoBrokerConversion_Map.create;\r\nconversionFactory['round'] = (adapter, _param) => new TIoBrokerConversion_Round(adapter);\r\nconversionFactory['invert'] = (adapter, _param) => new TIoBrokerConversion_Invert(adapter);\r\n","import { TYahkaFunctionBase } from './functions.base';\r\nimport { IInOutFunction, IInOutChangeNotify } from '../yahka.interfaces';\r\nimport { ISubscriptionRequest, ISubscriptionRequester } from '../yahka.ioBroker-adapter';\r\nexport { IInOutChangeNotify, IInOutFunction } from '../yahka.interfaces';\r\n\r\nexport abstract class TIoBrokerInOutFunctionBase extends TYahkaFunctionBase implements IInOutFunction {\r\n    protected valueForHomeKit: any = undefined;\r\n    protected errorForHomeKit: any = null;\r\n\r\n    public fromIOBroker(callback: (error: any, plainIOValue: any) => void) {\r\n        this.log.debug(`fromIOBroker event - delivering cached value (${JSON.stringify(this.valueForHomeKit)})`);\r\n        callback(null, this.valueForHomeKit);\r\n    }\r\n\r\n    public toIOBroker(plainIoValue: any, callback: () => void) {\r\n        this.log.debug(`writing state to ioBroker: ${JSON.stringify(plainIoValue)}`);\r\n        this.updateIOBrokerValue(plainIoValue, callback);\r\n    }\r\n\r\n    protected cacheChanged(stateName: string, callback: IInOutChangeNotify) {\r\n        try {\r\n            this.valueForHomeKit = this.recalculateHomekitValues(stateName);\r\n            this.errorForHomeKit = null;\r\n        } catch (e) {\r\n            this.errorForHomeKit = e;\r\n        }\r\n\r\n        if (this.valueForHomeKit != null)\r\n            callback(this.valueForHomeKit);\r\n    }\r\n\r\n    protected recalculateHomekitValues(stateName: string) {\r\n        // noop\r\n    }\r\n\r\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\r\n        // to be filled in derived class\r\n    }\r\n}\r\n\r\nexport abstract class TIoBrokerInOutFunction_StateBase implements ISubscriptionRequester, IInOutFunction {\r\n    protected debounceTimer: NodeJS.Timeout = null;\r\n    public subscriptionRequests: ISubscriptionRequest[] = [];\r\n\r\n    constructor(protected adapter: ioBroker.Adapter, protected stateName: string, protected deferredTime: number = 0) {\r\n        this.addSubscriptionRequest(stateName);\r\n    }\r\n\r\n    addSubscriptionRequest(stateName: string) {\r\n        let subscriptionEvent = this.subscriptionEvent.bind(this, stateName);\r\n        this.subscriptionRequests.push({\r\n            subscriptionType: 'state',\r\n            subscriptionIdentifier: stateName,\r\n            subscriptionEvent: subscriptionEvent\r\n        });\r\n    }\r\n\r\n    getValueOnRead(ioState: ioBroker.State): any {\r\n        return ioState?.val;\r\n    }\r\n\r\n    getValueOnNotify(ioState: ioBroker.State): any {\r\n        return ioState?.val;\r\n    }\r\n\r\n    toIOBroker(plainIoValue, callback) {\r\n        this.adapter.log.debug(`writing state to ioBroker [${this.stateName}]: ${JSON.stringify(plainIoValue)}`);\r\n        this.adapter.getForeignState(this.stateName, (error, ioState) => {\r\n            let value = this.getValueOnRead(ioState);\r\n            let valueChanged = value !== plainIoValue;\r\n            this.adapter.log.debug(`checking value change: ${JSON.stringify(value)} != ${JSON.stringify(plainIoValue)} = ${valueChanged}`);\r\n            if (valueChanged) {\r\n                this.adapter.setForeignState(this.stateName, plainIoValue, false, (error) => {\r\n                    if (error)\r\n                        this.adapter.log.error(`setForeignState error [${this.stateName}] to [${JSON.stringify(plainIoValue)}]: ${error}`);\r\n                    callback();\r\n                });\r\n            } else {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n\r\n    fromIOBroker(callback) {\r\n        this.adapter.log.debug(`reading state from ioBroker [${this.stateName}]`);\r\n        this.adapter.getForeignState(this.stateName, (error, ioState) => {\r\n            this.adapter.log.debug(`read state from ioBroker [${this.stateName}]: ${JSON.stringify(ioState)}`);\r\n            if (error)\r\n                this.adapter.log.error(`... with error: ${error}`);\r\n\r\n            let value = this.getValueOnRead(ioState);\r\n            callback(error, value);\r\n        });\r\n    }\r\n\r\n    subscriptionEvent(stateName: string, ioState: ioBroker.State, callback: IInOutChangeNotify) {\r\n        this.adapter.log.debug(`change event from ioBroker via [${this.stateName}]${JSON.stringify(ioState)}`);\r\n        let newValue = this.getValueOnNotify(ioState);\r\n        if (newValue != null)\r\n            this.executeCallback(callback, newValue);\r\n        else\r\n            this.adapter.log.debug('state was filtered - notification is canceled');\r\n    }\r\n\r\n    executeCallback(callback: IInOutChangeNotify, plainIOValue: any) {\r\n        if (this.deferredTime > 0)\r\n            this.setupDeferredChangeEvent(callback, plainIOValue);\r\n        else\r\n            callback(plainIOValue);\r\n    }\r\n\r\n    setupDeferredChangeEvent(callback: IInOutChangeNotify, plainIOValue: any) {\r\n        this.cancelDeferredChangeEvent();\r\n        this.debounceTimer = setTimeout(this.deferredChangeEvent.bind(this, callback, plainIOValue), 150);\r\n    }\r\n\r\n    cancelDeferredChangeEvent() {\r\n        clearTimeout(this.debounceTimer);\r\n        this.debounceTimer = null;\r\n    }\r\n\r\n    deferredChangeEvent(callback: IInOutChangeNotify, plainIOValue: any) {\r\n        this.adapter.log.debug(`[${this.stateName}] firing deferred change event:${JSON.stringify(plainIOValue)}`);\r\n        callback(plainIOValue);\r\n    }\r\n}\r\n","import { IInOutFunction } from './iofunc.base';\r\n\r\nexport class TIoBrokerInOutFunction_Const implements IInOutFunction {\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        return new TIoBrokerInOutFunction_Const(adapter, parameters);\r\n    }\r\n\r\n    constructor(private adapter: ioBroker.Adapter, private parameters: any) {\r\n\r\n    }\r\n\r\n    toIOBroker(ioValue: any, callback: () => void) {\r\n        callback();\r\n    }\r\n\r\n    fromIOBroker(callback: (error: any, plainIOValue: any) => void) {\r\n        callback(null, this.parameters);\r\n    }\r\n}\r\n","import { IInOutFunction, TIoBrokerInOutFunction_StateBase, IInOutChangeNotify } from './iofunc.base';\r\n\r\nexport class TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition extends TIoBrokerInOutFunction_StateBase {\r\n    protected lastWorkingState: boolean = false;\r\n    protected lastAcknowledgedValue: any = undefined;\r\n    protected debounceTimer: NodeJS.Timeout = null;\r\n\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        let p: Array<string>;\r\n\r\n        if (typeof parameters === 'string') {\r\n            p = [parameters];\r\n        } else if (parameters instanceof Array) {\r\n            p = parameters;\r\n        } else {\r\n            p = [];\r\n        }\r\n\r\n        if (p.length == 0) {\r\n            return undefined;\r\n        }\r\n\r\n        let stateName: string = p[0];\r\n        let workingItemName: string;\r\n        if (p.length >= 2) {\r\n            workingItemName = p[1];\r\n        } else {\r\n            let pathNames = stateName.split('.');\r\n            pathNames[pathNames.length - 1] = 'WORKING';\r\n            workingItemName = pathNames.join('.');\r\n        }\r\n\r\n        return new TIoBrokerInOutFunction_HomematicWindowCovering_TargetPosition(adapter, stateName, workingItemName);\r\n    }\r\n\r\n    constructor(protected adapter: ioBroker.Adapter, protected stateName: string, protected workingItem: string) {\r\n        super(adapter, stateName, 0);\r\n        this.addSubscriptionRequest(workingItem);\r\n        adapter.getForeignState(workingItem, (error, ioState) => {\r\n            if (ioState) {\r\n                this.lastWorkingState = Boolean(ioState?.val);\r\n            } else {\r\n                this.lastWorkingState = undefined;\r\n            }\r\n        });\r\n    }\r\n\r\n    subscriptionEvent(stateName: string, ioState: ioBroker.State, callback: IInOutChangeNotify) {\r\n        if (!ioState) {\r\n            return;\r\n        }\r\n\r\n        if (stateName == this.workingItem) {\r\n            this.adapter.log.debug(`[${this.stateName}] got a working item change event: ${JSON.stringify(ioState)}`);\r\n            this.lastWorkingState = Boolean(ioState?.val);\r\n            this.setupDeferredChangeEvent(callback);\r\n        } else if (stateName == this.stateName) {\r\n            this.adapter.log.debug(`[${this.stateName}] got a target state change event:${JSON.stringify(ioState)}`);\r\n            if (ioState.ack) {\r\n                this.lastAcknowledgedValue = ioState?.val;\r\n                this.setupDeferredChangeEvent(callback);\r\n            }\r\n        }\r\n    }\r\n\r\n    setupDeferredChangeEvent(callback: IInOutChangeNotify) {\r\n        this.cancelDeferredChangeEvent();\r\n        this.debounceTimer = setTimeout(this.deferredChangeEvent.bind(this, callback), 150);\r\n    }\r\n\r\n    cancelDeferredChangeEvent() {\r\n        clearTimeout(this.debounceTimer);\r\n        this.debounceTimer = null;\r\n    }\r\n\r\n    deferredChangeEvent(callback: IInOutChangeNotify) {\r\n        if (!this.lastWorkingState) { // only fire callback if the covering does not move\r\n            this.adapter.log.debug(`[${this.stateName}] firing target state change event:${JSON.stringify(this.lastAcknowledgedValue)}`);\r\n            callback(this.lastAcknowledgedValue);\r\n        } else {\r\n            this.adapter.log.debug(`[${this.stateName}] canceling target state change event - covering is working`);\r\n        }\r\n    }\r\n}\r\n","import { TIoBrokerInOutFunctionBase, IInOutFunction, IInOutChangeNotify } from './iofunc.base';\r\nimport { propertyExists } from '../shared/yahka.utils';\r\n\r\nexport interface TIoBrokerInOutFunction_Homematic_Dimmer_Parameter {\r\n    levelState: string;\r\n    restoreToPreviousLevel?: boolean;\r\n    defaultSwitchOnLevel?: number;\r\n}\r\n\r\nexport function isHomematic_Dimmer_Parameter(value: any): value is TIoBrokerInOutFunction_Homematic_Dimmer_Parameter {\r\n    if (value === undefined || value === null || typeof value !== 'object') {\r\n        return false;\r\n    }\r\n    return propertyExists<TIoBrokerInOutFunction_Homematic_Dimmer_Parameter>(value, 'levelState')\r\n}\r\n\r\nexport class TIoBrokerInOutFunction_Homematic_Dimmer_Base extends TIoBrokerInOutFunctionBase {\r\n    protected lastOnLevel: ioBroker.State = { val: undefined, ack: false, ts: undefined, lc: undefined, from: undefined };\r\n\r\n    static parseParameters(parameters: any): TIoBrokerInOutFunction_Homematic_Dimmer_Parameter {\r\n        if (!isHomematic_Dimmer_Parameter(parameters)) {\r\n            return undefined\r\n        }\r\n        return parameters;\r\n    }\r\n\r\n    constructor(adapter: ioBroker.Adapter, functionName: string, protected parameters: TIoBrokerInOutFunction_Homematic_Dimmer_Parameter) {\r\n        super(adapter, `${functionName}[${parameters.levelState}]`);\r\n        this.addSubscriptionRequest(parameters.levelState);\r\n    }\r\n\r\n    protected cacheChanged(stateName: string, callback: IInOutChangeNotify) {\r\n        // save level if we are switching off\r\n        if (stateName === this.parameters.levelState) {\r\n            const cacheValue = this.readValueFromCache(stateName);\r\n            if (parseFloat(cacheValue.val as any) > 0) {\r\n                this.lastOnLevel = cacheValue;\r\n            }\r\n        }\r\n        super.cacheChanged(stateName, callback);\r\n    }\r\n}\r\n\r\nexport class TIoBrokerInOutFunction_Homematic_Dimmer_On extends TIoBrokerInOutFunction_Homematic_Dimmer_Base {\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        let params = TIoBrokerInOutFunction_Homematic_Dimmer_On.parseParameters(parameters);\r\n        if (params === undefined) {\r\n            return undefined\r\n        }\r\n        return new TIoBrokerInOutFunction_Homematic_Dimmer_On(adapter, params);\r\n    }\r\n\r\n    constructor(protected adapter: ioBroker.Adapter, protected parameters: TIoBrokerInOutFunction_Homematic_Dimmer_Parameter) {\r\n        super(adapter, 'Homematic.Dimmer.On', parameters);\r\n    }\r\n\r\n    protected recalculateHomekitValues(stateName: string) {\r\n        let hkValue = this.stateCache.get(this.parameters.levelState);\r\n        return Boolean(parseFloat(hkValue?.val as any) > 0);\r\n    }\r\n\r\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\r\n        setTimeout(() => this.executeIOBrokerValue(plainIoValue, callback), 50);\r\n    }\r\n\r\n    protected executeIOBrokerValue(plainIoValue: any, callback: () => void) {\r\n\r\n        const isSwitchingOn = Boolean(plainIoValue);\r\n        const stateName = this.parameters.levelState;\r\n\r\n        const newOnValue = (this.parameters.restoreToPreviousLevel ? this.lastOnLevel?.val : this.parameters.defaultSwitchOnLevel) || this.parameters.defaultSwitchOnLevel || 100;\r\n        const newOffValue = 0;\r\n        const newValue = isSwitchingOn ? newOnValue : newOffValue;\r\n\r\n        if (isSwitchingOn && this.parameters.restoreToPreviousLevel) {\r\n            this.log.debug(`using previous level for switching on: ${JSON.stringify(this.lastOnLevel?.val)}`);\r\n        }\r\n\r\n        this.log.debug(`writing state to ioBroker [${stateName}]: ${JSON.stringify(newValue)}`);\r\n        this.adapter.getForeignState(stateName, (error, ioState) => {\r\n            let value = parseFloat(ioState?.val as any);\r\n            if (isSwitchingOn && value > 0) {\r\n                this.log.debug(`function should switch on but level is already not equal to 0: ${JSON.stringify(value)}`);\r\n                callback();\r\n                return;\r\n            }\r\n\r\n            let valueChanged = value !== newValue;\r\n            this.log.debug(`checking value change: ${JSON.stringify(value)} != ${JSON.stringify(newValue)} = ${valueChanged}`);\r\n            if (valueChanged) {\r\n                this.adapter.setForeignState(stateName, newValue as any, false, (error) => {\r\n                    if (error) {\r\n                        this.log.error(`setForeignState error [${stateName}] to [${JSON.stringify(newValue)}]: ${error}`);\r\n                        callback();\r\n                    }\r\n                    callback();\r\n                });\r\n            } else {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport class TIoBrokerInOutFunction_Homematic_Dimmer_Brightness extends TIoBrokerInOutFunction_Homematic_Dimmer_Base {\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        let params = TIoBrokerInOutFunction_Homematic_Dimmer_On.parseParameters(parameters);\r\n        if (params === undefined) {\r\n            return undefined\r\n        }\r\n        return new TIoBrokerInOutFunction_Homematic_Dimmer_Brightness(adapter, params);\r\n    }\r\n\r\n    constructor(protected adapter: ioBroker.Adapter, protected parameters: TIoBrokerInOutFunction_Homematic_Dimmer_Parameter) {\r\n        super(adapter, 'Homematic.Dimmer.Brightness', parameters);\r\n    }\r\n\r\n    protected recalculateHomekitValues(stateName: string) {\r\n        let hkValue = this.stateCache.get(this.parameters.levelState);\r\n        return hkValue?.val == 0 ? this.lastOnLevel?.val : hkValue?.val;\r\n    }\r\n\r\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\r\n        const newValue = plainIoValue;\r\n        const stateName = this.parameters.levelState;\r\n\r\n\r\n        this.log.debug(`writing state to ioBroker [${stateName}]: ${JSON.stringify(newValue)}`);\r\n        this.adapter.getForeignState(stateName, (error, ioState) => {\r\n            let value = ioState?.val;\r\n            let valueChanged = value !== newValue;\r\n            this.log.debug(`checking value change: ${JSON.stringify(value)} != ${JSON.stringify(newValue)} = ${valueChanged}`);\r\n            if (valueChanged) {\r\n                this.adapter.setForeignState(stateName, newValue, false, (error) => {\r\n                    if (error) {\r\n                        this.log.error(`setForeignState error [${stateName}] to [${JSON.stringify(newValue)}]: ${error}`);\r\n                        callback();\r\n                    }\r\n                    callback();\r\n                });\r\n            } else {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { TIoBrokerInOutFunctionBase, IInOutFunction } from './iofunc.base';\r\n\r\nexport interface TIoBrokerInOutFunction_MultiStateParameter {\r\n    readState: string;\r\n    writeState?: string;\r\n    onlyAcknowledged?: boolean;\r\n}\r\n\r\nexport function isMultiStateParameter(value: any): value is TIoBrokerInOutFunction_MultiStateParameter {\r\n    if (value === undefined || value === null || typeof value !== 'object') {\r\n        return false;\r\n    }\r\n    let propName: keyof TIoBrokerInOutFunction_MultiStateParameter = 'readState';\r\n    return (propName in value);\r\n}\r\n\r\nexport class TIoBrokerInOutFunction_MultiState extends TIoBrokerInOutFunctionBase {\r\n\r\n    static parseParameters(parameters: any): TIoBrokerInOutFunction_MultiStateParameter[] {\r\n        if (Array.isArray(parameters)) {\r\n            return parameters.filter(isMultiStateParameter);\r\n        } else if (typeof parameters === 'string') {\r\n            return [{ readState: parameters }];\r\n        } else {\r\n            return undefined\r\n        }\r\n    }\r\n\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        let stateNames = TIoBrokerInOutFunction_MultiState.parseParameters(parameters);\r\n        if (stateNames === undefined) {\r\n            return undefined\r\n        }\r\n        return new TIoBrokerInOutFunction_MultiState(adapter, stateNames);\r\n    }\r\n\r\n    constructor(protected adapter: ioBroker.Adapter, protected stateProperties: TIoBrokerInOutFunction_MultiStateParameter[]) {\r\n        super(adapter, 'TIoBrokerInOutFunctionMultiState');\r\n        for (let state of stateProperties) {\r\n            this.addSubscriptionRequest(state.readState);\r\n        }\r\n    }\r\n\r\n    protected recalculateHomekitValues(stateName: string) {\r\n        let hkValues = this.stateProperties.map((state) => this.stateCache.get(state.readState)?.val);\r\n        return hkValues.length === 1 ? hkValues[0] : hkValues;\r\n    }\r\n\r\n    private updateSingleIOBrokerValue(state: TIoBrokerInOutFunction_MultiStateParameter, newValue: any): Promise<void> {\r\n        if (newValue === undefined) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        return new Promise<void>((resolve, reject) => {\r\n            let stateName = state.writeState || state.readState;\r\n            this.log.debug(`writing state to ioBroker [${stateName}]: ${JSON.stringify(newValue)}`);\r\n            this.adapter.setForeignState(stateName, newValue, false, (error) => {\r\n                if (error) {\r\n                    this.log.error(`setForeignState error [${stateName}] to [${JSON.stringify(newValue)}]: ${error}`);\r\n                    reject(error);\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    protected updateIOBrokerValue(plainIoValue: any, callback: () => void) {\r\n        let ioValueArray = Array.isArray(plainIoValue) ? plainIoValue : [plainIoValue];\r\n        let promiseArray = this.stateProperties.map((state, index) => {\r\n            let newValueForThisState = ioValueArray[index];\r\n            return this.updateSingleIOBrokerValue(state, newValueForThisState);\r\n        });\r\n        Promise.all(promiseArray).then(() => {\r\n            this.log.debug('wrote all states successfully to ioBroker');\r\n            callback();\r\n        }).catch((e) => {\r\n            this.log.error(`could not write all states to ioBroker: ${JSON.stringify(e)}`);\r\n            callback();\r\n        });\r\n    }\r\n}\r\n","import { TIoBrokerInOutFunction_StateBase, IInOutFunction } from './iofunc.base';\r\n\r\nexport class TIoBrokerInOutFunction_State extends TIoBrokerInOutFunction_StateBase {\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        if (typeof parameters !== 'string')\r\n            return undefined;\r\n        const stateName: string = parameters;\r\n\r\n        return new TIoBrokerInOutFunction_State(adapter, stateName);\r\n    }\r\n}\r\n\r\nexport class TIoBrokerInOutFunction_StateDeferred extends TIoBrokerInOutFunction_StateBase {\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        if (typeof parameters !== 'string')\r\n            return undefined;\r\n        const stateName: string = parameters;\r\n\r\n        return new TIoBrokerInOutFunction_StateDeferred(adapter, stateName, 250);\r\n    }\r\n}\r\n\r\nexport class TIoBrokerInOutFunction_State_OnlyACK extends TIoBrokerInOutFunction_StateBase {\r\n    protected lastAcknowledgedValue: any;\r\n\r\n    static create(adapter: ioBroker.Adapter, parameters: any): IInOutFunction {\r\n        if (typeof parameters !== 'string')\r\n            return undefined;\r\n        const stateName: string = parameters;\r\n\r\n        return new TIoBrokerInOutFunction_State_OnlyACK(adapter, stateName);\r\n    }\r\n\r\n    getValueOnRead(ioState: ioBroker.State): any {\r\n        if (ioState) {\r\n            if (ioState.ack) {\r\n                this.lastAcknowledgedValue = ioState?.val;\r\n                return ioState?.val;\r\n            } else {\r\n                this.adapter.log.debug(`faking CurrentState.Read for [${this.stateName}]: ${JSON.stringify(this.lastAcknowledgedValue)}`);\r\n                return this.lastAcknowledgedValue;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getValueOnNotify(ioState: ioBroker.State): any {\r\n        if (ioState) {\r\n            if (ioState.ack) {\r\n                this.lastAcknowledgedValue = ioState?.val;\r\n                return ioState?.val;\r\n            }\r\n            this.adapter.log.debug(`discarding CurrentState.Notify for [${this.stateName}]`);\r\n            return undefined;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/// <reference path=\"./typings/index.d.ts\" />\r\nimport debug = require('debug');\r\nimport util = require('node:util');\r\nimport { Configuration } from './shared/yahka.configuration';\r\nimport { importHAPCommunityTypesAndFixes } from './yahka.community.types';\r\nimport {\r\n    Accessory, Bridge, uuid, Characteristic,\r\n    Service, MDNSAdvertiser, HAPStorage,\r\n} from 'hap-nodejs';\r\nimport { YahkaServiceInitializer } from './yahka.homekit-service';\r\nimport { IHomeKitBridgeBindingFactory, ILogger } from './yahka.interfaces';\r\nconst pjson = require('../package.json');\r\n\r\nimportHAPCommunityTypesAndFixes();\r\n\r\ntype IPublishingMethod = () => void;\r\n\r\nexport class THomeKitBridge {\r\n    private bridgeObject: Bridge;\r\n    private serviceInitializer: YahkaServiceInitializer;\r\n    constructor(private config: Configuration.IBridgeConfig, FBridgeFactory: IHomeKitBridgeBindingFactory, private FLogger: ILogger) {\r\n        this.serviceInitializer = new YahkaServiceInitializer(FBridgeFactory, FLogger);\r\n        this.init();\r\n    }\r\n\r\n    public init() {\r\n        this.bridgeObject = this.setupBridge();\r\n        const devicesToPublish: IPublishingMethod[] = [\r\n            () => {\r\n                let advertiser = this.config.useLegacyAdvertiser ? MDNSAdvertiser.BONJOUR : MDNSAdvertiser.AVAHI;\r\n                advertiser = this.config.useCiaoAdvertiser ? MDNSAdvertiser.CIAO : advertiser;\r\n                this.FLogger.info(`publishing bridge ${this.config.name} on ${this.config.interface ?? '0.0.0.0'} using ${advertiser}`);\r\n                this.bridgeObject.publish({\r\n                    username: this.config.username,\r\n                    port: this.config.port,\r\n                    pincode: this.config.pincode,\r\n                    category: 2,\r\n                    bind: this.config.interface != '' ? this.config.interface : undefined,\r\n                    advertiser,\r\n                });\r\n            },\r\n        ];\r\n\r\n        if (this.config.devices) {\r\n            for (let device of this.config.devices) {\r\n                if (device.enabled === false) {\r\n                    continue;\r\n                }\r\n                const hapDevice = this.createDevice(device);\r\n\r\n                if (device.publishAsOwnDevice) {\r\n                    devicesToPublish.push(() => {\r\n                        let advertiser = device.useLegacyAdvertiser ? MDNSAdvertiser.BONJOUR : MDNSAdvertiser.AVAHI;\r\n                        advertiser = device.useCiaoAdvertiser ? MDNSAdvertiser.CIAO : advertiser;\r\n                        this.FLogger.info(`publishing device ${device.name} on ${device.interface ?? '0.0.0.0'} using ${advertiser}`);\r\n                        hapDevice.publish({\r\n                            username: device.username,\r\n                            port: device.port,\r\n                            pincode: device.pincode,\r\n                            category: device.category,\r\n                            advertiser,\r\n                            bind: device.interface,\r\n                        });\r\n                    });\r\n                } else {\r\n                    try {\r\n                        this.bridgeObject.addBridgedAccessory(hapDevice);\r\n                    } catch (e) {\r\n                        this.FLogger.warn(e);\r\n                        this.FLogger.warn(`Error by adding: ${JSON.stringify(device)}`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        devicesToPublish.forEach((m) => m());\r\n    }\r\n\r\n    private setupBridge() {\r\n        let hapBridge = new Bridge(this.config.name, uuid.generate(this.config.ident));\r\n\r\n        let infoService = hapBridge.getService(Service.AccessoryInformation);\r\n        infoService.setCharacteristic(Characteristic.Manufacturer, this.config.manufacturer || 'not configured');\r\n        infoService.setCharacteristic(Characteristic.Model, this.config.model || 'not configured');\r\n        infoService.setCharacteristic(Characteristic.SerialNumber, this.config.serial || 'not configured');\r\n        if (this.config.firmware !== undefined && this.config.firmware !== '') {\r\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, this.config.firmware);\r\n        } else {\r\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, pjson.version);\r\n        }\r\n\r\n        // Listen for bridge identification event\r\n        hapBridge.on('identify', (paired, callback) => {\r\n            this.FLogger.debug(`Node Bridge identify:${paired}`);\r\n            callback(); // success\r\n        });\r\n        return hapBridge;\r\n    }\r\n\r\n    private createDevice(device: Configuration.IDeviceConfig) {\r\n        let devName = device.name;\r\n        let deviceID = uuid.generate(`${this.config.ident}:${devName}`);\r\n        let i = 0;\r\n        while (this.bridgeObject.bridgedAccessories.some((a) => a.UUID == deviceID)) {\r\n            devName = `${device.name}_${++i}`;\r\n            deviceID = uuid.generate(`${this.config.ident}:${devName}`);\r\n        }\r\n\r\n        this.FLogger.info(`adding ${devName} with UUID: ${deviceID}`);\r\n        let hapDevice = new Accessory(devName, deviceID);\r\n\r\n        let infoService = hapDevice.getService(Service.AccessoryInformation);\r\n        infoService.setCharacteristic(Characteristic.Manufacturer, device.manufacturer || 'not configured');\r\n        infoService.setCharacteristic(Characteristic.Model, device.model || 'not configured');\r\n        infoService.setCharacteristic(Characteristic.SerialNumber, device.serial || 'not configured');\r\n        if (device.firmware !== undefined && device.firmware !== '') {\r\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, device.firmware);\r\n        }\r\n\r\n        hapDevice.on('identify', (paired, callback) => {\r\n            this.FLogger.debug(`[${device.name}] device identify`);\r\n            callback(); // success\r\n        });\r\n\r\n        this.serviceInitializer.initServices(hapDevice, device.services, device.availableState);\r\n        return hapDevice;\r\n    }\r\n}\r\n\r\nlet hapInited: boolean = false;\r\nlet originalLogMethod = debug.log;\r\n\r\nexport function initHAP(storagePath: string, HAPdebugLogMethod: Function) {\r\n    if (hapInited) {\r\n        return;\r\n    }\r\n\r\n    HAPStorage.setCustomStoragePath(storagePath);\r\n    debug.log = function () {\r\n        HAPdebugLogMethod(util.format.apply(this, arguments));\r\n    };\r\n}\r\n\r\nexport function deinitHAP() {\r\n    if (!hapInited) {\r\n        return;\r\n    }\r\n    debug.disable();\r\n    debug.log = originalLogMethod;\r\n    hapInited = false;\r\n}\r\n","/// <reference path=\"./typings/index.d.ts\" />\r\nimport { spawn, ChildProcess } from 'node:child_process';\r\nimport {\r\n    uuid,\r\n    Accessory,\r\n    Service,\r\n    Characteristic,\r\n    SnapshotRequest,\r\n    PrepareStreamRequest,\r\n    SessionIdentifier,\r\n    CameraStreamingDelegate,\r\n    CameraController,\r\n    SRTPCryptoSuites,\r\n    H264Profile,\r\n    H264Level,\r\n    SnapshotRequestCallback,\r\n    PrepareStreamCallback,\r\n    PrepareStreamResponse,\r\n    StreamingRequest,\r\n    StreamRequestCallback,\r\n    CameraStreamingOptions,\r\n    StreamRequestTypes,\r\n    AudioStreamingCodecType,\r\n    AudioStreamingSamplerate,\r\n    Categories,\r\n    MDNSAdvertiser,\r\n} from 'hap-nodejs';\r\nimport { IHomeKitBridgeBindingFactory, ILogger } from './yahka.interfaces';\r\nimport { Configuration } from './shared/yahka.configuration';\r\nimport { YahkaServiceInitializer } from './yahka.homekit-service';\r\n\r\ntype SessionInfo = {\r\n    address: string; // address of the HAP controller\r\n\r\n    videoPort: number; // port of the controller\r\n    localVideoPort: number;\r\n    videoCryptoSuite: SRTPCryptoSuites; // should be saved if multiple suites are supported\r\n    videoSRTP: Buffer; // key and salt concatenated\r\n    videoSSRC: number; // rtp synchronisation source\r\n\r\n    audioPort: number;\r\n    audioCryptoSuite: SRTPCryptoSuites;\r\n    audioSRTP: Buffer;\r\n    audioSSRC: number;\r\n};\r\n\r\ntype OngoingSession = {\r\n    localVideoPort: number;\r\n    process: ChildProcess;\r\n};\r\n\r\nexport class THomeKitIPCamera implements CameraStreamingDelegate {\r\n    private cameraController: CameraController;\r\n    private camera: Accessory;\r\n    private pendingSessions: Record<string, Partial<SessionInfo>> = {};\r\n    private ongoingSessions: Record<string, OngoingSession> = {};\r\n    private serviceInitializer: YahkaServiceInitializer;\r\n    constructor(private camConfig: Configuration.ICameraConfig, FBridgeFactory: IHomeKitBridgeBindingFactory, private FLogger: ILogger) {\r\n        this.serviceInitializer = new YahkaServiceInitializer(FBridgeFactory, FLogger);\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.camConfig.enabled) {\r\n            return;\r\n        }\r\n        this.createCameraDevice();\r\n        this.createCameraController();\r\n        this.createAdditionalServices();\r\n        this.publishCamera();\r\n    }\r\n\r\n    private createOptionsDictionary(): CameraStreamingOptions {\r\n        const videoResolutions = [];\r\n        const maxFPS = this.camConfig.maxFPS > 30 ? 30 : this.camConfig.maxFPS;\r\n\r\n        if (this.camConfig.maxWidth >= 320) {\r\n            if (this.camConfig.maxHeight >= 240) {\r\n                videoResolutions.push([320, 240, maxFPS]);\r\n                if (maxFPS > 15) {\r\n                    videoResolutions.push([320, 240, 15]);\r\n                }\r\n            }\r\n\r\n            if (this.camConfig.maxHeight >= 180) {\r\n                videoResolutions.push([320, 180, maxFPS]);\r\n                if (maxFPS > 15) {\r\n                    videoResolutions.push([320, 180, 15]);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.camConfig.maxWidth >= 480) {\r\n            if (this.camConfig.maxHeight >= 360) {\r\n                videoResolutions.push([480, 360, maxFPS]);\r\n            }\r\n\r\n            if (this.camConfig.maxHeight >= 270) {\r\n                videoResolutions.push([480, 270, maxFPS]);\r\n            }\r\n        }\r\n\r\n        if (this.camConfig.maxWidth >= 640) {\r\n            if (this.camConfig.maxHeight >= 480) {\r\n                videoResolutions.push([640, 480, maxFPS]);\r\n            }\r\n\r\n            if (this.camConfig.maxHeight >= 360) {\r\n                videoResolutions.push([640, 360, maxFPS]);\r\n            }\r\n        }\r\n\r\n        if (this.camConfig.maxWidth >= 1280) {\r\n            if (this.camConfig.maxHeight >= 960) {\r\n                videoResolutions.push([1280, 960, maxFPS]);\r\n            }\r\n\r\n            if (this.camConfig.maxHeight >= 720) {\r\n                videoResolutions.push([1280, 720, maxFPS]);\r\n            }\r\n        }\r\n\r\n        if (this.camConfig.maxWidth >= 1920) {\r\n            if (this.camConfig.maxHeight >= 1080) {\r\n                videoResolutions.push([1920, 1080, maxFPS]);\r\n            }\r\n        }\r\n\r\n        const options: CameraStreamingOptions = {\r\n            proxy: false, // Requires RTP/RTCP MUX Proxy\r\n            disable_audio_proxy: false, // If proxy = true, you can opt out audio proxy via this\r\n            srtp: true, // Supports SRTP AES_CM_128_HMAC_SHA1_80 encryption\r\n            supportedCryptoSuites: [SRTPCryptoSuites.AES_CM_128_HMAC_SHA1_80],\r\n            video: {\r\n                resolutions: videoResolutions,\r\n                codec: {\r\n                    profiles: [H264Profile.BASELINE, H264Profile.MAIN, H264Profile.HIGH],\r\n                    levels: [H264Level.LEVEL3_1, H264Level.LEVEL3_2, H264Level.LEVEL4_0],\r\n                },\r\n            },\r\n            audio: {\r\n                comfort_noise: false,\r\n                codecs: [\r\n                    {\r\n                        type: AudioStreamingCodecType.AAC_ELD,\r\n                        samplerate: AudioStreamingSamplerate.KHZ_16,\r\n                    },\r\n                ],\r\n            },\r\n        };\r\n        return options;\r\n    }\r\n\r\n    private createCameraDevice() {\r\n        let deviceID = uuid.generate(this.camConfig.ident + ':' + this.camConfig.name);\r\n        let hapDevice = new Accessory(this.camConfig.name, deviceID);\r\n\r\n        let infoService = hapDevice.getService(Service.AccessoryInformation);\r\n        infoService.setCharacteristic(Characteristic.Manufacturer, this.camConfig.manufacturer || 'not configured');\r\n        infoService.setCharacteristic(Characteristic.Model, this.camConfig.model || 'not configured');\r\n        infoService.setCharacteristic(Characteristic.SerialNumber, this.camConfig.serial || 'not configured');\r\n        if (this.camConfig.firmware !== undefined && this.camConfig.firmware !== '') {\r\n            infoService.setCharacteristic(Characteristic.FirmwareRevision, this.camConfig.firmware);\r\n        }\r\n\r\n        hapDevice.on('identify', (paired, callback) => {\r\n            this.FLogger.debug('camera identify');\r\n            callback(); // success\r\n        });\r\n\r\n        this.camera = hapDevice;\r\n    }\r\n\r\n    public createCameraController() {\r\n        this.cameraController = new CameraController({\r\n            cameraStreamCount: 2, // HomeKit requires at least 2 streams, but 1 is also just fine\r\n            delegate: this,\r\n            streamingOptions: this.createOptionsDictionary(),\r\n        });\r\n\r\n        this.camera.configureController(this.cameraController);\r\n    }\r\n\r\n    public createAdditionalServices() {\r\n        this.serviceInitializer.initServices(this.camera, this.camConfig.services);\r\n    }\r\n\r\n    private publishCamera() {\r\n        let advertiser = this.camConfig.useLegacyAdvertiser ? MDNSAdvertiser.BONJOUR : MDNSAdvertiser.AVAHI;\r\n        advertiser = this.camConfig.useCiaoAdvertiser ? MDNSAdvertiser.CIAO : advertiser;\r\n        this.FLogger.info(`publishing camera ${this.camConfig.name} on ${this.camConfig.interface ?? '0.0.0.0'} using ${advertiser}`);\r\n        this.camera.publish(\r\n            {\r\n                username: this.camConfig.username,\r\n                port: this.camConfig.port,\r\n                pincode: this.camConfig.pincode,\r\n                category: Categories.CAMERA,\r\n                bind: this.camConfig.interface != '' ? this.camConfig.interface : undefined,\r\n                advertiser,\r\n            },\r\n            false\r\n        );\r\n    }\r\n\r\n    public handleSnapshotRequest(request: SnapshotRequest, callback: SnapshotRequestCallback): void {\r\n        let params = {\r\n            source: this.camConfig.source,\r\n            width: request.width,\r\n            height: request.height,\r\n        };\r\n        let ffmpegCommand = this.camConfig.ffmpegCommandLine.snapshot.map((s) =>\r\n            s.replace(/\\$\\{(.*?)}/g, (_, word) => {\r\n                return params[word];\r\n            })\r\n        );\r\n\r\n        this.FLogger.debug(`Snapshot run: ffmpeg ${ffmpegCommand.join(' ')}`);\r\n        let ffmpeg = spawn('ffmpeg', ffmpegCommand, { env: process.env });\r\n\r\n        let imageBuffer = Buffer.alloc(0);\r\n\r\n        ffmpeg.stdout.on('data', data => imageBuffer = Buffer.concat([imageBuffer, <Buffer>data]));\r\n        ffmpeg.on('close', (/* code */) => callback(undefined, imageBuffer));\r\n    }\r\n\r\n    public prepareStream(request: PrepareStreamRequest, callback: PrepareStreamCallback): void {\r\n        let sessionInfo: Partial<SessionInfo> = {};\r\n\r\n        const sessionID: SessionIdentifier = request.sessionID;\r\n\r\n        sessionInfo.address = request.targetAddress;\r\n        let response: Partial<PrepareStreamResponse> = {};\r\n\r\n        let videoInfo = request.video;\r\n        if (videoInfo) {\r\n            const targetPort = videoInfo.port;\r\n            const videoCryptoSuite = videoInfo.srtpCryptoSuite; // could be used to support multiple crypto suite (or support no suite for debugging)\r\n            const videoSrtpKey = videoInfo.srtp_key;\r\n            const videoSrtpSalt = videoInfo.srtp_salt;\r\n\r\n            const videoSSRC = CameraController.generateSynchronisationSource();\r\n\r\n            response.video = {\r\n                port: targetPort,\r\n                ssrc: videoSSRC,\r\n                srtp_key: videoSrtpKey,\r\n                srtp_salt: videoSrtpSalt,\r\n            };\r\n\r\n            sessionInfo.videoPort = targetPort;\r\n            sessionInfo.videoSRTP = Buffer.concat([videoSrtpKey, videoSrtpSalt]);\r\n            sessionInfo.videoSSRC = videoSSRC;\r\n            sessionInfo.videoCryptoSuite = videoCryptoSuite;\r\n        }\r\n\r\n        const audioInfo = request.audio;\r\n        if (audioInfo) {\r\n            const targetPort = audioInfo.port;\r\n            const audioCryptoSuite = audioInfo.srtpCryptoSuite; // could be used to support multiple crypto suite (or support no suite for debugging)\r\n            const audioSrtpKey = audioInfo.srtp_key;\r\n            const audioSrtpSalt = audioInfo.srtp_salt;\r\n            const audioSSRC = CameraController.generateSynchronisationSource();\r\n\r\n            response.audio = {\r\n                port: targetPort,\r\n                ssrc: audioSSRC,\r\n                srtp_key: audioSrtpKey,\r\n                srtp_salt: audioSrtpSalt,\r\n            };\r\n\r\n            sessionInfo.audioPort = targetPort;\r\n            sessionInfo.audioSRTP = Buffer.concat([audioSrtpKey, audioSrtpSalt]);\r\n            sessionInfo.audioSSRC = audioSSRC;\r\n            sessionInfo.audioCryptoSuite = audioCryptoSuite;\r\n        }\r\n\r\n        // let currentAddress = ip.address();\r\n        // const addressResp: Partial<Address> = {\r\n        //     address: currentAddress\r\n        // };\r\n\r\n        // if (ip.isV4Format(currentAddress)) {\r\n        //     addressResp.type = 'v4';\r\n        // } else {\r\n        //     addressResp.type = 'v6';\r\n        // }\r\n\r\n        // response.address = addressResp as Address;\r\n        this.pendingSessions[sessionID] = sessionInfo;\r\n\r\n        callback(undefined, response as PrepareStreamResponse);\r\n    }\r\n\r\n    public handleStreamRequest(request: StreamingRequest, callback: StreamRequestCallback): void {\r\n        const sessionId = request.sessionID;\r\n        switch (request.type) {\r\n            case StreamRequestTypes.START: {\r\n                const sessionInfo = this.pendingSessions[sessionId];\r\n                this.FLogger.debug(`Session Request: ${JSON.stringify(request, undefined, 2)}`);\r\n                if (sessionInfo) {\r\n                    let width = 1280;\r\n                    let height = 720;\r\n                    let fps = 30;\r\n                    let bitrate = 300;\r\n                    let codec = this.camConfig.codec ?? 'libx264';\r\n                    const mtu = request.video?.mtu ?? 1316;\r\n                    let videoInfo = request.video;\r\n                    if (videoInfo) {\r\n                        width = videoInfo.width;\r\n                        height = videoInfo.height;\r\n\r\n                        let expectedFPS = videoInfo.fps;\r\n                        if (expectedFPS < fps) {\r\n                            fps = expectedFPS;\r\n                        }\r\n\r\n                        bitrate = videoInfo.max_bit_rate;\r\n                    }\r\n\r\n                    let params = {\r\n                        source: this.camConfig.source,\r\n                        codec,\r\n                        fps,\r\n                        width,\r\n                        height,\r\n                        bitrate,\r\n                        payloadtype: request.video.pt ?? 99,\r\n                        videokey: sessionInfo.videoSRTP?.toString('base64'),\r\n                        targetAddress: sessionInfo.address,\r\n                        targetVideoPort: sessionInfo.videoPort,\r\n                        targetVideoSsrc: sessionInfo.videoSSRC,\r\n                        mtu,\r\n                    };\r\n\r\n                    let ffmpegCommand = this.camConfig.ffmpegCommandLine.stream.map((s) => s.replace(/\\$\\{(.*?)}/g, (_, word) => params[word]));\r\n\r\n                    if (this.camConfig.enableAudio && request.audio != null) {\r\n                        let params = {\r\n                            source: this.camConfig.source,\r\n                            bitrate: request.audio.max_bit_rate ?? 16,\r\n                            samplerate: request.audio.sample_rate ?? 16,\r\n                            channel: request.audio.channel ?? 1,\r\n                            payloadtype: request.audio.pt ?? 110,\r\n                            targetAddress: sessionInfo.address,\r\n                            targetAudioPort: sessionInfo.audioPort,\r\n                            targetAudioSsrc: sessionInfo.audioSSRC,\r\n                            audiokey: sessionInfo.audioSRTP?.toString('base64'),\r\n                        };\r\n\r\n                        ffmpegCommand = ffmpegCommand.concat(this.camConfig.ffmpegCommandLine.streamAudio.map((s) => s.replace(/\\$\\{(.*?)}/g, (_, word) => params[word])));\r\n                    }\r\n\r\n                    // this.FLogger.debug(\"Stream run: ffmpeg \" + ffmpegCommand.join(' '));\r\n                    let ffmpeg = spawn('ffmpeg', ffmpegCommand, { env: process.env });\r\n\r\n                    let started = false;\r\n                    ffmpeg.stderr.on('data', (/* data: Buffer */) => {\r\n                        if (!started) {\r\n                            started = true;\r\n                            this.FLogger.debug('FFMPEG: received first frame');\r\n                            callback(); // do not forget to execute callback once set up\r\n                        }\r\n                        //this.FLogger.debug(\"FFMPEG:\" + data.toString('utf8'));\r\n                    });\r\n                    ffmpeg.on('error', (error) => {\r\n                        this.FLogger.error(`[Video] Failed to start video stream: ${error.message}`);\r\n                        callback(new Error('ffmpeg process creation failed!'));\r\n                    });\r\n                    ffmpeg.on('exit', (code, signal) => {\r\n                        const message = `[Video] ffmpeg exited with code: ${code} and signal: ${signal}`;\r\n\r\n                        if (code == null || code === 255) {\r\n                            this.FLogger.debug(`${message} (Video stream stopped!)`);\r\n                        } else {\r\n                            this.FLogger.error(`${message} (error)`);\r\n\r\n                            if (!started) {\r\n                                callback(new Error(message));\r\n                            } else {\r\n                                this.cameraController.forceStopStreamingSession(sessionId);\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    this.ongoingSessions[sessionId] = {\r\n                        localVideoPort: 0,\r\n                        process: ffmpeg,\r\n                    };\r\n                    delete this.pendingSessions[sessionId];\r\n\r\n                    break;\r\n                }\r\n            }\r\n                // break; // here should be break\r\n\r\n            case StreamRequestTypes.RECONFIGURE:\r\n                callback();\r\n                break;\r\n\r\n            case StreamRequestTypes.STOP:\r\n                this.stopStreaming(sessionId);\r\n                callback();\r\n                break;\r\n        }\r\n    }\r\n\r\n    private stopStreaming(sessionId: string) {\r\n        const ongoingSession = this.ongoingSessions[sessionId];\r\n        try {\r\n            ongoingSession.process.kill('SIGKILL');\r\n        } catch (e) {\r\n            this.FLogger.error('Error occurred terminating the video process!');\r\n            this.FLogger.error(e);\r\n        }\r\n\r\n        delete this.ongoingSessions[sessionId];\r\n\r\n        this.FLogger.debug('Stopped streaming session!');\r\n    }\r\n}\r\n","/// <reference path=\"./typings/index.d.ts\" />\r\nimport { Configuration } from './shared/yahka.configuration';\r\nimport { Accessory, Characteristic, CharacteristicSetCallback, HAPStatus, Service } from 'hap-nodejs';\r\nimport {\r\n    IHasIHomeKitBridgeBinding,\r\n    IHomeKitBridgeBinding,\r\n    IHomeKitBridgeBindingFactory,\r\n    ILogger,\r\n} from './yahka.interfaces';\r\n\r\ntype IHAPCharacteristic = Characteristic & IHasIHomeKitBridgeBinding;\r\n\r\nexport class YahkaServiceInitializer {\r\n    constructor(private FBridgeFactory: IHomeKitBridgeBindingFactory, private FLogger: ILogger) {\r\n\r\n    }\r\n\r\n    public initServices(hapDevice: Accessory, serviceConfigs: Configuration.IServiceConfig[], availabilityIobState?: string) {\r\n        if (serviceConfigs == null) {\r\n            return;\r\n        }\r\n\r\n        let iobStateGiven = availabilityIobState !== undefined && availabilityIobState !== null && availabilityIobState.trim() !== '';\r\n\r\n        let availableStateBinding = iobStateGiven ? this.FBridgeFactory.CreateBinding(\r\n                {\r\n                    name: 'Dummy',\r\n                    enabled: true,\r\n                    customCharacteristic: true,\r\n                    properties: [],\r\n                    inOutFunction: 'ioBroker.State',\r\n                    inOutParameters: availabilityIobState\r\n                },\r\n                (dummy: any) => {}\r\n            )\r\n            : null;\r\n\r\n        for (const service of serviceConfigs) {\r\n            this.initService(hapDevice, service, availableStateBinding);\r\n        }\r\n\r\n        for (const service of serviceConfigs) {\r\n            this.establishServiceLinks(hapDevice, service);\r\n        }\r\n    }\r\n\r\n    private initService(hapDevice: Accessory, serviceConfig: Configuration.IServiceConfig, availabilityBinding: IHomeKitBridgeBinding) {\r\n        if (serviceConfig.enabled === false) {\r\n            this.FLogger.debug(`[${hapDevice.displayName}] service ${serviceConfig.name} is disabled`);\r\n            return;\r\n        }\r\n\r\n        let newType = serviceConfig.type;\r\n\r\n        switch (serviceConfig.type) {\r\n            case 'BatteryType':\r\n            case 'BatteryService': {\r\n                newType = 'Battery';\r\n                break;\r\n            }\r\n            case 'CameraEventRecordingManagement': {\r\n                newType = 'CameraRecordingManagement';\r\n                break;\r\n            }\r\n            case 'Relay': {\r\n                newType = 'CloudRelay';\r\n                break;\r\n            }\r\n            case 'Slat': {\r\n                newType = 'Slats';\r\n                break;\r\n            }\r\n            case 'TunneledBTLEAccessoryService': {\r\n                newType = 'Tunnel';\r\n                break;\r\n            }\r\n            case 'BridgeConfiguration':\r\n            case 'BridgingState':\r\n            case 'CameraControl':\r\n            case 'TimeInformation': {\r\n                this.FLogger.warn(`The type ${serviceConfig.type} is not supported anymore and has been removed. You can change your service configuration and remove the item.`);\r\n                return;\r\n            }\r\n        }\r\n\r\n        serviceConfig.type = newType;\r\n\r\n        if (!(serviceConfig.type in Service)) {\r\n            throw Error(`[${hapDevice.displayName}] unknown service type: ${serviceConfig.type}`);\r\n        }\r\n\r\n        this.FLogger.debug(`[${hapDevice.displayName}] adding Service ${serviceConfig.name}`);\r\n\r\n        let isNew = false;\r\n        let hapService = hapDevice.getService(Service[serviceConfig.type]);\r\n        if (hapService !== undefined) {\r\n            const existingSubType = hapService.subtype ? hapService.subtype : '';\r\n            if (existingSubType != serviceConfig.subType)\r\n                hapService = undefined;\r\n        }\r\n\r\n        if (hapService === undefined) {\r\n            hapService = new Service[serviceConfig.type](serviceConfig.name, serviceConfig.subType);\r\n            isNew = true;\r\n        }\r\n\r\n        if (serviceConfig.isHidden != null) {\r\n            hapService.setHiddenService(serviceConfig.isHidden);\r\n        }\r\n\r\n        if (serviceConfig.isPrimary != null) {\r\n            hapService.setPrimaryService(serviceConfig.isPrimary);\r\n        }\r\n\r\n        for (let charactConfig of serviceConfig.characteristics) {\r\n            this.initCharacteristic(hapService, charactConfig, availabilityBinding);\r\n        }\r\n\r\n        if (isNew) {\r\n            hapDevice.addService(hapService);\r\n        }\r\n    }\r\n\r\n    private establishServiceLinks(hapDevice: Accessory, serviceConfig: Configuration.IServiceConfig) {\r\n        if (serviceConfig.enabled == false) {\r\n            return\r\n        }\r\n        if (serviceConfig.linkTo == null) {\r\n            return;\r\n        }\r\n        if (serviceConfig.linkTo == '') {\r\n            return;\r\n        }\r\n\r\n        const existingService = hapDevice.getService(serviceConfig.name);\r\n        const linkToService = hapDevice.getService(serviceConfig.linkTo);\r\n        if (existingService == null || linkToService == null) {\r\n            this.FLogger.error(`[${serviceConfig.name}] unable to establish link between ${serviceConfig.linkTo} and ${serviceConfig.name} - one of the services was not found or is disabled`);\r\n            return;\r\n        }\r\n        linkToService.addLinkedService(existingService);\r\n        this.FLogger.debug(`[${serviceConfig.name}] established link from ${existingService.displayName} to ${linkToService.displayName}`);\r\n    }\r\n\r\n    private initCharacteristic(hapService: Service, characteristicConfig: Configuration.ICharacteristicConfig, availabilityBinding: IHomeKitBridgeBinding) {\r\n        const logName = `[${hapService.displayName}.${characteristicConfig.name}]`;\r\n        if (!characteristicConfig.enabled) {\r\n            return;\r\n        }\r\n\r\n        let hapCharacteristic = hapService.getCharacteristic(Characteristic[characteristicConfig.name]) as IHAPCharacteristic;\r\n        if (!hapCharacteristic) {\r\n            this.FLogger.warn(`${logName} unknown characteristic: ${characteristicConfig.name}`);\r\n            return;\r\n        }\r\n\r\n        if (characteristicConfig.properties !== undefined)\r\n            hapCharacteristic.setProps(characteristicConfig.properties);\r\n\r\n        hapCharacteristic.binding = this.FBridgeFactory.CreateBinding(characteristicConfig, (plainIOValue: any) => {\r\n            this.FLogger.debug(`${logName} got a change notify event, ioValue: ${JSON.stringify(plainIOValue)}`);\r\n            let binding: IHomeKitBridgeBinding = hapCharacteristic.binding;\r\n            if (!binding) {\r\n                this.FLogger.error(`${logName} no binding!`);\r\n                return;\r\n            }\r\n\r\n            let hkValue = binding.conversion.toHomeKit(plainIOValue);\r\n            this.FLogger.debug(`${logName} forwarding value from ioBroker (${JSON.stringify(plainIOValue)}) to homekit as (${JSON.stringify(hkValue)})`);\r\n            try {\r\n                hapCharacteristic.setValue(hkValue, binding);\r\n            } catch (e) {\r\n                this.FLogger.error(`${logName} error while setting value ${hkValue} - message: ${e}`);\r\n            }\r\n        });\r\n\r\n        this.getValueFromIOBroker(hapCharacteristic.binding, (error, ioValue, hkValue) => {\r\n            this.FLogger.debug(`${logName} initializing homekit with value from ioBroker(${JSON.stringify(ioValue)}) to homekit as (${JSON.stringify(hkValue)})`);\r\n            try {\r\n                hapCharacteristic.setValue(hkValue, hapCharacteristic.binding);\r\n            } catch (e) {\r\n                this.FLogger.error(`${logName} error while setting value ${hkValue} - message: ${e}`);\r\n            }\r\n        });\r\n\r\n        hapCharacteristic.on('set', (hkValue: any, callback: CharacteristicSetCallback, context: any) => {\r\n            let availableCallback = () => {\r\n                this.FLogger.debug(`${logName} got a set event, hkValue: ${JSON.stringify(hkValue)} `);\r\n                let binding: IHomeKitBridgeBinding = hapCharacteristic.binding;\r\n                if (!binding) {\r\n                    this.FLogger.error(`${logName} no binding!`);\r\n                    callback();\r\n                    return;\r\n                }\r\n\r\n                if (context === binding) {\r\n                    this.FLogger.debug(`${logName} set was initiated from ioBroker - exiting here`);\r\n                    callback();\r\n                    return;\r\n                }\r\n\r\n                let ioValue = binding.conversion.toIOBroker(hkValue);\r\n                binding.inOut.toIOBroker(ioValue, () => {\r\n                    this.FLogger.debug(`${logName} set was accepted by ioBroker(value: ${JSON.stringify(ioValue)})`);\r\n                    callback();\r\n                });\r\n            }\r\n\r\n            if (availabilityBinding === null || availabilityBinding === undefined) {\r\n                availableCallback();\r\n\r\n                return;\r\n            }\r\n\r\n            availabilityBinding.inOut.fromIOBroker((error: any, plainIOValue: any) => {\r\n                if (!plainIOValue) {\r\n                    callback(HAPStatus.SERVICE_COMMUNICATION_FAILURE);\r\n                    return;\r\n                }\r\n\r\n                availableCallback();\r\n            });\r\n        });\r\n\r\n        hapCharacteristic.on('get', (hkCallback) => {\r\n            this.FLogger.debug(`${logName} got a get event`);\r\n            const availableCallback = () => {\r\n                this.getValueFromIOBroker(hapCharacteristic.binding, (error, ioValue, hkValue) => {\r\n                    this.FLogger.debug(`${logName} forwarding value from ioBroker(${JSON.stringify(ioValue)}) to homekit as (${JSON.stringify(hkValue)})`);\r\n                    try {\r\n                        hkCallback(error, hkValue);\r\n                    } catch (e) {\r\n                        this.FLogger.error(`${logName} error while setting value ${hkValue} - message: ${e}`);\r\n                    }\r\n                });\r\n            };\r\n\r\n            if (availabilityBinding === null || availabilityBinding === undefined) {\r\n                availableCallback();\r\n\r\n                return;\r\n            }\r\n\r\n            availabilityBinding.inOut.fromIOBroker((error: any, plainIOValue: any) => {\r\n                if (!plainIOValue) {\r\n                    hkCallback(HAPStatus.SERVICE_COMMUNICATION_FAILURE);\r\n                    return;\r\n                }\r\n                availableCallback();\r\n            });\r\n        });\r\n    }\r\n\r\n    private getValueFromIOBroker(binding: IHomeKitBridgeBinding, callback: (error: any, ioValue: any, hkValue: string | number | undefined) => void) {\r\n        if (!binding) {\r\n            callback('no binding', null, null);\r\n            return;\r\n        }\r\n\r\n        binding.inOut.fromIOBroker((ioBrokerError, ioValue) => {\r\n            let hkValue = binding.conversion.toHomeKit(ioValue);\r\n            // check if the value can be converted to a number\r\n            if ((hkValue !== undefined) && (hkValue !== \"\")) {\r\n                let numValue = Number(hkValue);\r\n                if (!isNaN(numValue)) {\r\n                    hkValue = numValue;\r\n                }\r\n            }\r\n            callback(ioBrokerError, ioValue, hkValue);\r\n        });\r\n    }\r\n}\r\n","/// <reference path=\"./typings/index.d.ts\" />\r\nimport { join } from 'node:path';\r\nimport { THomeKitIPCamera } from './yahka.homekit-ipcamera';\r\nimport { Configuration } from './shared/yahka.configuration';\r\nimport { functionFactory } from './yahka.functions/functions.factory';\r\nimport { IHomeKitBridgeBinding, IHomeKitBridgeBindingFactory, IInOutChangeNotify } from './yahka.interfaces';\r\nimport { THomeKitBridge, initHAP, deinitHAP } from './yahka.homekit-bridge';\r\n\r\nexport type TSubscriptionType = 'state' | 'object';\r\n\r\nexport interface ISubscriptionRequest {\r\n    subscriptionType: TSubscriptionType;\r\n    subscriptionIdentifier: string;\r\n    subscriptionEvent: (ioValue: any, callback: IInOutChangeNotify) => void;\r\n}\r\nexport interface ISubscriptionRequester {\r\n    subscriptionRequests: ISubscriptionRequest[];\r\n}\r\n\r\nfunction isSubscriptionRequester(param: Object): param is ISubscriptionRequester {\r\n    return param['subscriptionRequests'] !== undefined &&\r\n        param['subscriptionRequests'] instanceof Array;\r\n}\r\ninterface ICustomCharacteristicConfig extends Configuration.ICharacteristicConfig {\r\n    conversionFunction?: string;\r\n    conversionParameters?: any;\r\n    inOutFunction?: string;\r\n    inOutParameters?: any;\r\n}\r\n\r\nfunction isCustomCharacteristicConfig(config: Configuration.ICharacteristicConfig): config is ICustomCharacteristicConfig {\r\n    if (!config)\r\n        return false;\r\n    let myConfig = <ICustomCharacteristicConfig>config;\r\n    return (myConfig.inOutFunction !== undefined) || (myConfig.conversionFunction !== undefined) || (myConfig.inOutParameters !== undefined);\r\n}\r\n\r\nexport class TIOBrokerAdapter implements IHomeKitBridgeBindingFactory {\r\n    stateToEventMap: Map<string, IInOutChangeNotify[]> = new Map<string, IInOutChangeNotify[]>();\r\n    objectToEventMap: Map<string, IInOutChangeNotify[]> = new Map<string, IInOutChangeNotify[]>();\r\n    devices: Array<THomeKitBridge | THomeKitIPCamera> = [];\r\n    verboseHAPLogging: boolean = false;\r\n\r\n    constructor(private adapter: ioBroker.Adapter, private dataDir) {\r\n        adapter.on('ready', this.adapterReady.bind(this));\r\n        adapter.on('stateChange', this.handleState.bind(this));\r\n        adapter.on('message', this.handleMessage.bind(this));\r\n        adapter.on('unload', this.handleUnload.bind(this));\r\n    }\r\n\r\n    private adapterReady() {\r\n        initHAP(join(this.dataDir, `${this.adapter.name}.${this.adapter.instance}.hapdata`), this.handleHAPLogEvent.bind(this));\r\n\r\n        this.adapter.log.info('adapter ready, checking config');\r\n        let config = this.adapter.config;\r\n        this.createHomeKitBridges(config);\r\n        this.createCameraDevices(config);\r\n    }\r\n\r\n    private createHomeKitBridges(config: any) {\r\n        let bridgeConfig: Configuration.IBridgeConfig = config.bridge;\r\n        if (!config.firstTimeInitialized) {\r\n            this.adapter.log.info('first time initialization');\r\n            this.adapter.log.debug(`system config: ${JSON.stringify(this.adapter.systemConfig)}`);\r\n\r\n            bridgeConfig.ident = `Yahka-${this.adapter.instance}`;\r\n            bridgeConfig.name = bridgeConfig.ident;\r\n            bridgeConfig.serial = bridgeConfig.ident;\r\n            let usr = [];\r\n            for (let i = 0; i < 6; i++) {\r\n                usr[i] = (`00${Math.floor((Math.random() * 256)).toString(16)}`).substr(-2);\r\n            }\r\n            bridgeConfig.username = usr.join(':');\r\n            bridgeConfig.pincode = '123-45-678';\r\n            bridgeConfig.port = 0;\r\n            bridgeConfig.verboseLogging = false;\r\n            config.firstTimeInitialized = true;\r\n            this.adapter.extendForeignObject(`system.adapter.${this.adapter.name}.${this.adapter.instance}`, { native: config }, undefined);\r\n        }\r\n        this.verboseHAPLogging = bridgeConfig.verboseLogging == true;\r\n\r\n        this.adapter.log.debug('creating bridge');\r\n        this.devices.push(new THomeKitBridge(config.bridge, this, this.adapter.log));\r\n    }\r\n\r\n    private createCameraDevices(config: any) {\r\n        let cameraArray: Array<Configuration.ICameraConfig> = config.cameras;\r\n        if (cameraArray === undefined)\r\n            return;\r\n\r\n        for (let cameraConfig of cameraArray) {\r\n            this.adapter.log.debug('creating camera');\r\n            this.devices.push(new THomeKitIPCamera(cameraConfig, this, this.adapter.log));\r\n        }\r\n    }\r\n\r\n    private handleHAPLogEvent(message) {\r\n        if (this.verboseHAPLogging) {\r\n            console.log('HAP debug message', message);\r\n            this.adapter.log.debug(`HAP debug message: ${message}`);\r\n        }\r\n    }\r\n\r\n    private handleState(id: string, state: ioBroker.State) {\r\n        // Warning, the state can be null if it was deleted\r\n        let notifyArray = this.stateToEventMap.get(id);\r\n        if (!notifyArray) {\r\n            //this.adapter.log.debug('nobody subscribed for this state');\r\n            return;\r\n        }\r\n        this.adapter.log.debug(`got a stateChange for [${id}]`);\r\n\r\n        // try to convert it to a number\r\n        convertStateValueToNumber(state);\r\n\r\n        for (let method of notifyArray)\r\n            method(state);\r\n    }\r\n\r\n    private handleMessage(obj: any) {\r\n        if (typeof obj === 'object' && obj?.message) {\r\n            if (obj.command === 'send') {\r\n                // Send response in callback if required\r\n                if (obj.callback) {\r\n                    this.adapter.sendTo(obj.from, obj.command, 'Message received', obj.callback);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleUnload(callback) {\r\n        try {\r\n            this.adapter.log.info('cleaning up ...');\r\n            deinitHAP();\r\n            this.adapter.log.info('cleaned up ...');\r\n        } catch (e) {\r\n        }\r\n        callback();\r\n    }\r\n\r\n    private handleInOutSubscriptionRequest(requester: ISubscriptionRequester, changeNotify: IInOutChangeNotify) {\r\n        if (requester.subscriptionRequests.length == 0)\r\n            return;\r\n\r\n        for (let subscriptionRequest of requester.subscriptionRequests) {\r\n            let changeInterceptor = (ioValue: any) => subscriptionRequest.subscriptionEvent(ioValue, changeNotify);\r\n\r\n            if (subscriptionRequest.subscriptionType === 'state') {\r\n                let existingArray = this.stateToEventMap.get(subscriptionRequest.subscriptionIdentifier);\r\n                if (!existingArray) {\r\n                    existingArray = [changeInterceptor];\r\n                    this.stateToEventMap.set(subscriptionRequest.subscriptionIdentifier, existingArray);\r\n                } else\r\n                    existingArray.push(changeInterceptor);\r\n\r\n                this.adapter.subscribeForeignStates(subscriptionRequest.subscriptionIdentifier);\r\n                this.adapter.log.debug(`added subscription for: [${subscriptionRequest.subscriptionType}]${subscriptionRequest.subscriptionIdentifier}`);\r\n                this.adapter.getForeignState(subscriptionRequest.subscriptionIdentifier, (_, value) => {\r\n                    convertStateValueToNumber(value);\r\n                    changeInterceptor(value)\r\n                });\r\n            } else {\r\n                this.adapter.log.warn(`unknown subscription type: ${subscriptionRequest.subscriptionType}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    public CreateBinding(characteristicConfig: Configuration.ICharacteristicConfig, changeNotify: IInOutChangeNotify): IHomeKitBridgeBinding {\r\n        if (isCustomCharacteristicConfig(characteristicConfig)) {\r\n            let inoutFunc = functionFactory.createInOutFunction(this.adapter, characteristicConfig.inOutFunction, characteristicConfig.inOutParameters);\r\n            if (inoutFunc === undefined) {\r\n                this.adapter.log.error(`[${characteristicConfig.name}] could not create inout-function: ${characteristicConfig.inOutFunction} with params: ${JSON.stringify(characteristicConfig.inOutParameters)}`);\r\n                return undefined;\r\n            }\r\n\r\n            let convFunc = functionFactory.createConversionFunction(this.adapter, characteristicConfig.conversionFunction, characteristicConfig.conversionParameters);\r\n            if (convFunc === undefined) {\r\n                this.adapter.log.error(`[${characteristicConfig.name}] could not create conversion-function: ${characteristicConfig.conversionFunction} with params: ${JSON.stringify(characteristicConfig.conversionParameters)}`);\r\n                return undefined;\r\n            }\r\n\r\n            if (isSubscriptionRequester(inoutFunc)) {\r\n                this.handleInOutSubscriptionRequest(inoutFunc, changeNotify);\r\n            }\r\n\r\n            return {\r\n                conversion: convFunc,\r\n                inOut: inoutFunc\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction convertStateValueToNumber(state: ioBroker.State) {\r\n    if ((state?.val != null)) {\r\n        let numValue = Number(state.val);\r\n        if (!isNaN(numValue)) {\r\n            state.val = numValue;\r\n        }\r\n    }\r\n}\r\n","module.exports = require(\"@iobroker/adapter-core\");","module.exports = require(\"debug\");","module.exports = require(\"hap-nodejs\");","module.exports = require(\"node:child_process\");","module.exports = require(\"node:path\");","module.exports = require(\"node:util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./main.ts\");\n",""],"names":[],"sourceRoot":""}